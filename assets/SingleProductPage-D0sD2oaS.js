import{S as L,aB as O,X as R,V as W,W as G,Y as H,r as l,l as u,e as J,av as K,Z as w,_ as ee,$ as r,aw as te,a0 as o,a6 as d,a1 as s,ag as ae,a2 as q,aC as $,ab as oe,a3 as se,ah as le,a8 as Q,a9 as S,af as ie,ai as x,a4 as ce,aD as ne,aE as re,ay as de}from"./index-CfkyZZb-.js";import{Q as B}from"./QImg-DqdcidWs.js";import{Q as ue}from"./QPage-DBdLhXdS.js";const me={class:"q-m-sm"},ve={class:"col-12 col-md-4"},pe={class:"col-12 col-md-8 q-pa-md",style:{display:"flex","flex-direction":"column","flex-grow":"1",height:"auto","min-height":"100%"}},fe={class:"text-body1 q-mt-sm"},ge={class:"q-mt-sm text-bold price-text"},he={class:"text-grey"},ye={class:"text-positive q-ml-sm"},we={class:"row justify-center q-mt-xl"},xe={class:"row justify-between items-center q-mb-md"},_e={class:"text-h6"},Qe=L({__name:"SingleProductPage",setup(ke){const{getVerticalScrollPosition:I}=de,V=O(),T=R(),n=W(),f=G(),{t:M}=H(),t=l({id:0,title:"",name:"",price:0,quantity:0,description:"",category:"",image:"",rating:{rate:0,count:0}}),z=l(!1),m=l(!1),g=l(""),i=l(!1),h=l(!1),_=l(0),k=l(0),v=l(0),p=l(0),C=u(()=>n.dark.isActive?"white":"black"),P=u(()=>n.dark.isActive?"black":"white"),Ce=u(()=>f.totalItems),Pe=u(()=>f.totalPrice),X=u(()=>({"--translate-x":`${v.value}px`,"--translate-y":`${p.value}px`})),y=e=>`$${e.toFixed(2)}`,Y=()=>{window.scrollTo({top:0,behavior:"smooth"})},j=e=>{f.addItem({...e,quantity:1}),Y(),n.notify({color:"positive",message:M("singleProduct.itemAdded"),icon:"check_circle"})},A=e=>{g.value=e,m.value=!0,i.value=!1},D=()=>{i.value||(v.value=0,p.value=0),i.value=!i.value},E=e=>{i.value&&(h.value=!0,_.value=e.clientX-v.value,k.value=e.clientY-p.value)},N=e=>{!i.value||!h.value||(v.value=e.clientX-_.value,p.value=e.clientY-k.value)},F=()=>{i.value&&(h.value=!1)},U=()=>{T.push("/products")},Z=async()=>{const{slug:e}=V.params;n.loading.show();try{const a=await(await fetch(`https://fakestoreapi.com/products/${e}`)).json();t.value={id:a.id,name:a.title,title:a.title,price:a.price,description:a.description,image:a.image,category:a.category,discount:Math.random()>.5,discountedPrice:a.price*(Math.random()>.5?.9:1),quantity:0,rating:{rate:0,count:0}}}catch{n.notify({color:"negative",message:"Failed to fetch product details.",icon:"error"})}finally{n.loading.hide()}},b=()=>{const e=I(window);z.value=e>0};return J(()=>{Z(),window.addEventListener("scroll",b)}),K(()=>{window.removeEventListener("scroll",b)}),(e,c)=>(w(),ee(ue,{padding:""},{default:r(()=>[te("",!0),o("h5",me,d(t.value.title),1),s(ae,{class:"q-my-md"}),s(q,{bordered:"",class:"q-mb-md q-mx-auto overflow-hidden",style:{"max-width":"1600px"}},{default:r(()=>[o("div",{class:$(["row items-stretch full-height",{"col-reverse-md":oe(n).screen.md}])},[o("div",ve,[s(B,{src:t.value.image,alt:t.value.name,fit:"cover",class:"cursor-pointer full-width full-height",onClick:c[0]||(c[0]=a=>A(t.value.image))},null,8,["src","alt"])]),o("div",pe,[s(se,{style:{flex:"1",display:"flex","flex-direction":"column",height:"100%"}},{default:r(()=>[o("div",fe,d(t.value.description),1)]),_:1}),s(le,{align:"right",class:"row justify-between items-end"},{default:r(()=>[o("div",ge,[t.value.discount?(w(),Q(S,{key:0},[o("s",he,d(y(t.value.price)),1),o("span",ye,d(y(t.value.discountedPrice||t.value.price)),1)],64)):(w(),Q(S,{key:1},[ie(d(y(t.value.price)),1)],64))]),s(x,{color:C.value,"text-color":P.value,label:e.$t("singleProduct.addToCart"),class:"q-px-md full-width",onClick:c[1]||(c[1]=ce(a=>j(t.value),["stop"]))},null,8,["color","text-color","label"])]),_:1})])],2)]),_:1}),o("div",we,[s(x,{color:C.value,"text-color":P.value,label:e.$t("singleProduct.backToProducts"),onClick:U},null,8,["color","text-color","label"])]),s(ne,{modelValue:m.value,"onUpdate:modelValue":c[3]||(c[3]=a=>m.value=a),maximized:""},{default:r(()=>[s(q,{class:"q-pa-md",style:{"max-width":"90vw","max-height":"90vh",overflow:"hidden"}},{default:r(()=>[o("div",xe,[o("div",_e,d(t.value.name),1),s(x,{flat:"",dense:"",round:"",icon:"close",onClick:c[2]||(c[2]=a=>m.value=!1)})]),s(B,{src:g.value,alt:g.value,class:$(["zoomable-image",{"zoom-in":i.value,"zoom-out":!i.value}]),style:re([{"max-width":"100%","max-height":"100%"},X.value]),onClick:D,onMousedown:E,onMousemove:N,onMouseleave:F},null,8,["src","alt","class","style"])]),_:1})]),_:1},8,["modelValue"])]),_:1}))}});export{Qe as default};
