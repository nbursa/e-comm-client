import{d as $,a as B,c as C,f as P,e as S,r as n,j as l,k as s,w as r,l as i,m as c,t as v,p as q,q as x,n as E,v as o,x as _,z as N,Q as y,A as R}from"./index-C0JJa2YO.js";import{Q as j}from"./QForm-CKSKV2hQ.js";import{Q as z}from"./QPage-BAchSC7v.js";const M={class:"tw-w-full sm:tw-max-w-72 tw-mx-auto"},U={class:"tw-text-3xl tw-text-center tw-mb-8 tw-font-semibold tw-font-serif"},A={class:"tw-w-full tw-flex tw-justify-center tw-items-center"},F={key:2,class:"tw-text-red-500 tw-mb-4"},I={class:"tw-flex tw-flex-col tw-gap-2"},K=$({__name:"UpdateProfilePage",setup(D){const w=B(),b=C(),h=P(),{t:d}=S(),p=n(w.user?.name||""),f=n(w.user?.email||""),u=n(null),a=n(!1),g=()=>{h.back()},Q=async()=>{try{const e=await w.updateProfile({name:p.value,email:f.value});b.notify({type:"positive",message:e,position:"top",timeout:5e3,icon:"check"}),a.value=!0}catch(e){const t=e;u.value=t.response?.data?.error||"Failed to change password. Please try again.",b.notify({type:"negative",message:u.value,position:"top",timeout:5e3,icon:"error"})}},k=e=>!!e||d("errors.validation.required"),V=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)?!0:d("errors.validation.invalidEmail");return(e,t)=>(l(),s(z,{padding:"",class:"!tw-pb-16 !tw-px-3 tw-flex tw-justify-center tw-items-center"},{default:r(()=>[i("div",M,[c(R,{flat:"",bordered:"",class:"!tw-w-full !tw-max-w-54 tw-p-4 !tw-bg-transparent"},{default:r(()=>[i("h4",U,v(e.$t("profile.title")),1),c(j,{class:"!tw-w-full",onSubmit:q(Q,["prevent"])},{default:r(()=>[a.value?(l(),s(x,{key:0},{default:r(()=>[i("div",A,v(E(d)("profile.successMessage")),1)]),_:1})):o("",!0),a.value?o("",!0):(l(),s(x,{key:1,class:"tw-flex tw-flex-col tw-gap-4 tw-w-full !tw-p-0 tw-mb-4"},{default:r(()=>[c(_,{modelValue:p.value,"onUpdate:modelValue":t[0]||(t[0]=m=>p.value=m),label:e.$t("profile.name"),type:"text",dense:"","lazy-rules":"",rules:[k],class:"tw-w-full"},null,8,["modelValue","label","rules"]),c(_,{modelValue:f.value,"onUpdate:modelValue":t[1]||(t[1]=m=>f.value=m),label:e.$t("profile.email"),type:"email",dense:"","lazy-rules":"",rules:[k,V],class:"tw-w-full"},null,8,["modelValue","label","rules"])]),_:1})),u.value?(l(),N("div",F,v(u.value),1)):o("",!0),i("div",I,[a.value?o("",!0):(l(),s(y,{key:0,type:"submit",label:e.$t("profile.update"),class:"!tw-w-full !tw-py-2.5"},null,8,["label"])),a.value?o("",!0):(l(),s(y,{key:1,secondary:"",label:e.$t("profile.cancel"),class:"!tw-w-full !tw-py-2.5",onClick:g},null,8,["label"])),a.value?(l(),s(y,{key:2,secondary:"",label:e.$t("profile.goBack"),class:"!tw-w-full !tw-py-2.5",onClick:g},null,8,["label"])):o("",!0)])]),_:1})]),_:1})])]),_:1}))}});export{K as default};
