import{S as L,aB as O,X as R,V as W,W as G,Y as H,r as l,l as d,e as J,av as K,Z as x,_ as ee,$ as r,aw as te,a0 as o,a6 as u,a1 as s,ac as ae,a3 as oe,ag as se,a8 as b,ab as $,af as le,ah as y,a4 as ie,aC as Q,aa as ne,a2 as S,aD as ce,aE as re,ay as ue}from"./index-BZtjxFBv.js";import{Q as B}from"./QImg-CfIAj73S.js";import{Q as de}from"./QPage-BZyitJOr.js";const me={class:"q-m-sm q-"},ve={class:"col-12 col-md-6 col-xl-8 q-py-md tw-transition tw-duration-200 tw-ease-in-out hover:tw-scale-105"},pe={class:"col-12 col-md-6 col-xl-4 q-pa-md",style:{display:"flex","flex-direction":"column","flex-grow":"1",height:"auto","min-height":"100%"}},fe={class:"text-caption q-mt-sm"},ge={class:"q-mt-sm text-bold price-text"},he={class:"text-grey"},we={class:"text-positive q-ml-sm"},xe={class:"row justify-center q-mt-xl"},ye={class:"row justify-between items-center q-mb-md"},_e={class:"text-caption"},Qe=L({__name:"SingleProductPage",setup(ke){const{getVerticalScrollPosition:I}=ue,V=O(),T=R(),c=W(),f=G(),{t:M}=H(),t=l({id:0,title:"",name:"",price:0,quantity:0,description:"",category:"",image:"",rating:{rate:0,count:0}}),z=l(!1),m=l(!1),g=l(""),i=l(!1),h=l(!1),_=l(0),k=l(0),v=l(0),p=l(0),q=d(()=>c.dark.isActive?"white":"black"),C=d(()=>c.dark.isActive?"black":"white"),qe=d(()=>f.totalItems),Ce=d(()=>f.totalPrice),X=d(()=>({"--translate-x":`${v.value}px`,"--translate-y":`${p.value}px`})),w=e=>`$${e.toFixed(2)}`,Y=()=>{window.scrollTo({top:0,behavior:"smooth"})},j=e=>{f.addItem({...e,quantity:1}),Y(),c.notify({color:"positive",message:M("singleProduct.itemAdded"),icon:"check_circle"})},A=e=>{g.value=e,m.value=!0,i.value=!1},D=()=>{i.value||(v.value=0,p.value=0),i.value=!i.value},E=e=>{i.value&&(h.value=!0,_.value=e.clientX-v.value,k.value=e.clientY-p.value)},N=e=>{!i.value||!h.value||(v.value=e.clientX-_.value,p.value=e.clientY-k.value)},F=()=>{i.value&&(h.value=!1)},U=()=>{T.push("/products")},Z=async()=>{const{slug:e}=V.params;c.loading.show();try{const a=await(await fetch(`https://fakestoreapi.com/products/${e}`)).json();t.value={id:a.id,name:a.title,title:a.title,price:a.price,description:a.description,image:a.image,category:a.category,discount:Math.random()>.5,discountedPrice:a.price*(Math.random()>.5?.9:1),quantity:0,rating:{rate:0,count:0}}}catch{c.notify({color:"negative",message:"Failed to fetch product details.",icon:"error"})}finally{c.loading.hide()}},P=()=>{const e=I(window);z.value=e>0};return J(()=>{Z(),window.addEventListener("scroll",P)}),K(()=>{window.removeEventListener("scroll",P)}),(e,n)=>(x(),ee(de,{padding:""},{default:r(()=>[te("",!0),o("h5",me,u(t.value.title),1),s(ae,{class:"q-my-md"}),s(S,{bordered:"",class:"q-mb-md q-mx-auto overflow-hidden",style:{"max-width":"1200px"}},{default:r(()=>[o("div",{class:Q(["row items-stretch full-height",{"col-reverse-md":ne(c).screen.md}])},[o("div",ve,[s(B,{src:t.value.image,alt:t.value.name,fit:"contain",class:"cursor-pointer full-width full-height",onClick:n[0]||(n[0]=a=>A(t.value.image))},null,8,["src","alt"])]),o("div",pe,[s(oe,{style:{flex:"1",display:"flex","flex-direction":"column",height:"100%"}},{default:r(()=>[o("div",fe,u(t.value.description),1)]),_:1}),s(se,{align:"right",class:"row justify-between items-end"},{default:r(()=>[o("div",ge,[t.value.discount?(x(),b($,{key:0},[o("s",he,u(w(t.value.price)),1),o("span",we,u(w(t.value.discountedPrice||t.value.price)),1)],64)):(x(),b($,{key:1},[le(u(w(t.value.price)),1)],64))]),s(y,{color:q.value,"text-color":C.value,label:e.$t("singleProduct.addToCart"),class:"q-px-md full-width",onClick:n[1]||(n[1]=ie(a=>j(t.value),["stop"]))},null,8,["color","text-color","label"])]),_:1})])],2)]),_:1}),o("div",xe,[s(y,{color:q.value,"text-color":C.value,label:e.$t("singleProduct.backToProducts"),onClick:U},null,8,["color","text-color","label"])]),s(re,{modelValue:m.value,"onUpdate:modelValue":n[3]||(n[3]=a=>m.value=a),maximized:""},{default:r(()=>[s(S,{class:"q-pa-md",style:{"max-width":"90vw","max-height":"90vh",overflow:"hidden"}},{default:r(()=>[o("div",ye,[o("div",_e,u(t.value.name),1),s(y,{flat:"",dense:"",round:"",icon:"close",onClick:n[2]||(n[2]=a=>m.value=!1)})]),s(B,{src:g.value,alt:g.value,class:Q(["zoomable-image tw-cursor-pointer",{"zoom-in":i.value,"zoom-out":!i.value}]),style:ce([{"max-width":"100%","max-height":"100%"},X.value]),fit:"contain",onClick:D,onMousedown:E,onMousemove:N,onMouseleave:F},null,8,["src","alt","class","style"])]),_:1})]),_:1},8,["modelValue"])]),_:1}))}});export{Qe as default};
