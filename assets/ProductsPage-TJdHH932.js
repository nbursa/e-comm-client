import{p as Pe,$ as lt,aC as ot,a0 as nt,c as f,x as p,aD as rt,S as N,aE as Fe,aF as it,aG as Ee,v as O,ad as de,A as ke,k as ve,d as re,o as V,a as ee,w as ne,ai as fe,h as G,t as te,e as B,Q as st,f as H,j as ut,F as se,g as we,ac as ct,ae as dt,l as vt,X as Se,Y as ye,aH as je,q as Ue,a7 as Ne,z as ft,R as mt,aI as gt,L as bt,y as me,a2 as ht,aJ as pe,P as Me,aK as wt,a1 as yt,a5 as pt,a6 as xt,aL as Ct,V as Pt,r as Te,aM as Ce,ak as Qe,n as kt,_ as St,al as Tt,am as qt,ab as $t,aN as Re,aO as Bt,ap as At,aP as Ot}from"./index-DLeYiH5k.js";import{Q as Vt}from"./QPage-B6i1-M1V.js";import{u as It}from"./products-Du4en622.js";import{Q as Lt}from"./QImg-BIMPfJgH.js";import{f as xe}from"./currency-GUrgkQJA.js";import{api as _e}from"./axios-Dp8qbhl-.js";import"./rates-BbpRdO67.js";function ce(e,C){return[!0,!1].includes(e)?e:C}const Ft=Pe({name:"QPagination",props:{...lt,modelValue:{type:Number,required:!0},min:{type:[Number,String],default:1},max:{type:[Number,String],required:!0},maxPages:{type:[Number,String],default:0,validator:e=>(typeof e=="string"?parseInt(e,10):e)>=0},inputStyle:[Array,String,Object],inputClass:[Array,String,Object],size:String,disable:Boolean,input:Boolean,iconPrev:String,iconNext:String,iconFirst:String,iconLast:String,toFn:Function,boundaryLinks:{type:Boolean,default:null},boundaryNumbers:{type:Boolean,default:null},directionLinks:{type:Boolean,default:null},ellipses:{type:Boolean,default:null},ripple:{type:[Boolean,Object],default:null},round:Boolean,rounded:Boolean,flat:Boolean,outline:Boolean,unelevated:Boolean,push:Boolean,glossy:Boolean,color:{type:String,default:"primary"},textColor:String,activeDesign:{type:String,default:"",values:e=>e===""||ot.includes(e)},activeColor:String,activeTextColor:String,gutter:String,padding:{type:String,default:"3px 2px"}},emits:["update:modelValue"],setup(e,{emit:C}){const{proxy:P}=ke(),{$q:i}=P,a=nt(e,i),o=f(()=>parseInt(e.min,10)),n=f(()=>parseInt(e.max,10)),s=f(()=>parseInt(e.maxPages,10)),u=f(()=>w.value+" / "+n.value),x=f(()=>ce(e.boundaryLinks,e.input)),k=f(()=>ce(e.boundaryNumbers,!e.input)),U=f(()=>ce(e.directionLinks,e.input)),c=f(()=>ce(e.ellipses,!e.input)),r=p(null),w=f({get:()=>e.modelValue,set:d=>{if(d=parseInt(d,10),e.disable||isNaN(d))return;const v=rt(d,o.value,n.value);e.modelValue!==v&&C("update:modelValue",v)}});N(()=>`${o.value}|${n.value}`,()=>{w.value=e.modelValue});const $=f(()=>"q-pagination row no-wrap items-center"+(e.disable===!0?" disabled":"")),Q=f(()=>e.gutter in Fe?`${Fe[e.gutter]}px`:e.gutter||null),z=f(()=>Q.value!==null?`--q-pagination-gutter-parent:-${Q.value};--q-pagination-gutter-child:${Q.value}`:null),I=f(()=>{const d=[e.iconFirst||i.iconSet.pagination.first,e.iconPrev||i.iconSet.pagination.prev,e.iconNext||i.iconSet.pagination.next,e.iconLast||i.iconSet.pagination.last];return i.lang.rtl===!0?d.reverse():d}),b=f(()=>({"aria-disabled":e.disable===!0?"true":"false",role:"navigation"})),A=f(()=>it(e,"flat")),E=f(()=>({[A.value]:!0,round:e.round,rounded:e.rounded,padding:e.padding,color:e.color,textColor:e.textColor,size:e.size,ripple:e.ripple!==null?e.ripple:!0})),_=f(()=>{const d={[A.value]:!1};return e.activeDesign!==""&&(d[e.activeDesign]=!0),d}),W=f(()=>({..._.value,color:e.activeColor||e.color,textColor:e.activeTextColor||e.textColor})),L=f(()=>{let d=Math.max(s.value,1+(c.value?2:0)+(k.value?2:0));const v={pgFrom:o.value,pgTo:n.value,ellipsesStart:!1,ellipsesEnd:!1,boundaryStart:!1,boundaryEnd:!1,marginalStyle:{minWidth:`${Math.max(2,String(n.value).length)}em`}};return s.value&&d<n.value-o.value+1&&(d=1+Math.floor(d/2)*2,v.pgFrom=Math.max(o.value,Math.min(n.value-d+1,e.modelValue-Math.floor(d/2))),v.pgTo=Math.min(n.value,v.pgFrom+d-1),k.value&&(v.boundaryStart=!0,v.pgFrom++),c.value&&v.pgFrom>o.value+(k.value?1:0)&&(v.ellipsesStart=!0,v.pgFrom++),k.value&&(v.boundaryEnd=!0,v.pgTo--),c.value&&v.pgTo<n.value-(k.value?1:0)&&(v.ellipsesEnd=!0,v.pgTo--)),v});function ae(d){w.value=d}function X(d){w.value=w.value+d}const g=f(()=>{function d(){w.value=r.value,r.value=null}return{"onUpdate:modelValue":v=>{r.value=v},onKeyup:v=>{Ee(v,13)===!0&&d()},onBlur:d}});function S(d,v,F){const D={"aria-label":v,"aria-current":"false",...E.value,...d};return F===!0&&Object.assign(D,{"aria-current":"true",...W.value}),v!==void 0&&(e.toFn!==void 0?D.to=e.toFn(v):D.onClick=()=>{ae(v)}),O(ve,D)}return Object.assign(P,{set:ae,setByOffset:X}),()=>{const d=[],v=[];let F;if(x.value===!0&&(d.push(S({key:"bls",disable:e.disable||e.modelValue<=o.value,icon:I.value[0]},o.value)),v.unshift(S({key:"ble",disable:e.disable||e.modelValue>=n.value,icon:I.value[3]},n.value))),U.value===!0&&(d.push(S({key:"bdp",disable:e.disable||e.modelValue<=o.value,icon:I.value[1]},e.modelValue-1)),v.unshift(S({key:"bdn",disable:e.disable||e.modelValue>=n.value,icon:I.value[2]},e.modelValue+1))),e.input!==!0){F=[];const{pgFrom:D,pgTo:K,marginalStyle:M}=L.value;if(L.value.boundaryStart===!0){const j=o.value===e.modelValue;d.push(S({key:"bns",style:M,disable:e.disable,label:o.value},o.value,j))}if(L.value.boundaryEnd===!0){const j=n.value===e.modelValue;v.unshift(S({key:"bne",style:M,disable:e.disable,label:n.value},n.value,j))}L.value.ellipsesStart===!0&&d.push(S({key:"bes",style:M,disable:e.disable,label:"…",ripple:!1},D-1)),L.value.ellipsesEnd===!0&&v.unshift(S({key:"bee",style:M,disable:e.disable,label:"…",ripple:!1},K+1));for(let j=D;j<=K;j++)F.push(S({key:`bpg${j}`,style:M,disable:e.disable,label:j},j,j===e.modelValue))}return O("div",{class:$.value,...b.value},[O("div",{class:"q-pagination__content row no-wrap items-center",style:z.value},[...d,e.input===!0?O(de,{class:"inline",style:{width:`${u.value.length/1.5}em`},type:"number",dense:!0,value:r.value,disable:e.disable,dark:a.value,borderless:!0,inputClass:e.inputClass,inputStyle:e.inputStyle,placeholder:u.value,min:o.value,max:n.value,...g.value}):O("div",{class:"q-pagination__middle row justify-center"},F),...v])])}}}),Mt={class:"text-bold"},Rt={class:"text-caption"},_t={class:"q-mt-sm text-bold price-text"},Dt={class:"text-grey"},Et={class:"text-positive q-ml-sm"},jt=re({__name:"ProductCard",props:{product:{type:Object,required:!0},color:{type:String,default:"primary"},text:{type:String,default:"white"}},emits:["add-to-cart","view-product"],setup(e,{emit:C}){const P="https://e-comm-api-8eba0f6c8782.herokuapp.com/api",i=e,a=C,o=p(null),n=p(null),s=c=>{a("add-to-cart",c)},u=c=>{a("view-product",c)},x=c=>`${P}${c}`,k=()=>{o.value&&n.value&&(n.value.style.height=`${o.value.clientHeight}px`)},U=c=>{const r=c.match(/[^.!?]*[.!?]/);return r?r[0]:c};return N(()=>i.product.image,()=>{k()}),(c,r)=>(V(),ee(vt,{bordered:"",class:"product tw-w-full tw-max-w-72 tw-mx-auto !tw-bg-primary sm:tw-mx-none tw-transition tw-duration-200 tw-ease-in-out hover:tw-cursor-pointer hover:tw-scale-105 tw-shadow-none",onClick:r[1]||(r[1]=w=>u(e.product))},{default:ne(()=>[e.product.image?(V(),ee(Lt,{key:0,ref_key:"imageSection",ref:o,src:x(e.product.image),alt:e.product.name,fit:"contain",class:"sm:tw-h-2/3 tw-w-full tw-max-h-1.5"},null,8,["src","alt"])):fe("",!0),e.product.image?fe("",!0):(V(),G("div",{key:1,ref_key:"noImageSection",ref:n,class:"tw-p-1.5 tw-flex tw-items-center tw-justify-center tw-min-h-64 tw-w-full tw-max-h-1.5"},te(c.$t("products.noImage")),513)),B(st,{class:"q-px-sm !tw-pb-0"},{default:ne(()=>[H("div",Mt,te(e.product.name||e.product.title),1),H("div",Rt,te(U(e.product.description)),1)]),_:1}),B(ut,{class:"row justify-between items-center !tw-pt-0"},{default:ne(()=>[H("div",_t,[e.product.discount?(V(),G(se,{key:0},[H("span",Dt,te(we(xe)(e.product.price)),1),H("span",Et,te(we(xe)(e.product.discountedPrice||e.product.price)),1)],64)):(V(),G(se,{key:1},[ct(te(we(xe)(e.product.price)),1)],64))]),B(ve,{color:e.color,"text-color":e.text,label:c.$t("products.addToCart"),class:"full-width q-mt-md !tw-py-4",onClick:r[0]||(r[0]=dt(w=>s(e.product),["stop"]))},null,8,["color","text-color","label"])]),_:1})]),_:1}))}});let Ut=0;const Nt=["click","keydown"],Qt={icon:String,label:[Number,String],alert:[Boolean,String],alertIcon:String,name:{type:[Number,String],default:()=>`t_${Ut++}`},noCaps:Boolean,tabindex:[String,Number],disable:Boolean,contentClass:String,ripple:{type:[Boolean,Object],default:!0}};function Kt(e,C,P,i){const a=Se(je,ye);if(a===ye)return console.error("QTab/QRouteTab component needs to be child of QTabs"),ye;const{proxy:o}=ke(),n=p(null),s=p(null),u=p(null),x=f(()=>e.disable===!0||e.ripple===!1?!1:Object.assign({keyCodes:[13,32],early:!0},e.ripple===!0?{}:e.ripple)),k=f(()=>a.currentModel.value===e.name),U=f(()=>"q-tab relative-position self-stretch flex flex-center text-center"+(k.value===!0?" q-tab--active"+(a.tabProps.value.activeClass?" "+a.tabProps.value.activeClass:"")+(a.tabProps.value.activeColor?` text-${a.tabProps.value.activeColor}`:"")+(a.tabProps.value.activeBgColor?` bg-${a.tabProps.value.activeBgColor}`:""):" q-tab--inactive")+(e.icon&&e.label&&a.tabProps.value.inlineLabel===!1?" q-tab--full":"")+(e.noCaps===!0||a.tabProps.value.noCaps===!0?" q-tab--no-caps":"")+(e.disable===!0?" disabled":" q-focusable q-hoverable cursor-pointer")),c=f(()=>"q-tab__content self-stretch flex-center relative-position q-anchor--skip non-selectable "+(a.tabProps.value.inlineLabel===!0?"row no-wrap q-tab__content--inline":"column")+(e.contentClass!==void 0?` ${e.contentClass}`:"")),r=f(()=>e.disable===!0||a.hasFocus.value===!0||k.value===!1&&a.hasActiveTab.value===!0?-1:e.tabindex||0);function w(b,A){if(A!==!0&&n.value!==null&&n.value.focus(),e.disable!==!0){a.updateModel({name:e.name}),P("click",b);return}}function $(b){Ee(b,[13,32])?w(b,!0):gt(b)!==!0&&b.keyCode>=35&&b.keyCode<=40&&b.altKey!==!0&&b.metaKey!==!0&&a.onKbdNavigate(b.keyCode,o.$el)===!0&&bt(b),P("keydown",b)}function Q(){const b=a.tabProps.value.narrowIndicator,A=[],E=O("div",{ref:u,class:["q-tab__indicator",a.tabProps.value.indicatorClass]});e.icon!==void 0&&A.push(O(me,{class:"q-tab__icon",name:e.icon})),e.label!==void 0&&A.push(O("div",{class:"q-tab__label"},e.label)),e.alert!==!1&&A.push(e.alertIcon!==void 0?O(me,{class:"q-tab__alert-icon",color:e.alert!==!0?e.alert:void 0,name:e.alertIcon}):O("div",{class:"q-tab__alert"+(e.alert!==!0?` text-${e.alert}`:"")})),b===!0&&A.push(E);const _=[O("div",{class:"q-focus-helper",tabindex:-1,ref:n}),O("div",{class:c.value},ht(C.default,A))];return b===!1&&_.push(E),_}const z={name:f(()=>e.name),rootRef:s,tabIndicatorRef:u,routeData:i};Ue(()=>{a.unregisterTab(z)}),Ne(()=>{a.registerTab(z)});function I(b,A){const E={ref:s,class:U.value,tabindex:r.value,role:"tab","aria-selected":k.value===!0?"true":"false","aria-disabled":e.disable===!0?"true":void 0,onClick:w,onKeydown:$,...A};return ft(O(b,E,Q()),[[mt,x.value]])}return{renderTab:I,$tabs:a}}const ge=Pe({name:"QTab",props:Qt,emits:Nt,setup(e,{slots:C,emit:P}){const{renderTab:i}=Kt(e,C,P);return()=>i("div")}});function Ht(e,C,P){const i=P===!0?["left","right"]:["top","bottom"];return`absolute-${C===!0?i[0]:i[1]}${e?` text-${e}`:""}`}const zt=["left","center","right","justify"],Ke=Pe({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:e=>zt.includes(e)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(e,{slots:C,emit:P}){const{proxy:i}=ke(),{$q:a}=i,{registerTick:o}=pe(),{registerTick:n}=pe(),{registerTick:s}=pe(),{registerTimeout:u,removeTimeout:x}=Me(),{registerTimeout:k,removeTimeout:U}=Me(),c=p(null),r=p(null),w=p(e.modelValue),$=p(!1),Q=p(!0),z=p(!1),I=p(!1),b=[],A=p(0),E=p(!1);let _=null,W=null,L;const ae=f(()=>({activeClass:e.activeClass,activeColor:e.activeColor,activeBgColor:e.activeBgColor,indicatorClass:Ht(e.indicatorColor,e.switchIndicator,e.vertical),narrowIndicator:e.narrowIndicator,inlineLabel:e.inlineLabel,noCaps:e.noCaps})),X=f(()=>{const t=A.value,l=w.value;for(let m=0;m<t;m++)if(b[m].name.value===l)return!0;return!1}),g=f(()=>`q-tabs__content--align-${$.value===!0?"left":I.value===!0?"justify":e.align}`),S=f(()=>`q-tabs row no-wrap items-center q-tabs--${$.value===!0?"":"not-"}scrollable q-tabs--${e.vertical===!0?"vertical":"horizontal"} q-tabs__arrows--${e.outsideArrows===!0?"outside":"inside"} q-tabs--mobile-with${e.mobileArrows===!0?"":"out"}-arrows`+(e.dense===!0?" q-tabs--dense":"")+(e.shrink===!0?" col-shrink":"")+(e.stretch===!0?" self-stretch":"")),d=f(()=>"q-tabs__content scroll--mobile row no-wrap items-center self-stretch hide-scrollbar relative-position "+g.value+(e.contentClass!==void 0?` ${e.contentClass}`:"")),v=f(()=>e.vertical===!0?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}),F=f(()=>e.vertical!==!0&&a.lang.rtl===!0),D=f(()=>wt===!1&&F.value===!0);N(F,oe),N(()=>e.modelValue,t=>{K({name:t,setCurrent:!0,skipEmit:!0})}),N(()=>e.outsideArrows,M);function K({name:t,setCurrent:l,skipEmit:m}){w.value!==t&&(m!==!0&&e["onUpdate:modelValue"]!==void 0&&P("update:modelValue",t),(l===!0||e["onUpdate:modelValue"]===void 0)&&(He(w.value,t),w.value=t))}function M(){o(()=>{c.value&&j({width:c.value.offsetWidth,height:c.value.offsetHeight})})}function j(t){if(v.value===void 0||r.value===null)return;const l=t[v.value.container],m=Math.min(r.value[v.value.scroll],Array.prototype.reduce.call(r.value.children,(q,y)=>q+(y[v.value.content]||0),0)),T=l>0&&m>l;$.value=T,T===!0&&n(oe),I.value=l<parseInt(e.breakpoint,10)}function He(t,l){const m=t!=null&&t!==""?b.find(q=>q.name.value===t):null,T=l!=null&&l!==""?b.find(q=>q.name.value===l):null;if(ue===!0)ue=!1;else if(m&&T){const q=m.tabIndicatorRef.value,y=T.tabIndicatorRef.value;_!==null&&(clearTimeout(_),_=null),q.style.transition="none",q.style.transform="none",y.style.transition="none",y.style.transform="none";const h=q.getBoundingClientRect(),R=y.getBoundingClientRect();y.style.transform=e.vertical===!0?`translate3d(0,${h.top-R.top}px,0) scale3d(1,${R.height?h.height/R.height:1},1)`:`translate3d(${h.left-R.left}px,0,0) scale3d(${R.width?h.width/R.width:1},1,1)`,s(()=>{_=setTimeout(()=>{_=null,y.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",y.style.transform="none"},70)})}T&&$.value===!0&&le(T.rootRef.value)}function le(t){const{left:l,width:m,top:T,height:q}=r.value.getBoundingClientRect(),y=t.getBoundingClientRect();let h=e.vertical===!0?y.top-T:y.left-l;if(h<0){r.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.floor(h),oe();return}h+=e.vertical===!0?y.height-q:y.width-m,h>0&&(r.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.ceil(h),oe())}function oe(){const t=r.value;if(t===null)return;const l=t.getBoundingClientRect(),m=e.vertical===!0?t.scrollTop:Math.abs(t.scrollLeft);F.value===!0?(Q.value=Math.ceil(m+l.width)<t.scrollWidth-1,z.value=m>0):(Q.value=m>0,z.value=e.vertical===!0?Math.ceil(m+l.height)<t.scrollHeight:Math.ceil(m+l.width)<t.scrollWidth)}function qe(t){W!==null&&clearInterval(W),W=setInterval(()=>{Ge(t)===!0&&J()},5)}function $e(){qe(D.value===!0?Number.MAX_SAFE_INTEGER:0)}function Be(){qe(D.value===!0?0:Number.MAX_SAFE_INTEGER)}function J(){W!==null&&(clearInterval(W),W=null)}function ze(t,l){const m=Array.prototype.filter.call(r.value.children,R=>R===l||R.matches&&R.matches(".q-tab.q-focusable")===!0),T=m.length;if(T===0)return;if(t===36)return le(m[0]),m[0].focus(),!0;if(t===35)return le(m[T-1]),m[T-1].focus(),!0;const q=t===(e.vertical===!0?38:37),y=t===(e.vertical===!0?40:39),h=q===!0?-1:y===!0?1:void 0;if(h!==void 0){const R=F.value===!0?-1:1,Y=m.indexOf(l)+h*R;return Y>=0&&Y<T&&(le(m[Y]),m[Y].focus({preventScroll:!0})),!0}}const We=f(()=>D.value===!0?{get:t=>Math.abs(t.scrollLeft),set:(t,l)=>{t.scrollLeft=-l}}:e.vertical===!0?{get:t=>t.scrollTop,set:(t,l)=>{t.scrollTop=l}}:{get:t=>t.scrollLeft,set:(t,l)=>{t.scrollLeft=l}});function Ge(t){const l=r.value,{get:m,set:T}=We.value;let q=!1,y=m(l);const h=t<y?-1:1;return y+=h*5,y<0?(q=!0,y=0):(h===-1&&y<=t||h===1&&y>=t)&&(q=!0,y=t),T(l,y),oe(),q}function Ae(t,l){for(const m in t)if(t[m]!==l[m])return!1;return!0}function Ye(){let t=null,l={matchedLen:0,queryDiff:9999,hrefLen:0};const m=b.filter(h=>h.routeData!==void 0&&h.routeData.hasRouterLink.value===!0),{hash:T,query:q}=i.$route,y=Object.keys(q).length;for(const h of m){const R=h.routeData.exact.value===!0;if(h.routeData[R===!0?"linkIsExactActive":"linkIsActive"].value!==!0)continue;const{hash:Y,query:be,matched:tt,href:at}=h.routeData.resolvedLink.value,he=Object.keys(be).length;if(R===!0){if(Y!==T||he!==y||Ae(q,be)===!1)continue;t=h.name.value;break}if(Y!==""&&Y!==T||he!==0&&Ae(be,q)===!1)continue;const Z={matchedLen:tt.length,queryDiff:y-he,hrefLen:at.length-Y.length};if(Z.matchedLen>l.matchedLen){t=h.name.value,l=Z;continue}else if(Z.matchedLen!==l.matchedLen)continue;if(Z.queryDiff<l.queryDiff)t=h.name.value,l=Z;else if(Z.queryDiff!==l.queryDiff)continue;Z.hrefLen>l.hrefLen&&(t=h.name.value,l=Z)}if(t===null&&b.some(h=>h.routeData===void 0&&h.name.value===w.value)===!0){ue=!1;return}K({name:t,setCurrent:!0})}function Xe(t){if(x(),E.value!==!0&&c.value!==null&&t.target&&typeof t.target.closest=="function"){const l=t.target.closest(".q-tab");l&&c.value.contains(l)===!0&&(E.value=!0,$.value===!0&&le(l))}}function Je(){u(()=>{E.value=!1},30)}function ie(){Ve.avoidRouteWatcher===!1?k(Ye):U()}function Oe(){if(L===void 0){const t=N(()=>i.$route.fullPath,ie);L=()=>{t(),L=void 0}}}function Ze(t){b.push(t),A.value++,M(),t.routeData===void 0||i.$route===void 0?k(()=>{if($.value===!0){const l=w.value,m=l!=null&&l!==""?b.find(T=>T.name.value===l):null;m&&le(m.rootRef.value)}}):(Oe(),t.routeData.hasRouterLink.value===!0&&ie())}function et(t){b.splice(b.indexOf(t),1),A.value--,M(),L!==void 0&&t.routeData!==void 0&&(b.every(l=>l.routeData===void 0)===!0&&L(),ie())}const Ve={currentModel:w,tabProps:ae,hasFocus:E,hasActiveTab:X,registerTab:Ze,unregisterTab:et,verifyRouteModel:ie,updateModel:K,onKbdNavigate:ze,avoidRouteWatcher:!1};yt(je,Ve);function Ie(){_!==null&&clearTimeout(_),J(),L!==void 0&&L()}let Le,ue;return Ue(Ie),pt(()=>{Le=L!==void 0,Ie()}),xt(()=>{Le===!0&&(Oe(),ue=!0,ie()),M()}),()=>O("div",{ref:c,class:S.value,role:"tablist",onFocusin:Xe,onFocusout:Je},[O(Ct,{onResize:j}),O("div",{ref:r,class:d.value,onScroll:oe},Pt(C.default)),O(me,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+(Q.value===!0?"":" q-tabs__arrow--faded"),name:e.leftIcon||a.iconSet.tabs[e.vertical===!0?"up":"left"],onMousedownPassive:$e,onTouchstartPassive:$e,onMouseupPassive:J,onMouseleavePassive:J,onTouchendPassive:J}),O(me,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+(z.value===!0?"":" q-tabs__arrow--faded"),name:e.rightIcon||a.iconSet.tabs[e.vertical===!0?"down":"right"],onMousedownPassive:Be,onTouchstartPassive:Be,onMouseupPassive:J,onMouseleavePassive:J,onTouchendPassive:J})])}}),Wt=re({__name:"CategorySelect",props:{selectedCategory:{type:String,required:!0},categories:{type:Array,required:!0},color:{type:String,required:!0},text:{type:String,required:!0}},emits:["update:selectedCategory"],setup(e,{emit:C}){const P=e,i=C,a=f({get:()=>P.selectedCategory,set:n=>{i("update:selectedCategory",n)}}),o=n=>n?n.split(" ").map(s=>s.charAt(0).toUpperCase()+s.slice(1)).join(" "):"";return(n,s)=>(V(),G("div",null,[B(Ke,{modelValue:a.value,"onUpdate:modelValue":s[0]||(s[0]=u=>a.value=u),class:"q-mb-md gt-sm","active-color":e.color,"active-bg-color":e.color,"text-color":e.color,"inactive-color":e.color,align:"justify"},{default:ne(()=>[B(ge,{name:"all",label:n.$t("products.categories.allProducts")},null,8,["label"]),(V(!0),G(se,null,Te(e.categories,u=>(V(),ee(ge,{key:u,name:u,label:o(u)},null,8,["name","label"]))),128))]),_:1},8,["modelValue","active-color","active-bg-color","text-color","inactive-color"]),B(Ce,{modelValue:a.value,"onUpdate:modelValue":s[1]||(s[1]=u=>a.value=u),options:["all",...e.categories],class:"q-my-md lt-md",color:e.color,"text-color":e.text,label:n.$t("products.selectCategory"),outlined:"","option-label":u=>u==="all"?n.$t("products.categories.allProducts"):o(u)},null,8,["modelValue","options","color","text-color","label","option-label"])]))}}),Gt={class:"tw-flex tw-flex-col tw-gap-3 tw-mx-auto md:!tw-flex-row tw-rounded md:tw-px-1 md:tw-max-w-screen-2xl"},Yt={class:"tw-grid tw-grid-cols-1 sm:tw-grid-cols-2 md:tw-grid-cols-4 tw-gap-3 md:tw-flex md:tw-flex-grow md:tw-flex-row lg:tw-gap-4"},Xt=re({__name:"FiltersForm",props:{filters:{type:Object,required:!0},sortOptions:{type:Array,required:!0},sortOrderOptions:{type:Array,required:!0}},emits:["update:filters"],setup(e,{emit:C}){const P=e,i=C,a=p({...P.filters}),o=()=>{i("update:filters",a.value)};return N(a,o,{deep:!0}),(n,s)=>(V(),G("div",Gt,[B(de,{modelValue:a.value.search,"onUpdate:modelValue":s[0]||(s[0]=u=>a.value.search=u),placeholder:"Search products",label:"Search",clearable:"",dense:"",class:"tw-w-full md:tw-max-w-md tw-mb-3 sm:tw-mr-3",onInput:o},null,8,["modelValue"]),H("div",Yt,[B(de,{modelValue:a.value.minPrice,"onUpdate:modelValue":s[1]||(s[1]=u=>a.value.minPrice=u),modelModifiers:{number:!0},type:"number",label:"Min Price",placeholder:"Min Price",clearable:"",dense:"",class:"tw-w-full md:tw-w-1/4 md:tw-min-w-20 lg:tw-flex-1",onInput:o},null,8,["modelValue"]),B(de,{modelValue:a.value.maxPrice,"onUpdate:modelValue":s[2]||(s[2]=u=>a.value.maxPrice=u),modelModifiers:{number:!0},type:"number",label:"Max Price",placeholder:"Max Price",clearable:"",dense:"",class:"tw-w-full md:tw-w-1/4 md:tw-min-w-20 lg:tw-flex-1",onInput:o},null,8,["modelValue"]),B(Ce,{modelValue:a.value.sortBy,"onUpdate:modelValue":s[3]||(s[3]=u=>a.value.sortBy=u),options:e.sortOptions,label:"Sort By",dense:"",class:"tw-w-full md:tw-w-1/4 md:tw-min-w-20 lg:tw-flex-1",onInput:o},null,8,["modelValue","options"]),B(Ce,{modelValue:a.value.sortOrder,"onUpdate:modelValue":s[4]||(s[4]=u=>a.value.sortOrder=u),options:e.sortOrderOptions,label:"Sort Order",dense:"",class:"tw-w-full md:tw-w-1/4 md:tw-min-w-20 lg:tw-flex-1",onInput:o},null,8,["modelValue","options"])])]))}}),Jt={class:"tw-container !tw-shadow-none tw-mx-0 sm:tw-mx-auto tw-pb-4 md:tw-pb-0 !tw-mt-1"},Zt=re({__name:"ProductFilters",props:{initialFilters:{type:Object,required:!0},sortOptions:{type:Array,required:!0},sortOrderOptions:{type:Array,required:!0}},emits:["update:filters"],setup(e,{emit:C}){const P=e,i=C,a=p({...P.initialFilters}),o=()=>{i("update:filters",{...a.value,sortBy:a.value.sortBy.value||a.value.sortBy,sortOrder:a.value.sortOrder.value||a.value.sortOrder})},n=s=>{a.value=s};return N(a,o,{deep:!0}),(s,u)=>(V(),G("div",Jt,[B(Xt,{filters:a.value,"sort-options":e.sortOptions,"sort-order-options":e.sortOrderOptions,"onUpdate:filters":n},null,8,["filters","sort-options","sort-order-options"])]))}}),ea={class:"gt-sm tw-w-full tw-flex tw-items-center tw-flex-grow tw-gap-3 tw-py-2 tw-px-1 !tw-max-w-screen-2xl tw-mx-auto !tw-text-[13px]"},ta={class:"q-my-md lt-md tw-flex tw-items-center tw-justify-between tw-px-0"},aa=re({__name:"ProductTabs",props:{selectedCategory:{type:String,required:!0},scrollOffset:{type:Number,default:0},categories:{type:Array,required:!0},filters:{type:Object,required:!0},sortOptions:{type:Array,required:!0},sortOrderOptions:{type:Array,required:!0}},emits:["update:selectedCategory","update:filters"],setup(e,{emit:C}){const P=Se("scrollToTop"),i=e,a=C,o=Qe(),n=p(!1),s=p(i.selectedCategory),u=p(!1),x=f(()=>({stickyBgColor:o.dark.isActive?"q-dark":"q-light-lighter",activeBgColor:(o.dark.isActive,"white"),activeTextColor:o.dark.isActive?"dark":"black",backgroundColor:o.dark.isActive?"white":"black",textColor:o.dark.isActive?"black":"white"})),k=()=>{u.value=!u.value};N(()=>i.scrollOffset,r=>{n.value=r>0},{immediate:!0}),N(()=>i.selectedCategory,r=>{r!==s.value&&(s.value=r)}),N(()=>s.value,r=>{a("update:selectedCategory",r),P()});const U=r=>{a("update:filters",r)},c=r=>r.split(" ").map(w=>w.charAt(0).toUpperCase()+w.slice(1)).join(" ");return(r,w)=>(V(),G("div",{class:kt(["sticky",{"is-sticky":n.value},n.value&&`tw-bg-${x.value.stickyBgColor}`])},[H("div",ea,[B(Ke,{modelValue:s.value,"onUpdate:modelValue":w[0]||(w[0]=$=>s.value=$),"indicator-color":"transparent",class:"tw-w-full","active-color":x.value.activeTextColor,"active-bg-color":x.value.activeBgColor,"text-color":x.value.backgroundColor,"inactive-color":x.value.textColor,align:"justify"},{default:ne(()=>[B(ge,{name:"all",label:r.$t("products.categories.allProducts")},null,8,["label"]),(V(!0),G(se,null,Te(e.categories,$=>(V(),ee(ge,{key:$,name:$,label:c($),class:"!tw-text-[13px]"},null,8,["name","label"]))),128))]),_:1},8,["modelValue","active-color","active-bg-color","text-color","inactive-color"]),B(ve,{"text-color":x.value.activeTextColor,color:x.value.activeBgColor,icon:"tune",onClick:k},null,8,["text-color","color"])]),H("div",ta,[B(Wt,{"selected-category":s.value,"onUpdate:selectedCategory":w[1]||(w[1]=$=>s.value=$),categories:e.categories,color:x.value.backgroundColor,text:x.value.textColor,class:"tw-w-full tw-mr-3"},null,8,["selected-category","categories","color","text"]),B(ve,{"text-color":x.value.activeTextColor,color:x.value.activeBgColor,icon:"tune",class:"!tw-py-3",onClick:k},null,8,["text-color","color"])]),u.value?(V(),ee(Zt,{key:0,class:"tw-mt-3","initial-filters":e.filters,"sort-options":e.sortOptions,"sort-order-options":e.sortOrderOptions,"onUpdate:filters":U},null,8,["initial-filters","sort-options","sort-order-options"])):fe("",!0)],2))}}),la=St(aa,[["__scopeId","data-v-43e6112f"]]),oa={class:"tw-text-3xl tw-font-serif tw-mx-auto tw-my-4 2xl:tw-text-center 2xl:tw-mt-0"},na={class:"tw-container tw-mx-auto tw-mb-8 tw-mt-4 grid justify-center"},ra={class:"tw-grid tw-grid-cols-1 md:tw-grid-cols-2 lg:tw-grid-cols-3 xl:tw-grid-cols-4 tw-gap-4"},ia="products_categories",De=10,ga=re({__name:"ProductsPage",props:{scrollOffset:{type:Number,required:!0}},setup(e){const C=Se("scrollToTop"),P=Tt(),i=Qe(),a=qt(),o=It(),{t:n}=$t(),s=p([]),u=p(1),x=p("all"),k=p([]),U=p(!0),c=p({search:"",minPrice:null,maxPrice:null,sortBy:"id",sortOrder:"asc"}),r=p({total:0,page:1,limit:10,lastPage:1}),w=[{label:"ID",value:"id"},{label:"Name",value:"name"},{label:"Price",value:"price"}],$=[{label:"Ascending",value:"asc"},{label:"Descending",value:"desc"}],Q=f(()=>Math.ceil(r.value.total/r.value.limit)),z=f(()=>s.value),I=f(()=>({activeTextColor:i.dark.isActive?"dark":"black",backgroundColor:i.dark.isActive?"white":"black",textColor:i.dark.isActive?"black":"white",paginationColor:i.dark.isActive?"light":"dark",paginationTextColor:i.dark.isActive?"white":"black",paginationActiveColor:i.dark.isActive?"white":"dark",paginationActiveTextColor:i.dark.isActive?"black":"white"}));N(c,()=>{u.value=1,X(x.value)},{deep:!0});const b=g=>{P.addItem({...g,quantity:1}),i.notify({color:"positive",position:"top",timeout:1e3,message:n("products.itemAdded"),icon:"check_circle"})},A=g=>{a.push(`${Re}/${g.id}`)},E=g=>{u.value=g,C(),X(x.value)},_=async g=>{x.value=g,u.value=1,await X(g)},W=g=>{c.value=g},L=async()=>{try{if(U.value=!0,o.isCacheValid(ia)){const S=o.getCategoryCache();if(S){k.value=S.categories;return}}const g=await _e.get(`https://e-comm-api-8eba0f6c8782.herokuapp.com/api${Ot}`);if(g.status!==200)throw new Error("Failed to fetch categories");k.value=g.data,o.setCategoryCache(k.value)}catch(g){console.error("Error fetching categories:",g)}finally{U.value=!1}},ae=g=>`products_${g.category}_${g.page}_${g.limit}_${g.search}_${g.minPrice}_${g.maxPrice}_${g.sortBy}_${g.sortOrder}`,X=async(g="all")=>{i.loading.show();try{const S={category:g,page:u.value,limit:De,search:c.value.search,minPrice:c.value.minPrice,maxPrice:c.value.maxPrice,sortBy:c.value.sortBy,sortOrder:c.value.sortOrder},d=ae(S),v=o.getCache(d);if(v?.meta&&v?.data){console.log("Using cached products"),s.value=v.data,r.value=v.meta,i.loading.hide();return}const F=new URLSearchParams({page:u.value.toString(),limit:De.toString(),search:c.value.search,sortBy:c.value.sortBy,sortOrder:c.value.sortOrder});c.value.minPrice!==null&&F.append("minPrice",c.value.minPrice.toString()),c.value.maxPrice!==null&&F.append("maxPrice",c.value.maxPrice.toString());const D=`https://e-comm-api-8eba0f6c8782.herokuapp.com/api${Re}${g!=="all"?`${Bt}/${g}`:""}?${F}`;console.log("Fetching products from URL:",D),console.log("Fetching products with params:",S,F);const K=await _e.get(D);if(K.status!==200)throw new Error("Failed to fetch products");if(K&&K.data){const M=K.data;console.log("Fetched products:",M),s.value=M.data,r.value=M.meta,o.setCache(M,d)}}catch(S){console.error("Error fetching products:",S),i.notify({color:"negative",message:n("errors.fetchProducts"),timeout:1e3,icon:"error",position:"top"})}finally{i.loading.hide()}};return Ne(async()=>{await Promise.all([L(),X()])}),(g,S)=>(V(),ee(Vt,{padding:"",class:"!tw-pb-16 !tw-pt-4 !tw-px-3"},{default:ne(()=>[H("h4",oa,te(g.$t("products.title")),1),B(la,{"selected-category":x.value,categories:k.value,"scroll-offset":e.scrollOffset,filters:c.value,"sort-options":w,"sort-order-options":$,"onUpdate:selectedCategory":_,"onUpdate:filters":W},null,8,["selected-category","categories","scroll-offset","filters"]),B(At),H("div",na,[H("div",ra,[(V(!0),G(se,null,Te(z.value,d=>(V(),ee(jt,{key:d.id,product:d,color:I.value.backgroundColor,text:I.value.textColor,onAddToCart:b,onViewProduct:A},null,8,["product","color","text"]))),128))])]),r.value.total>0?(V(),ee(Ft,{key:0,modelValue:u.value,"onUpdate:modelValue":[S[0]||(S[0]=d=>u.value=d),E],max:Q.value,"boundary-numbers":"",class:"tw-py-8 tw-flex tw-justify-center tw-items-center !tw-gap-8",color:I.value.paginationColor,"text-color":I.value.paginationTextColor,"active-color":I.value.paginationActiveColor,"active-text-color":I.value.paginationActiveTextColor},null,8,["modelValue","max","color","text-color","active-color","active-text-color"])):fe("",!0)]),_:1}))}});export{ga as default};
