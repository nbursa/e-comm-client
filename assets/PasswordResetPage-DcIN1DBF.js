import{d as R,c as Q,e as B,f as C,r as p,h as V,j as s,k as l,w as u,l as w,m,t as f,n as c,p as q,q as _,v as o,x as M,z as P,A as j,aB as E}from"./index-C0JJa2YO.js";import{Q as N}from"./QForm-CKSKV2hQ.js";import{Q as S}from"./QPage-BAchSC7v.js";const z={class:"tw-w-full sm:tw-max-w-72 tw-mx-auto"},I={class:"tw-text-3xl tw-text-center tw-mb-8 tw-font-semibold tw-font-serif"},$={class:"tw-w-full tw-flex tw-justify-center tw-items-center"},A={key:2,class:"tw-text-red-500 tw-mb-4"},D={class:"tw-flex tw-flex-col tw-gap-2"},J=R({__name:"PasswordResetPage",setup(F){const v=Q(),{t:e}=B(),x=C(),i=p(""),r=p(null),a=p(!1),y=()=>{x.back()},b=async()=>{r.value=null;try{const t=await E.post("/auth/reset-password",{email:i.value});v.notify({type:"positive",message:t.data.message,position:"top",timeout:5e3,icon:"check"}),i.value="",a.value=!0}catch(t){const n=t;r.value=n.response?.data?.error||e("passwordReset.errorMessage"),v.notify({type:"negative",message:r.value,position:"top",timeout:5e3,icon:"error"})}},g=t=>!!t||e("errors.validation.required"),k=t=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)?!0:e("errors.validation.invalidEmail");return(t,n)=>{const d=V("QButton");return s(),l(S,{padding:"",class:"!tw-pb-16 !tw-px-3 tw-flex tw-justify-center tw-items-center"},{default:u(()=>[w("div",z,[m(j,{flat:"",bordered:"",class:"!tw-w-full !tw-max-w-54 tw-p-4 !tw-bg-transparent"},{default:u(()=>[w("h4",I,f(c(e)("passwordReset.title")),1),m(N,{class:"!tw-w-full",onSubmit:q(b,["prevent"])},{default:u(()=>[a.value?(s(),l(_,{key:0},{default:u(()=>[w("div",$,f(c(e)("passwordReset.successMessage")),1)]),_:1})):o("",!0),a.value?o("",!0):(s(),l(_,{key:1,class:"tw-flex tw-flex-col tw-gap-4 tw-w-full !tw-p-0 tw-mb-4"},{default:u(()=>[m(M,{modelValue:i.value,"onUpdate:modelValue":n[0]||(n[0]=h=>i.value=h),label:c(e)("passwordReset.email"),type:"email",dense:"","lazy-rules":"",rules:[g,k],class:"tw-w-full"},null,8,["modelValue","label","rules"])]),_:1})),r.value?(s(),P("div",A,f(r.value),1)):o("",!0),w("div",D,[a.value?o("",!0):(s(),l(d,{key:0,type:"submit",label:c(e)("passwordReset.reset"),class:"!tw-w-full !tw-py-2.5"},null,8,["label"])),a.value?o("",!0):(s(),l(d,{key:1,secondary:"",label:c(e)("passwordReset.cancel"),class:"!tw-w-full !tw-py-2.5",onClick:y},null,8,["label"])),a.value?(s(),l(d,{key:2,secondary:"",label:"t('common.goback')",class:"!tw-w-full !tw-py-2.5",onClick:y})):o("",!0)])]),_:1})]),_:1})])]),_:1})}}});export{J as default};
