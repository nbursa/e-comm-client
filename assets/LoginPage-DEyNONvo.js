import{at as R,d as S,a as H,e as T,c as q,f as I,r,A as M,j as l,k as n,w as u,l as c,m as w,n as B,p as N,q as k,v as i,x as C,y as j,z as F,t as O,Q as x,au as z,av as D,aw as U}from"./index-Cw1-6oTs.js";import{Q as $}from"./QForm-SEfvORme.js";import{Q as G}from"./QPage-crSimVfK.js";const{Axios:se,AxiosError:J,CanceledError:ae,isCancel:le,CancelToken:oe,VERSION:re,all:ne,Cancel:ue,isAxiosError:ie,spread:de,toFormData:ce,AxiosHeaders:we,HttpStatusCode:me,formToJSON:pe,getAdapter:fe,mergeConfig:ve}=R,K={class:"tw-w-full sm:tw-max-w-72 tw-mx-auto"},W={key:2,class:"tw-text-red-500 tw-mb-4"},X={class:"tw-flex tw-flex-col tw-gap-2"},ge=S({__name:"LoginPage",setup(Y){const E=H(),{t:p}=T(),f=q(),v=I(),s=r(""),a=r(""),o=r(!1),_=r(""),m=r(!1),d=r(null),h=M(()=>s.value&&b(s.value)===!0&&a.value&&g(a.value)===!0),A=()=>{v.push(z)},P=()=>{v.push(D)},Q=()=>{m.value=!m.value},V=async()=>{if(d.value=null,!s.value||!a.value){f.notify({type:"negative",message:"Email and password are required.",position:"top",timeout:5e3,icon:"error"}),d.value="Email and password are required.";return}try{const t=await E.login(s.value,a.value);t&&(f.notify({type:"positive",message:t,position:"top",timeout:5e3,icon:"check"}),s.value="",a.value="",_.value=t,o.value=!0,await v.push(U))}catch(t){let e="Failed to login. Please try again.";t instanceof J?e=t.response?.data?.error||t.message||e:t instanceof Error&&(e=t.message||e),d.value=e,f.notify({type:"negative",message:e,position:"top",timeout:5e3,icon:"error"})}},g=t=>!!t||p("errors.validation.required"),b=t=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)?!0:p("errors.validation.invalidEmail"),L=t=>t.length<6?p("errors.validation.passwordMinLength",{minLength:6}):!0;return(t,e)=>(l(),n(G,{padding:"",class:"!tw-pb-16 !tw-px-3 tw-flex tw-justify-center tw-items-center"},{default:u(()=>[c("div",K,[w(B,{flat:"",bordered:"",class:"!tw-w-full !tw-max-w-54 tw-p-4 !tw-bg-transparent"},{default:u(()=>[e[4]||(e[4]=c("h4",{class:"tw-text-3xl tw-text-center tw-mb-8 tw-font-semibold tw-font-serif"},"Login",-1)),w($,{class:"!tw-w-full",onSubmit:N(V,["prevent"])},{default:u(()=>[o.value?(l(),n(k,{key:0},{default:u(()=>e[2]||(e[2]=[c("div",{class:"tw-w-full tw-flex tw-justify-center tw-items-center"}," Successfully Logged in! ",-1)])),_:1})):i("",!0),o.value?i("",!0):(l(),n(k,{key:1,class:"tw-flex tw-flex-col tw-gap-4 tw-w-full !tw-p-0 tw-mb-4"},{default:u(()=>[w(C,{modelValue:s.value,"onUpdate:modelValue":e[0]||(e[0]=y=>s.value=y),label:"Email",type:"email",dense:"","lazy-rules":"",rules:[g,b],class:"tw-w-full"},null,8,["modelValue","rules"]),w(C,{modelValue:a.value,"onUpdate:modelValue":e[1]||(e[1]=y=>a.value=y),type:m.value?"text":"password",label:"Password",dense:"","lazy-rules":"",rules:[g,L],class:"tw-w-full"},{append:u(()=>[w(j,{name:m.value?"visibility_off":"visibility",onClick:Q},null,8,["name"])]),_:1},8,["modelValue","type","rules"])]),_:1})),d.value?(l(),F("div",W,O(d.value),1)):i("",!0),c("div",X,[o.value?i("",!0):(l(),n(x,{key:0,type:"submit",disabled:!h.value,label:"Login",class:"!tw-w-full !tw-py-2.5"},null,8,["disabled"])),e[3]||(e[3]=c("div",{class:"tw-flex tw-items-center tw-justify-center"},"or",-1)),o.value?i("",!0):(l(),n(x,{key:1,secondary:"",label:"Create Account",class:"!tw-w-full !tw-py-2.5",onClick:P})),o.value?(l(),n(x,{key:2,secondary:"",label:"Home Page",class:"!tw-w-full !tw-py-2.5",onClick:A})):i("",!0)])]),_:1})]),_:1})])]),_:1}))}});export{ge as default};
