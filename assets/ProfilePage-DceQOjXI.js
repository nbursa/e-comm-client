import{u as N,d as R,a as V,f as j,aZ as F,A as x,j as o,k as f,w as t,m as e,D as W,l as h,p as b,af as k,ag as i,am as y,aq as n,ai as u,t as c,Q as S,y as w,C as I,F as O,z as q,au as z,a_ as G,a$ as M,B as C,aW as Z,b0 as J}from"./index-eqiBq1KU.js";import{Q as K}from"./QImg-CJlebftv.js";import{Q as X}from"./QPage-Cf_ORzAX.js";import{u as Y}from"./products-DwJqgWrx.js";import{f as U}from"./currency-BIREo5ii.js";import{u as tt}from"./order-FEERAecj.js";import"./rates-DJzM32wq.js";const et=(d,m)=>{const _=N().settings.language||"en-US",r=typeof d=="string"?new Date(d):d,g={year:"numeric",month:"long",day:"numeric"};return r.toLocaleDateString(_,m||g)},at={key:1,class:"tw-text-center tw-text-gray-500"},st={key:1,class:"tw-text-center tw-text-gray-500"},ft=R({__name:"ProfilePage",setup(d){const m="https://e-comm-api-8eba0f6c8782.herokuapp.com/api".replace(/\/$/,""),p=V(),_=Y(),r=j(),g=tt(),P=F(),v=x(()=>p.user),Q=x(()=>_.getViewedCache()?.products||[]),A=x(()=>g.orderHistory),$=()=>{try{p.logout(),r.push(z)}catch(l){console.error("Logout failed:",l)}},D=l=>{if(!l)return"";const s=`${m}${l}`,a=P.getCachedImageUrl(s);return a||(P.cacheImageUrl(s),s)},H=()=>{r.push(`${G}`)},T=()=>{r.push(`${M}`)},L=l=>{r.push(`${Z}/${l}`)},E=l=>{r.push(`${J.replace(":id",l.toString())}`)};return(l,s)=>(o(),f(X,{class:"tw-p-4"},{default:t(()=>[e(q,{flat:"",class:"!tw-bg-transparent tw-max-w-screen-sm tw-mx-auto"},{default:t(()=>[e(W,{class:"tw-w-full tw-flex !tw-justify-between tw-items-center tw-mb-8"},{default:t(()=>s[0]||(s[0]=[h("h5",{class:"tw-text-3xl tw-font-semibold tw-font-serif"},"User Profile",-1)])),_:1}),e(b,null,{default:t(()=>[e(k,{class:"tw-w-full tw-flex tw-flex-col tw-justify-between tw-gap-4 !tw-p-0"},{default:t(()=>[e(i,null,{default:t(()=>[e(y,null,{default:t(()=>[e(n,{class:"tw-text-base"},{default:t(()=>[u(c(v.value?.name),1)]),_:1}),e(n,{class:"tw-text-xs"},{default:t(()=>[u(c(v.value?.email),1)]),_:1})]),_:1})]),_:1}),e(i,{class:"!tw-w-full !tw-flex sm:!tw-flex-row tw-gap-2 !tw-p-0 tw-items-center !tw-m-0"},{default:t(()=>[e(S,{outline:"",dense:"",label:"Update Profile",class:"!tw-w-full sm:!tw-w-fit",onClick:T}),e(S,{outline:"",dense:"",label:"Change Password",class:"!tw-w-full sm:!tw-w-fit",onClick:H}),e(S,{outline:"",dense:"",label:"Logout",class:"!tw-w-full sm:!tw-w-fit",onClick:$})]),_:1})]),_:1})]),_:1}),e(b,null,{default:t(()=>[s[1]||(s[1]=h("h5",{class:"tw-text-2xl tw-font-semibold tw-font-serif tw-mb-4"},"Viewed Items",-1)),Q.value?.length?(o(),f(y,{key:0},{default:t(()=>[(o(!0),w(O,null,I(Q.value,a=>(o(),f(k,{key:a.id,clickable:"",onClick:B=>L(a.id)},{default:t(()=>[e(i,{avatar:""},{default:t(()=>[e(K,{src:D(a.image),alt:a.name||a.title},null,8,["src","alt"])]),_:2},1024),e(i,null,{default:t(()=>[e(n,null,{default:t(()=>[u(c(a.name||a.title),1)]),_:2},1024),e(n,{caption:""},{default:t(()=>[u(c(C(U)(a.price)),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):(o(),w("div",at,"No viewed items"))]),_:1}),e(b,null,{default:t(()=>[s[2]||(s[2]=h("h5",{class:"tw-text-2xl tw-font-semibold tw-font-serif tw-mb-4"},"Order History",-1)),A.value?.length?(o(),f(y,{key:0},{default:t(()=>[(o(!0),w(O,null,I(A.value,a=>(o(),f(k,{key:a.id,clickable:"",onClick:B=>E(a.id)},{default:t(()=>[e(i,null,{default:t(()=>[e(n,null,{default:t(()=>[u("Order #"+c(a.id),1)]),_:2},1024),e(n,{caption:""},{default:t(()=>[u(c(C(et)(a.date)),1)]),_:2},1024)]),_:2},1024),e(i,{side:""},{default:t(()=>[e(n,null,{default:t(()=>[u(c(C(U)(a.total)),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):(o(),w("div",st,"No order history"))]),_:1})]),_:1})]),_:1}))}});export{ft as default};
