import{d as K,A as x,j as D,k as I,w as q,m as h,n as oe,q as se,l as b,t as C,B as T,z as O,F as ye,C as be,D as we,E as ie,G as M,H as Re,_ as xe,I as J,J as Be,K as k,T as qe,r as N,y as Ee,L as Oe,R as Ue,M as Z,O as je,P as L,S as ue,U as Le,V as de,W as Me,X as W,Y as te,Z as ce,$ as ae,a0 as ze,a1 as ne,a2 as Ke,a3 as Ce,a4 as Ye,a5 as z,a6 as Se,a7 as ke,a8 as le,a9 as $e,aa as He,ab as We,ac as Xe,ad as Ge,ae as Je,e as Ve,x as Q,p as _e,o as Pe,af as X,ag as R,ah as pe,ai as B,v as E,aj as Ze,c as et,ak as tt,f as at,al as me,am as nt,an as ve,ao as lt,Q as re,ap as rt,aq as ot}from"./index-Cw1-6oTs.js";import{Q as st}from"./QPage-crSimVfK.js";import{u as it}from"./order-ENlKiR0i.js";import{f as G}from"./currency-CNDhzamw.js";import{Q as ut}from"./QImg-C51as6M5.js";import{Q as De}from"./QForm-SEfvORme.js";import"./rates-BvmdyCoH.js";const dt={class:"tw-flex tw-flex-col tw-items-start full-width"},ct={class:"q-my-none"},pt={class:"text-h6 q-mb-md"},mt={class:"q-mb-md"},vt={class:"q-mb-none"},ft={class:"q-mb-none"},ht={class:"q-mb-none"},gt={class:"q-mb-md"},yt={class:"q-mb-none"},bt={class:"q-mb-none"},wt={class:"q-mt-sm full-width"},xt={class:"tw-text-center"},qt={class:"tw-text-right"},Ct=K({__name:"OrderConfirmationDialog",props:{modelValue:{type:Boolean,required:!0},details:{type:Object,required:!0},form:{type:Object,required:!0},color:{type:String,required:!0},text:{type:String,required:!0}},emits:["update:modelValue","confirm","cancel"],setup(e,{emit:n}){const c=e,u=n,i=x({get:()=>c.modelValue,set:o=>u("update:modelValue",o)}),t=()=>{i.value=!1,u("confirm")},a=()=>{i.value=!1,u("cancel")};return(o,m)=>(D(),I(Re,{modelValue:i.value,"onUpdate:modelValue":m[0]||(m[0]=s=>i.value=s),class:"confirm-dialog"},{default:q(()=>[h(oe,{style:{"max-width":"430px",width:"95vw",margin:"0 auto"}},{default:q(()=>[h(se,null,{default:q(()=>[b("div",dt,[b("h6",ct,C(o.$t("checkout.summary")),1),b("p",pt,C(o.$t("checkout.total"))+": "+C(T(G)(e.details.total)),1),b("div",mt,[b("strong",null,C(o.$t("checkout.shippingDetails"))+":",1),b("p",vt,C(e.form.shipping.firstName)+" "+C(e.form.shipping.lastName),1),b("p",ft,C(e.form.shipping.email),1),b("p",ht,C(e.form.shipping.address),1)]),b("div",gt,[b("strong",null,C(o.$t("checkout.paymentInfo"))+":",1),b("p",yt,C(o.$t("checkout.card"))+": **** **** **** "+C(e.form.payment&&e.form.payment.cardDetails?.cardNumber.slice(-4)),1),b("p",bt,C(o.$t("checkout.expiry"))+": "+C(e.form.payment?.cardDetails?.expiry),1)]),b("div",wt,[b("strong",null,C(o.$t("checkout.items"))+":",1),(D(!0),O(ye,null,be(e.details.items,s=>(D(),O("div",{key:s.id,class:"q-py-xs tw-grid tw-grid-cols-3 tw-gap-1 tw-w-full"},[b("div",null,C(s.name||s.title),1),b("div",xt,C(s.quantity),1),b("div",qt,C(T(G)(s.price)),1)]))),128))])])]),_:1}),h(we,{class:"tw-flex tw-flex-col sm:tw-flex-row tw-gap-2 tw-items-center !tw-justify-between"},{default:q(()=>[h(ie,{label:o.$t("checkout.cancelButton"),outline:"",class:M(["!tw-w-full sm:!tw-w-40 !tw-py-4 !tw-flex !tw-items-center !tw-justify-center",`tw-border-${e.color}`]),onClick:a},null,8,["label","class"]),h(ie,{label:o.$t("checkout.confirmButton"),flat:"","text-color":e.text,class:M(["!tw-w-full sm:!tw-w-40 !tw-m-0 !tw-py-4 !tw-flex !tw-items-center !tw-justify-center",`bg-${e.color}`]),onClick:t},null,8,["label","text-color","class"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),St=xe(Ct,[["__scopeId","data-v-3e031146"]]),kt=J({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:n,emit:c}){let u=!1,i,t,a=null,o=null,m,s;function l(){i&&i(),i=null,u=!1,a!==null&&(clearTimeout(a),a=null),o!==null&&(clearTimeout(o),o=null),t!==void 0&&t.removeEventListener("transitionend",m),m=null}function p(f,d,g){d!==void 0&&(f.style.height=`${d}px`),f.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,u=!0,i=g}function r(f,d){f.style.overflowY=null,f.style.height=null,f.style.transition=null,l(),d!==s&&c(d)}function v(f,d){let g=0;t=f,u===!0?(l(),g=f.offsetHeight===f.scrollHeight?0:void 0):(s="hide",f.style.overflowY="hidden"),p(f,g,d),a=setTimeout(()=>{a=null,f.style.height=`${f.scrollHeight}px`,m=V=>{o=null,(Object(V)!==V||V.target===f)&&r(f,"show")},f.addEventListener("transitionend",m),o=setTimeout(m,e.duration*1.1)},100)}function w(f,d){let g;t=f,u===!0?l():(s="show",f.style.overflowY="hidden",g=f.scrollHeight),p(f,g,d),a=setTimeout(()=>{a=null,f.style.height=0,m=V=>{o=null,(Object(V)!==V||V.target===f)&&r(f,"hide")},f.addEventListener("transitionend",m),o=setTimeout(m,e.duration*1.1)},100)}return Be(()=>{u===!0&&l()}),()=>k(qe,{css:!1,appear:e.appear,onEnter:v,onLeave:w},n.default)}}),Ne=J({name:"StepHeader",props:{stepper:{},step:{},goToPanel:Function},setup(e,{attrs:n}){const{proxy:{$q:c}}=Z(),u=N(null),i=x(()=>e.stepper.modelValue===e.step.name),t=x(()=>{const d=e.step.disable;return d===!0||d===""}),a=x(()=>{const d=e.step.error;return d===!0||d===""}),o=x(()=>{const d=e.step.done;return t.value===!1&&(d===!0||d==="")}),m=x(()=>{const d=e.step.headerNav,g=d===!0||d===""||d===void 0;return t.value===!1&&e.stepper.headerNav&&g}),s=x(()=>e.step.prefix&&(i.value===!1||e.stepper.activeIcon==="none")&&(a.value===!1||e.stepper.errorIcon==="none")&&(o.value===!1||e.stepper.doneIcon==="none")),l=x(()=>{const d=e.step.icon||e.stepper.inactiveIcon;if(i.value===!0){const g=e.step.activeIcon||e.stepper.activeIcon;return g==="none"?d:g||c.iconSet.stepper.active}if(a.value===!0){const g=e.step.errorIcon||e.stepper.errorIcon;return g==="none"?d:g||c.iconSet.stepper.error}if(t.value===!1&&o.value===!0){const g=e.step.doneIcon||e.stepper.doneIcon;return g==="none"?d:g||c.iconSet.stepper.done}return d}),p=x(()=>{const d=a.value===!0?e.step.errorColor||e.stepper.errorColor:void 0;if(i.value===!0){const g=e.step.activeColor||e.stepper.activeColor||e.step.color;return g!==void 0?g:d}return d!==void 0?d:t.value===!1&&o.value===!0?e.step.doneColor||e.stepper.doneColor||e.step.color||e.stepper.inactiveColor:e.step.color||e.stepper.inactiveColor}),r=x(()=>"q-stepper__tab col-grow flex items-center no-wrap relative-position"+(p.value!==void 0?` text-${p.value}`:"")+(a.value===!0?" q-stepper__tab--error q-stepper__tab--error-with-"+(s.value===!0?"prefix":"icon"):"")+(i.value===!0?" q-stepper__tab--active":"")+(o.value===!0?" q-stepper__tab--done":"")+(m.value===!0?" q-stepper__tab--navigation q-focusable q-hoverable":"")+(t.value===!0?" q-stepper__tab--disabled":"")),v=x(()=>e.stepper.headerNav!==!0?!1:m.value);function w(){u.value!==null&&u.value.focus(),i.value===!1&&e.goToPanel(e.step.name)}function f(d){d.keyCode===13&&i.value===!1&&e.goToPanel(e.step.name)}return()=>{const d={class:r.value};m.value===!0&&(d.onClick=w,d.onKeyup=f,Object.assign(d,t.value===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:n.tabindex||0}));const g=[k("div",{class:"q-focus-helper",tabindex:-1,ref:u}),k("div",{class:"q-stepper__dot row flex-center q-stepper__line relative-position"},[k("span",{class:"row flex-center"},[s.value===!0?e.step.prefix:k(Ee,{name:l.value})])])];if(e.step.title!==void 0&&e.step.title!==null){const V=[k("div",{class:"q-stepper__title"},e.step.title)];e.step.caption!==void 0&&e.step.caption!==null&&V.push(k("div",{class:"q-stepper__caption"},e.step.caption)),g.push(k("div",{class:"q-stepper__label q-stepper__line relative-position"},V))}return Oe(k("div",d,g),[[Ue,v.value]])}}});function $t(e){const n=[.06,6,50];return typeof e=="string"&&e.length&&e.split(":").forEach((c,u)=>{const i=parseFloat(c);i&&(n[u]=i)}),n}const Vt=je({name:"touch-swipe",beforeMount(e,{value:n,arg:c,modifiers:u}){if(u.mouse!==!0&&L.has.touch!==!0)return;const i=u.mouseCapture===!0?"Capture":"",t={handler:n,sensitivity:$t(c),direction:ue(u),noop:Le,mouseStart(a){de(a,t)&&Me(a)&&(W(t,"temp",[[document,"mousemove","move",`notPassive${i}`],[document,"mouseup","end","notPassiveCapture"]]),t.start(a,!0))},touchStart(a){if(de(a,t)){const o=a.target;W(t,"temp",[[o,"touchmove","move","notPassiveCapture"],[o,"touchcancel","end","notPassiveCapture"],[o,"touchend","end","notPassiveCapture"]]),t.start(a)}},start(a,o){L.is.firefox===!0&&te(e,!0);const m=ce(a);t.event={x:m.left,y:m.top,time:Date.now(),mouse:o===!0,dir:!1}},move(a){if(t.event===void 0)return;if(t.event.dir!==!1){ae(a);return}const o=Date.now()-t.event.time;if(o===0)return;const m=ce(a),s=m.left-t.event.x,l=Math.abs(s),p=m.top-t.event.y,r=Math.abs(p);if(t.event.mouse!==!0){if(l<t.sensitivity[1]&&r<t.sensitivity[1]){t.end(a);return}}else if(window.getSelection().toString()!==""){t.end(a);return}else if(l<t.sensitivity[2]&&r<t.sensitivity[2])return;const v=l/o,w=r/o;t.direction.vertical===!0&&l<r&&l<100&&w>t.sensitivity[0]&&(t.event.dir=p<0?"up":"down"),t.direction.horizontal===!0&&l>r&&r<100&&v>t.sensitivity[0]&&(t.event.dir=s<0?"left":"right"),t.direction.up===!0&&l<r&&p<0&&l<100&&w>t.sensitivity[0]&&(t.event.dir="up"),t.direction.down===!0&&l<r&&p>0&&l<100&&w>t.sensitivity[0]&&(t.event.dir="down"),t.direction.left===!0&&l>r&&s<0&&r<100&&v>t.sensitivity[0]&&(t.event.dir="left"),t.direction.right===!0&&l>r&&s>0&&r<100&&v>t.sensitivity[0]&&(t.event.dir="right"),t.event.dir!==!1?(ae(a),t.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),ze(),t.styleCleanup=f=>{t.styleCleanup=void 0,document.body.classList.remove("non-selectable");const d=()=>{document.body.classList.remove("no-pointer-events--children")};f===!0?setTimeout(d,50):d()}),t.handler({evt:a,touch:t.event.mouse!==!0,mouse:t.event.mouse,direction:t.event.dir,duration:o,distance:{x:l,y:r}})):t.end(a)},end(a){t.event!==void 0&&(ne(t,"temp"),L.is.firefox===!0&&te(e,!1),t.styleCleanup!==void 0&&t.styleCleanup(!0),a!==void 0&&t.event.dir!==!1&&ae(a),t.event=void 0)}};if(e.__qtouchswipe=t,u.mouse===!0){const a=u.mouseCapture===!0||u.mousecapture===!0?"Capture":"";W(t,"main",[[e,"mousedown","mouseStart",`passive${a}`]])}L.has.touch===!0&&W(t,"main",[[e,"touchstart","touchStart",`passive${u.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,n){const c=e.__qtouchswipe;c!==void 0&&(n.oldValue!==n.value&&(typeof n.value!="function"&&c.end(),c.handler=n.value),c.direction=ue(n.modifiers))},beforeUnmount(e){const n=e.__qtouchswipe;n!==void 0&&(ne(n,"main"),ne(n,"temp"),L.is.firefox===!0&&te(e,!1),n.styleCleanup!==void 0&&n.styleCleanup(),delete e.__qtouchswipe)}});function Fe(){let e=Object.create(null);return{getCache:(n,c)=>e[n]===void 0?e[n]=typeof c=="function"?c():c:e[n],setCache(n,c){e[n]=c},hasCache(n){return Object.hasOwnProperty.call(e,n)},clearCache(n){n!==void 0?delete e[n]:e=Object.create(null)}}}const _t={name:{required:!0},disable:Boolean},fe={setup(e,{slots:n}){return()=>k("div",{class:"q-panel scroll",role:"tabpanel"},z(n.default))}},Pt={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},Dt=["update:modelValue","beforeTransition","transition"];function Nt(){const{props:e,emit:n,proxy:c}=Z(),{getCache:u}=Fe(),{registerTimeout:i}=Ke();let t,a;const o=N(null),m={value:null};function s(y){const $=e.vertical===!0?"up":"left";S((c.$q.lang.rtl===!0?-1:1)*(y.direction===$?1:-1))}const l=x(()=>[[Vt,s,void 0,{horizontal:e.vertical!==!0,vertical:e.vertical,mouse:!0}]]),p=x(()=>e.transitionPrev||`slide-${e.vertical===!0?"down":"right"}`),r=x(()=>e.transitionNext||`slide-${e.vertical===!0?"up":"left"}`),v=x(()=>`--q-transition-duration: ${e.transitionDuration}ms`),w=x(()=>typeof e.modelValue=="string"||typeof e.modelValue=="number"?e.modelValue:String(e.modelValue)),f=x(()=>({include:e.keepAliveInclude,exclude:e.keepAliveExclude,max:e.keepAliveMax})),d=x(()=>e.keepAliveInclude!==void 0||e.keepAliveExclude!==void 0);Ce(()=>e.modelValue,(y,$)=>{const F=A(y)===!0?U(y):-1;a!==!0&&j(F===-1?0:F<U($)?-1:1),m.value!==F&&(m.value=F,n("beforeTransition",y,$),i(()=>{n("transition",y,$)},e.transitionDuration))});function g(){S(1)}function V(){S(-1)}function Y(y){n("update:modelValue",y)}function A(y){return y!=null&&y!==""}function U(y){return t.findIndex($=>$.props.name===y&&$.props.disable!==""&&$.props.disable!==!0)}function ee(){return t.filter(y=>y.props.disable!==""&&y.props.disable!==!0)}function j(y){const $=y!==0&&e.animated===!0&&m.value!==-1?"q-transition--"+(y===-1?p.value:r.value):null;o.value!==$&&(o.value=$)}function S(y,$=m.value){let F=$+y;for(;F!==-1&&F<t.length;){const H=t[F];if(H!==void 0&&H.props.disable!==""&&H.props.disable!==!0){j(y),a=!0,n("update:modelValue",H.props.name),setTimeout(()=>{a=!1});return}F+=y}e.infinite===!0&&t.length!==0&&$!==-1&&$!==t.length&&S(y,y===-1?t.length:-1)}function _(){const y=U(e.modelValue);return m.value!==y&&(m.value=y),!0}function P(){const y=A(e.modelValue)===!0&&_()&&t[m.value];return e.keepAlive===!0?[k(Se,f.value,[k(d.value===!0?u(w.value,()=>({...fe,name:w.value})):fe,{key:w.value,style:v.value},()=>y)])]:[k("div",{class:"q-panel scroll",style:v.value,key:w.value,role:"tabpanel"},[y])]}function Te(){if(t.length!==0)return e.animated===!0?[k(qe,{name:o.value},P)]:P()}function Ae(y){return t=Ye(z(y.default,[])).filter($=>$.props!==null&&$.props.slot===void 0&&A($.props.name)===!0),t.length}function Qe(){return t}return Object.assign(c,{next:g,previous:V,goTo:Y}),{panelIndex:m,panelDirectives:l,updatePanelsList:Ae,updatePanelIndex:_,getPanelContent:Te,getEnabledPanels:ee,getPanels:Qe,isValidPanelName:A,keepAliveProps:f,needsUniqueKeepAliveWrapper:d,goToPanelByOffset:S,goToPanel:Y,nextPanel:g,previousPanel:V}}function Ie(e){return k("div",{class:"q-stepper__step-content"},[k("div",{class:"q-stepper__step-inner"},z(e.default))])}const he={setup(e,{slots:n}){return()=>Ie(n)}},ge=J({name:"QStep",props:{..._t,icon:String,color:String,title:{type:String,required:!0},caption:String,prefix:[String,Number],doneIcon:String,doneColor:String,activeIcon:String,activeColor:String,errorIcon:String,errorColor:String,headerNav:{type:Boolean,default:!0},done:Boolean,error:Boolean,onScroll:[Function,Array]},setup(e,{slots:n,emit:c}){const{proxy:{$q:u}}=Z(),i=ke($e,le);if(i===le)return console.error("QStep needs to be a child of QStepper"),le;const{getCache:t}=Fe(),a=N(null),o=x(()=>i.value.modelValue===e.name),m=x(()=>u.platform.is.ios!==!0&&u.platform.is.chrome===!0||o.value!==!0||i.value.vertical!==!0?{}:{onScroll(p){const{target:r}=p;r.scrollTop>0&&(r.scrollTop=0),e.onScroll!==void 0&&c("scroll",p)}}),s=x(()=>typeof e.name=="string"||typeof e.name=="number"?e.name:String(e.name));function l(){const p=i.value.vertical;return p===!0&&i.value.keepAlive===!0?k(Se,i.value.keepAliveProps.value,o.value===!0?[k(i.value.needsUniqueKeepAliveWrapper.value===!0?t(s.value,()=>({...he,name:s.value})):he,{key:s.value},n.default)]:void 0):p!==!0||o.value===!0?Ie(n):void 0}return()=>k("div",{ref:a,class:"q-stepper__step",role:"tabpanel",...m.value},i.value.vertical===!0?[k(Ne,{stepper:i.value,step:e,goToPanel:i.value.goToPanel}),i.value.animated===!0?k(kt,l):l()]:[l()])}}),Ft=/(-\w)/g;function It(e){const n={};for(const c in e){const u=c.replace(Ft,i=>i[1].toUpperCase());n[u]=e[c]}return n}const Tt=J({name:"QStepper",props:{...He,...Pt,flat:Boolean,bordered:Boolean,alternativeLabels:Boolean,headerNav:Boolean,contracted:Boolean,headerClass:String,inactiveColor:String,inactiveIcon:String,doneIcon:String,doneColor:String,activeIcon:String,activeColor:String,errorIcon:String,errorColor:String},emits:Dt,setup(e,{slots:n}){const c=Z(),u=We(e,c.proxy.$q),{updatePanelsList:i,isValidPanelName:t,updatePanelIndex:a,getPanelContent:o,getPanels:m,panelDirectives:s,goToPanel:l,keepAliveProps:p,needsUniqueKeepAliveWrapper:r}=Nt();Xe($e,x(()=>({goToPanel:l,keepAliveProps:p,needsUniqueKeepAliveWrapper:r,...e})));const v=x(()=>`q-stepper q-stepper--${e.vertical===!0?"vertical":"horizontal"}`+(e.flat===!0?" q-stepper--flat":"")+(e.bordered===!0?" q-stepper--bordered":"")+(u.value===!0?" q-stepper--dark q-dark":"")),w=x(()=>`q-stepper__header row items-stretch justify-between q-stepper__header--${e.alternativeLabels===!0?"alternative":"standard"}-labels`+(e.flat===!1||e.bordered===!0?" q-stepper__header--border":"")+(e.contracted===!0?" q-stepper__header--contracted":"")+(e.headerClass!==void 0?` ${e.headerClass}`:""));function f(){const d=z(n.message,[]);if(e.vertical===!0){t(e.modelValue)&&a();const g=k("div",{class:"q-stepper__content"},z(n.default));return d===void 0?[g]:d.concat(g)}return[k("div",{class:w.value},m().map(g=>{const V=It(g.props);return k(Ne,{key:V.name,stepper:e,step:V,goToPanel:l})})),d,Je("div",{class:"q-stepper__content q-panel-parent"},o(),"cont",e.swipeable,()=>s.value)]}return()=>(i(n),k("div",{class:v.value},Ge(n.navigation,f())))}}),At={class:"col-12 col-sm-6"},Qt={class:"col-12 col-sm-6"},Rt={class:"col-12"},Bt={class:"col-12"},Et=K({__name:"ShippingForm",props:{shippingForm:{type:Object,required:!0},shippingFormRef:{type:Object,required:!0}},emits:["shipping-valid","update:shipping"],setup(e,{emit:n}){const c=e,u=n,{t:i}=Ve(),t=x({get:()=>c.shippingForm,set:s=>{u("update:shipping",s)}}),a=s=>!!s||i("errors.validation.required"),o=s=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)?!0:i("errors.validation.invalidEmail"),m=async()=>{if(c.shippingFormRef)try{const s=!!t.value?.firstName,l=!!t.value?.lastName,p=o(t.value?.email)===!0,r=!!t.value?.address,v=s&&l&&p&&r;if(v)await c.shippingFormRef.validate();else{u("shipping-valid",!1);return}u("shipping-valid",v)}catch{u("shipping-valid",!1)}else u("shipping-valid",!1)};return(s,l)=>(D(),I(De,{ref:"shippingFormRef",class:"row q-col-gutter-md shipping-form",onSubmit:_e(m,["prevent"])},{default:q(()=>[b("div",At,[h(Q,{modelValue:t.value.firstName,"onUpdate:modelValue":l[0]||(l[0]=p=>t.value.firstName=p),label:s.$t("checkout.firstName"),"reactive-rules":"",autofocus:"",rules:[a]},null,8,["modelValue","label","rules"])]),b("div",Qt,[h(Q,{modelValue:t.value.lastName,"onUpdate:modelValue":l[1]||(l[1]=p=>t.value.lastName=p),label:s.$t("checkout.lastName"),"reactive-rules":"",rules:[a]},null,8,["modelValue","label","rules"])]),b("div",Rt,[h(Q,{modelValue:t.value.email,"onUpdate:modelValue":l[2]||(l[2]=p=>t.value.email=p),label:s.$t("checkout.email"),type:"email","lazy-rules":"",rules:[a,o]},null,8,["modelValue","label","rules"])]),b("div",Bt,[h(Q,{modelValue:t.value.address,"onUpdate:modelValue":l[3]||(l[3]=p=>t.value.address=p),label:s.$t("checkout.address"),"lazy-rules":"",rules:[a]},null,8,["modelValue","label","rules"])])]),_:1},512))}}),Ot={class:"col-12"},Ut={class:"col-6"},jt={class:"col-6"},Lt=K({__name:"PaymentForm",props:{paymentForm:{type:Object,required:!0},paymentFormRef:{type:Object,required:!0}},emits:["payment-valid","update:payment"],setup(e,{emit:n}){const c=e,u=n,{t:i}=Ve(),t=x({get:()=>({...c.paymentForm,cardDetails:{cardNumber:c.paymentForm.cardDetails?.cardNumber||"",expiry:c.paymentForm.cardDetails?.expiry||"",cvv:c.paymentForm.cardDetails?.cvv||""}}),set:p=>{u("update:payment",p)}}),a=()=>{c.paymentFormRef?c.paymentFormRef.validate().then(p=>{u("payment-valid",p)}).catch(()=>{u("payment-valid",!1)}):u("payment-valid",!1)},o=p=>!!p||i("errors.validation.required"),m=p=>/^\d{16}$/.test(p.replace(/\s+/g,""))||i("errors.validation.invalidCardNumber"),s=p=>{const[r,v]=p.split("/").map(Number);if(!r||!v)return i("errors.validation.invalidExpiryDate");const w=new Date,f=w.getMonth()+1,d=w.getFullYear()%100;return r>=1&&r<=12&&v>=d&&(v>d||r>=f)||i("errors.validation.invalidExpiryDate")},l=p=>/^\d{3}$/.test(p)?!0:i("errors.validation.invalidCVV");return(p,r)=>(D(),I(De,{ref:"paymentFormRef",greedy:"",class:"row q-col-gutter-md payment-form",onSubmit:_e(a,["prevent"])},{default:q(()=>[b("div",Ot,[h(Q,{modelValue:t.value.cardDetails.cardNumber,"onUpdate:modelValue":r[0]||(r[0]=v=>t.value.cardDetails.cardNumber=v),label:p.$t("checkout.cardNumber"),mask:"#### #### #### ####",autofocus:"","lazy-rules":"",rules:[o,m]},null,8,["modelValue","label","rules"])]),b("div",Ut,[h(Q,{modelValue:t.value.cardDetails.expiry,"onUpdate:modelValue":r[1]||(r[1]=v=>t.value.cardDetails.expiry=v),label:"MM/YY",mask:"##/##","lazy-rules":"",rules:[o,s]},null,8,["modelValue","rules"])]),b("div",jt,[h(Q,{modelValue:t.value.cardDetails.cvv,"onUpdate:modelValue":r[2]||(r[2]=v=>t.value.cardDetails.cvv=v),label:"CVV",mask:"###","lazy-rules":"",rules:[o,l]},null,8,["modelValue","rules"])])]),_:1},512))}}),Mt={key:0,class:"text-positive text-xs"},zt={key:2},Kt={key:0,class:"q-mt-lg"},Yt=K({__name:"OrderForm",props:{step:{type:Number,required:!0},text:{type:String,required:!0},orderForm:{type:Object,required:!0},isIpsEnabled:{type:Boolean,default:!1},qrCodeDataUrl:{type:String,default:""}},emits:["update:step","update:orderForm","shipping-valid","payment-valid"],setup(e,{emit:n}){const c=e,u=n,i=N(!1),t=N(!1),a=N(null),o=N(null),m=x({get:()=>c.step,set:r=>{u("update:step",r)}}),s=x({get:()=>c.orderForm,set:r=>{u("update:orderForm",r)}}),l=r=>{i.value=r,u("shipping-valid",r)},p=r=>{t.value=r,u("payment-valid",r)};return Pe(()=>{a.value||(a.value={}),o.value||(o.value={})}),(r,v)=>(D(),I(Tt,{modelValue:m.value,"onUpdate:modelValue":v[4]||(v[4]=w=>m.value=w),vertical:"",class:"checkout-stepper !tw-bg-transparent full-width",color:"none","text-color":e.text,"header-nav":""},{default:q(()=>[h(ge,{name:1,title:r.$t("checkout.shipping"),icon:"local_shipping",done:e.step>1,class:"checkout-step","header-nav":!0},{default:q(()=>[h(oe,{flat:"",bordered:"",class:"!tw-p-0"},{default:q(()=>[h(se,null,{default:q(()=>[h(Et,{"shipping-form":s.value.shipping,"shipping-form-ref":a.value,onShippingValid:l,"onUpdate:shipping":v[0]||(v[0]=w=>s.value.shipping=w)},null,8,["shipping-form","shipping-form-ref"])]),_:1})]),_:1})]),_:1},8,["title","done"]),h(ge,{name:2,title:r.$t("checkout.payment"),icon:"payment",done:e.step>2,"header-nav":!0,disable:!i.value},{default:q(()=>[e.orderForm.payment?(D(),I(X,{key:0,class:"!tw-p-0"},{default:q(()=>[h(R,{class:"tw-text-sm"},{default:q(()=>[h(pe,{modelValue:s.value.payment.method,"onUpdate:modelValue":v[1]||(v[1]=w=>s.value.payment.method=w),val:"card",label:r.$t("checkout.cardPayment")},null,8,["modelValue","label"]),h(pe,{modelValue:s.value.payment.method,"onUpdate:modelValue":v[2]||(v[2]=w=>s.value.payment.method=w),val:"ips",disable:!e.isIpsEnabled},{default:q(()=>[b("span",null,[B(C(r.$t("checkout.ipsScanQrCode"))+" ",1),e.isIpsEnabled?E("",!0):(D(),O("span",Mt," - "+C(r.$t("checkout.ipsInfo")),1))])]),_:1},8,["modelValue","disable"])]),_:1})]),_:1})):E("",!0),e.orderForm.payment?.method==="card"?(D(),I(oe,{key:1,flat:"",bordered:""},{default:q(()=>[h(se,null,{default:q(()=>[h(Lt,{"payment-form":s.value.payment,"payment-form-ref":o.value,onPaymentValid:p,"onUpdate:payment":v[3]||(v[3]=w=>s.value.payment=w)},null,8,["payment-form","payment-form-ref"])]),_:1})]),_:1})):E("",!0),e.isIpsEnabled&&s.value.payment?.method==="ips"?(D(),O("div",zt,[e.qrCodeDataUrl?(D(),O("div",Kt,[h(ut,{src:e.qrCodeDataUrl,alt:"QR Code for Payment",fit:"contain",class:"tw-w-48 tw-h-48"},null,8,["src"])])):E("",!0)])):E("",!0)]),_:1},8,["title","done","disable"])]),_:1},8,["modelValue","text-color"]))}}),Ht={class:"tw-container tw-max-w-screen-xl tw-mx-auto"},Wt={class:"tw-text-3xl tw-mt-4 tw-font-semibold tw-font-serif tw-my-4 tw-text-left md:tw-text-center tw-mb-8"},Xt={class:"row q-col-gutter-md"},Gt={class:"col-12 col-md-8"},Jt={class:"col-12 col-md-4"},Zt={class:"tw-text-xl tw-font-semibold tw-font-serif md:tw-text-2xl tw-mb-4"},ea={class:"tw-w-full tw-flex tw-flex-row tw-gap-2"},ta=K({__name:"CheckoutPage",setup(e){Ze(S=>({42762888:r.value,"1299cc98":v.value}));const n=ke("scrollToTop"),c=et(),u=tt(),i=it(),t=at(),a=N(1),o=N(!1),m=N(!1),s=N(!1),l=me({shipping:{firstName:"",lastName:"",email:"",address:""},payment:{method:"card",cardDetails:{cardNumber:"",expiry:"",cvv:""}}}),p=me({id:Math.floor(Math.random()*1e3),items:u.items,total:u.totalPrice,date:new Date().toISOString(),status:"Pending",shippingAddress:`${l.shipping.address}`,paymentMethod:l.payment.method,trackingNumber:""}),r=x(()=>c.dark.isActive?"white":"black"),v=x(()=>c.dark.isActive?"black":"white"),w=c.dark.isActive,f=x(()=>u.items.reduce((S,_)=>S+_.price*_.quantity,0)),d=()=>{console.log("orderOverview:",l)},g=()=>{o.value=!1},V=()=>{a.value--,n()},Y=()=>{a.value===1&&m.value?(i.setShippingForm(l.shipping),a.value++,n()):a.value===2&&s.value?(i.setPaymentForm(l.payment),t.push(rt)):(n(),c.notify({type:"negative",position:"top",message:"Please fix errors in the form.",timeout:1e3}))},A=()=>{t.push(ot)},U=S=>{m.value=S},ee=S=>{s.value=S},j=()=>{m.value=!!l.shipping.firstName&&!!l.shipping.lastName&&!!l.shipping.email&&!!l.shipping.address,s.value=!!l.payment?.method&&!!l.payment.cardDetails?.cardNumber&&!!l.payment.cardDetails.expiry&&!!l.payment.cardDetails.cvv};return Ce(()=>i.orderForm,S=>{l.shipping=S.shipping,l.payment=S.payment??{method:"card",cardDetails:{cardNumber:"",expiry:"",cvv:""}},j()},{deep:!0,immediate:!0}),Pe(()=>{i.loadOrder(),j(),n()}),(S,_)=>(D(),I(st,{padding:"",class:"!tw-pb-16"},{default:q(()=>[b("div",Ht,[b("h5",Wt,C(S.$t("checkout.checkoutTitle")),1),b("div",Xt,[b("div",Gt,[h(Yt,{step:a.value,"onUpdate:step":_[0]||(_[0]=P=>a.value=P),text:v.value,color:r.value,"order-form":l,onShippingValid:U,onPaymentValid:ee},null,8,["step","text","color","order-form"])]),b("div",Jt,[h(X,{class:M(["tw-flex tw-justify-between tw-flex-col tw-gap-4 sm:!tw-pt-4 sm:!tw-pb-3 tw-rounded-md",T(w)?"tw-bg-transparent tw-text-light":"bg-light tw-text-dark"])},{default:q(()=>[h(R,{class:"tw-w-full"},{default:q(()=>[b("div",Zt,C(S.$t("checkout.orderSummary")),1),h(nt,{dense:"",class:"tw-w-full tw-flex tw-flex-col tw-justify-between"},{default:q(()=>[(D(!0),O(ye,null,be(T(u).items,P=>(D(),I(X,{key:P.id,class:"tw-justify-between"},{default:q(()=>[h(R,null,{default:q(()=>[h(ve,null,{default:q(()=>[B(C(P.name||P.title),1)]),_:2},1024),h(ve,{caption:""},{default:q(()=>[B(C(S.$t("checkout.qty"))+": "+C(P.quantity),1)]),_:2},1024)]),_:2},1024),h(R,{side:"",class:M(T(w)?"text-light":"text-dark")},{default:q(()=>[B(C(T(G)(P.price*P.quantity)),1)]),_:2},1032,["class"])]),_:2},1024))),128)),h(lt,{class:"q-my-md"}),h(X,null,{default:q(()=>[h(R,{class:"text-subtitle1 text-weight-bold"},{default:q(()=>[B(C(S.$t("checkout.total")),1)]),_:1}),h(R,{side:"",class:M(["text-subtitle1 text-weight-bold",T(w)?"text-light":"text-dark"])},{default:q(()=>[B(C(T(G)(f.value)),1)]),_:1},8,["class"])]),_:1})]),_:1})]),_:1}),h(we,{align:"center"},{default:q(()=>[h(re,{color:r.value,"text-color":v.value,disable:a.value===1&&!m.value||a.value===2&&!s.value,label:a.value===2?S.$t("checkout.orderOverview"):S.$t("checkout.continue"),"class-name":"tw-w-full tw-flex-1 !tw-ml-0 tw-mb-2 !tw-py-2.5",onClick:_[1]||(_[1]=P=>Y())},null,8,["color","text-color","disable","label"]),b("div",ea,[h(re,{color:v.value,"text-color":r.value,label:a.value===2?S.$t("checkout.toShipping"):S.$t("checkout.toCart"),class:"tw-flex-grow !tw-py-2.5",onClick:_[2]||(_[2]=P=>a.value===2?V():A())},null,8,["color","text-color","label"]),a.value===2?(D(),I(re,{key:0,color:v.value,"text-color":r.value,label:S.$t("checkout.toCart"),class:"tw-flex-grow tw-p-0 tw-w-1/2",onClick:_[3]||(_[3]=P=>A())},null,8,["color","text-color","label"])):E("",!0)])]),_:1})]),_:1},8,["class"])])])]),h(St,{modelValue:o.value,"onUpdate:modelValue":_[4]||(_[4]=P=>o.value=P),form:l,details:p,color:r.value,text:v.value,onConfirm:d,onCancel:g},null,8,["modelValue","form","details","color","text"])]),_:1}))}}),ua=xe(ta,[["__scopeId","data-v-916e91e7"]]);export{ua as default};
