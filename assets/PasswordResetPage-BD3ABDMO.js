import{d as _,c as Q,e as B,f as C,r as c,h as P,j as s,k as l,w as n,l as i,m as d,n as R,p as v,q as o,v as h,y as V,t as q,z as E,aB as j}from"./index-eqiBq1KU.js";import{Q as N}from"./QForm-E-SG7a9W.js";import{Q as S}from"./QPage-Cf_ORzAX.js";const z={class:"tw-w-full sm:tw-max-w-72 tw-mx-auto"},F={key:2,class:"tw-text-red-500 tw-mb-4"},I={class:"tw-flex tw-flex-col tw-gap-2"},G=_({__name:"PasswordResetPage",setup(M){const m=Q(),{t:p}=B(),y=C(),u=c(""),r=c(null),a=c(!1),f=()=>{y.back()},x=async()=>{r.value=null;try{const t=await j.post("/auth/reset-password",{email:u.value});m.notify({type:"positive",message:t.data.message,position:"top",timeout:5e3,icon:"check"}),u.value="",a.value=!0}catch(t){const e=t;r.value=e.response?.data?.error||"Failed to reset password. Please try again.",m.notify({type:"negative",message:r.value,position:"top",timeout:5e3,icon:"error"})}},g=t=>!!t||p("errors.validation.required"),k=t=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)?!0:p("errors.validation.invalidEmail");return(t,e)=>{const w=P("QButton");return s(),l(S,{padding:"",class:"!tw-pb-16 !tw-px-3 tw-flex tw-justify-center tw-items-center"},{default:n(()=>[i("div",z,[d(E,{flat:"",bordered:"",class:"!tw-w-full !tw-max-w-54 tw-p-4 !tw-bg-transparent"},{default:n(()=>[e[2]||(e[2]=i("h4",{class:"tw-text-3xl tw-text-center tw-mb-8 tw-font-semibold tw-font-serif"}," Reset Password ",-1)),d(N,{class:"!tw-w-full",onSubmit:R(x,["prevent"])},{default:n(()=>[a.value?(s(),l(v,{key:0},{default:n(()=>e[1]||(e[1]=[i("div",{class:"tw-w-full tw-flex tw-justify-center tw-items-center"}," A password reset email has been sent to your email address. ",-1)])),_:1})):o("",!0),a.value?o("",!0):(s(),l(v,{key:1,class:"tw-flex tw-flex-col tw-gap-4 tw-w-full !tw-p-0 tw-mb-4"},{default:n(()=>[d(h,{modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=b=>u.value=b),label:"Email",type:"email",dense:"","lazy-rules":"",rules:[g,k],class:"tw-w-full"},null,8,["modelValue","rules"])]),_:1})),r.value?(s(),V("div",F,q(r.value),1)):o("",!0),i("div",I,[a.value?o("",!0):(s(),l(w,{key:0,type:"submit",label:"Reset Password",class:"!tw-w-full !tw-py-2.5"})),a.value?o("",!0):(s(),l(w,{key:1,secondary:"",label:"Cancel",class:"!tw-w-full !tw-py-2.5",onClick:f})),a.value?(s(),l(w,{key:2,secondary:"",label:"Go Back",class:"!tw-w-full !tw-py-2.5",onClick:f})):o("",!0)])]),_:1})]),_:1})])]),_:1})}}});export{G as default};
