import{c as oe,r as F,p as Dt,f as Gt,o as Wt,a as Xt,e as Vt,h as M,g as X,i as ie,v as Zt,s as re,n as en,j as tn,k as nn,T as xt,l as k,Q as rn,w as on,R as an,m as sn,q as Z,t as We,x as ln,y as Xe,z as un,A as se,B as me,C as Ze,D as cn,E as pe,F as dn,G as fn,H as hn,K as $t,I as gn,J as ve,L as Ut,M as mn,N as pn,O as vn,P as wn,S as yn,U as Cn,V as bn,W as En,X as Sn,Y as Pn,Z as z,_ as we,$ as L,a0 as V,a1 as R,a2 as ye,a3 as Ce,a4 as et,a5 as j,a6 as be,a7 as ee,a8 as tt,a9 as G,aa as Q,ab as le,ac as ue,ad as Bn,ae as An,af as Ee,ag as Nn,ah as qn,ai as In,aj as nt,ak as rt,al as _n}from"./index-Bw3Ms7v8.js";import{Q as Rn,f as te}from"./currencyUtils-D5tINkCa.js";import{Q as Tn}from"./QPage-D3yYWJA5.js";import"./rates-Bf4J-Hi6.js";const ot=oe({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(e,{slots:o,emit:a}){const r=ie(),n=F(null);let t=0;const i=[];function s(c){const b=typeof c=="boolean"?c:e.noErrorFocus!==!0,p=++t,w=(E,S)=>{a(`validation${E===!0?"Success":"Error"}`,S)},v=E=>{const S=E.validate();return typeof S.then=="function"?S.then(_=>({valid:_,comp:E}),_=>({valid:!1,comp:E,err:_})):Promise.resolve({valid:S,comp:E})};return(e.greedy===!0?Promise.all(i.map(v)).then(E=>E.filter(S=>S.valid!==!0)):i.reduce((E,S)=>E.then(()=>v(S).then(_=>{if(_.valid===!1)return Promise.reject(_)})),Promise.resolve()).catch(E=>[E])).then(E=>{if(E===void 0||E.length===0)return p===t&&w(!0),!0;if(p===t){const{comp:S,err:_}=E[0];if(_!==void 0&&console.error(_),w(!1,S),b===!0){const P=E.find(({comp:m})=>typeof m.focus=="function"&&Zt(m.$)===!1);P!==void 0&&P.comp.focus()}}return!1})}function l(){t++,i.forEach(c=>{typeof c.resetValidation=="function"&&c.resetValidation()})}function f(c){c!==void 0&&re(c);const b=t+1;s().then(p=>{b===t&&p===!0&&(e.onSubmit!==void 0?a("submit",c):c!==void 0&&c.target!==void 0&&typeof c.target.submit=="function"&&c.target.submit())})}function u(c){c!==void 0&&re(c),a("reset"),en(()=>{l(),e.autofocus===!0&&e.noResetFocus!==!0&&y()})}function y(){tn(()=>{if(n.value===null)return;const c=n.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||n.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||n.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(n.value.querySelectorAll("[tabindex]"),b=>b.tabIndex!==-1);c?.focus({preventScroll:!0})})}Dt(Gt,{bindComponent(c){i.push(c)},unbindComponent(c){const b=i.indexOf(c);b!==-1&&i.splice(b,1)}});let g=!1;return Wt(()=>{g=!0}),Xt(()=>{g===!0&&e.autofocus===!0&&y()}),Vt(()=>{e.autofocus===!0&&y()}),Object.assign(r.proxy,{validate:s,resetValidation:l,submit:f,reset:u,focus:y,getValidationComponents:()=>i}),()=>M("form",{class:"q-form",ref:n,onSubmit:f,onReset:u},X(o.default))}}),kn=oe({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:o,emit:a}){let r=!1,n,t,i=null,s=null,l,f;function u(){n&&n(),n=null,r=!1,i!==null&&(clearTimeout(i),i=null),s!==null&&(clearTimeout(s),s=null),t!==void 0&&t.removeEventListener("transitionend",l),l=null}function y(p,w,v){w!==void 0&&(p.style.height=`${w}px`),p.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,r=!0,n=v}function g(p,w){p.style.overflowY=null,p.style.height=null,p.style.transition=null,u(),w!==f&&a(w)}function c(p,w){let v=0;t=p,r===!0?(u(),v=p.offsetHeight===p.scrollHeight?0:void 0):(f="hide",p.style.overflowY="hidden"),y(p,v,w),i=setTimeout(()=>{i=null,p.style.height=`${p.scrollHeight}px`,l=A=>{s=null,(Object(A)!==A||A.target===p)&&g(p,"show")},p.addEventListener("transitionend",l),s=setTimeout(l,e.duration*1.1)},100)}function b(p,w){let v;t=p,r===!0?u():(f="show",p.style.overflowY="hidden",v=p.scrollHeight),y(p,v,w),i=setTimeout(()=>{i=null,p.style.height=0,l=A=>{s=null,(Object(A)!==A||A.target===p)&&g(p,"hide")},p.addEventListener("transitionend",l),s=setTimeout(l,e.duration*1.1)},100)}return nn(()=>{r===!0&&u()}),()=>M(xt,{css:!1,appear:e.appear,onEnter:c,onLeave:b},o.default)}}),Ft=oe({name:"StepHeader",props:{stepper:{},step:{},goToPanel:Function},setup(e,{attrs:o}){const{proxy:{$q:a}}=ie(),r=F(null),n=k(()=>e.stepper.modelValue===e.step.name),t=k(()=>{const w=e.step.disable;return w===!0||w===""}),i=k(()=>{const w=e.step.error;return w===!0||w===""}),s=k(()=>{const w=e.step.done;return t.value===!1&&(w===!0||w==="")}),l=k(()=>{const w=e.step.headerNav,v=w===!0||w===""||w===void 0;return t.value===!1&&e.stepper.headerNav&&v}),f=k(()=>e.step.prefix&&(n.value===!1||e.stepper.activeIcon==="none")&&(i.value===!1||e.stepper.errorIcon==="none")&&(s.value===!1||e.stepper.doneIcon==="none")),u=k(()=>{const w=e.step.icon||e.stepper.inactiveIcon;if(n.value===!0){const v=e.step.activeIcon||e.stepper.activeIcon;return v==="none"?w:v||a.iconSet.stepper.active}if(i.value===!0){const v=e.step.errorIcon||e.stepper.errorIcon;return v==="none"?w:v||a.iconSet.stepper.error}if(t.value===!1&&s.value===!0){const v=e.step.doneIcon||e.stepper.doneIcon;return v==="none"?w:v||a.iconSet.stepper.done}return w}),y=k(()=>{const w=i.value===!0?e.step.errorColor||e.stepper.errorColor:void 0;if(n.value===!0){const v=e.step.activeColor||e.stepper.activeColor||e.step.color;return v!==void 0?v:w}return w!==void 0?w:t.value===!1&&s.value===!0?e.step.doneColor||e.stepper.doneColor||e.step.color||e.stepper.inactiveColor:e.step.color||e.stepper.inactiveColor}),g=k(()=>"q-stepper__tab col-grow flex items-center no-wrap relative-position"+(y.value!==void 0?` text-${y.value}`:"")+(i.value===!0?" q-stepper__tab--error q-stepper__tab--error-with-"+(f.value===!0?"prefix":"icon"):"")+(n.value===!0?" q-stepper__tab--active":"")+(s.value===!0?" q-stepper__tab--done":"")+(l.value===!0?" q-stepper__tab--navigation q-focusable q-hoverable":"")+(t.value===!0?" q-stepper__tab--disabled":"")),c=k(()=>e.stepper.headerNav!==!0?!1:l.value);function b(){r.value!==null&&r.value.focus(),n.value===!1&&e.goToPanel(e.step.name)}function p(w){w.keyCode===13&&n.value===!1&&e.goToPanel(e.step.name)}return()=>{const w={class:g.value};l.value===!0&&(w.onClick=b,w.onKeyup=p,Object.assign(w,t.value===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:o.tabindex||0}));const v=[M("div",{class:"q-focus-helper",tabindex:-1,ref:r}),M("div",{class:"q-stepper__dot row flex-center q-stepper__line relative-position"},[M("span",{class:"row flex-center"},[f.value===!0?e.step.prefix:M(rn,{name:u.value})])])];if(e.step.title!==void 0&&e.step.title!==null){const A=[M("div",{class:"q-stepper__title"},e.step.title)];e.step.caption!==void 0&&e.step.caption!==null&&A.push(M("div",{class:"q-stepper__caption"},e.step.caption)),v.push(M("div",{class:"q-stepper__label q-stepper__line relative-position"},A))}return on(M("div",w,v),[[an,c.value]])}}});function Mn(e){const o=[.06,6,50];return typeof e=="string"&&e.length&&e.split(":").forEach((a,r)=>{const n=parseFloat(a);n&&(o[r]=n)}),o}const Ln=sn({name:"touch-swipe",beforeMount(e,{value:o,arg:a,modifiers:r}){if(r.mouse!==!0&&Z.has.touch!==!0)return;const n=r.mouseCapture===!0?"Capture":"",t={handler:o,sensitivity:Mn(a),direction:We(r),noop:ln,mouseStart(i){Xe(i,t)&&un(i)&&(se(t,"temp",[[document,"mousemove","move",`notPassive${n}`],[document,"mouseup","end","notPassiveCapture"]]),t.start(i,!0))},touchStart(i){if(Xe(i,t)){const s=i.target;se(t,"temp",[[s,"touchmove","move","notPassiveCapture"],[s,"touchcancel","end","notPassiveCapture"],[s,"touchend","end","notPassiveCapture"]]),t.start(i)}},start(i,s){Z.is.firefox===!0&&me(e,!0);const l=Ze(i);t.event={x:l.left,y:l.top,time:Date.now(),mouse:s===!0,dir:!1}},move(i){if(t.event===void 0)return;if(t.event.dir!==!1){re(i);return}const s=Date.now()-t.event.time;if(s===0)return;const l=Ze(i),f=l.left-t.event.x,u=Math.abs(f),y=l.top-t.event.y,g=Math.abs(y);if(t.event.mouse!==!0){if(u<t.sensitivity[1]&&g<t.sensitivity[1]){t.end(i);return}}else if(window.getSelection().toString()!==""){t.end(i);return}else if(u<t.sensitivity[2]&&g<t.sensitivity[2])return;const c=u/s,b=g/s;t.direction.vertical===!0&&u<g&&u<100&&b>t.sensitivity[0]&&(t.event.dir=y<0?"up":"down"),t.direction.horizontal===!0&&u>g&&g<100&&c>t.sensitivity[0]&&(t.event.dir=f<0?"left":"right"),t.direction.up===!0&&u<g&&y<0&&u<100&&b>t.sensitivity[0]&&(t.event.dir="up"),t.direction.down===!0&&u<g&&y>0&&u<100&&b>t.sensitivity[0]&&(t.event.dir="down"),t.direction.left===!0&&u>g&&f<0&&g<100&&c>t.sensitivity[0]&&(t.event.dir="left"),t.direction.right===!0&&u>g&&f>0&&g<100&&c>t.sensitivity[0]&&(t.event.dir="right"),t.event.dir!==!1?(re(i),t.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),cn(),t.styleCleanup=p=>{t.styleCleanup=void 0,document.body.classList.remove("non-selectable");const w=()=>{document.body.classList.remove("no-pointer-events--children")};p===!0?setTimeout(w,50):w()}),t.handler({evt:i,touch:t.event.mouse!==!0,mouse:t.event.mouse,direction:t.event.dir,duration:s,distance:{x:u,y:g}})):t.end(i)},end(i){t.event!==void 0&&(pe(t,"temp"),Z.is.firefox===!0&&me(e,!1),t.styleCleanup!==void 0&&t.styleCleanup(!0),i!==void 0&&t.event.dir!==!1&&re(i),t.event=void 0)}};if(e.__qtouchswipe=t,r.mouse===!0){const i=r.mouseCapture===!0||r.mousecapture===!0?"Capture":"";se(t,"main",[[e,"mousedown","mouseStart",`passive${i}`]])}Z.has.touch===!0&&se(t,"main",[[e,"touchstart","touchStart",`passive${r.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,o){const a=e.__qtouchswipe;a!==void 0&&(o.oldValue!==o.value&&(typeof o.value!="function"&&a.end(),a.handler=o.value),a.direction=We(o.modifiers))},beforeUnmount(e){const o=e.__qtouchswipe;o!==void 0&&(pe(o,"main"),pe(o,"temp"),Z.is.firefox===!0&&me(e,!1),o.styleCleanup!==void 0&&o.styleCleanup(),delete e.__qtouchswipe)}});function Qt(){let e=Object.create(null);return{getCache:(o,a)=>e[o]===void 0?e[o]=typeof a=="function"?a():a:e[o],setCache(o,a){e[o]=a},hasCache(o){return Object.hasOwnProperty.call(e,o)},clearCache(o){o!==void 0?delete e[o]:e=Object.create(null)}}}const Dn={name:{required:!0},disable:Boolean},it={setup(e,{slots:o}){return()=>M("div",{class:"q-panel scroll",role:"tabpanel"},X(o.default))}},Vn={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},xn=["update:modelValue","beforeTransition","transition"];function $n(){const{props:e,emit:o,proxy:a}=ie(),{getCache:r}=Qt(),{registerTimeout:n}=dn();let t,i;const s=F(null),l={value:null};function f(C){const T=e.vertical===!0?"up":"left";h((a.$q.lang.rtl===!0?-1:1)*(C.direction===T?1:-1))}const u=k(()=>[[Ln,f,void 0,{horizontal:e.vertical!==!0,vertical:e.vertical,mouse:!0}]]),y=k(()=>e.transitionPrev||`slide-${e.vertical===!0?"down":"right"}`),g=k(()=>e.transitionNext||`slide-${e.vertical===!0?"up":"left"}`),c=k(()=>`--q-transition-duration: ${e.transitionDuration}ms`),b=k(()=>typeof e.modelValue=="string"||typeof e.modelValue=="number"?e.modelValue:String(e.modelValue)),p=k(()=>({include:e.keepAliveInclude,exclude:e.keepAliveExclude,max:e.keepAliveMax})),w=k(()=>e.keepAliveInclude!==void 0||e.keepAliveExclude!==void 0);fn(()=>e.modelValue,(C,T)=>{const D=S(C)===!0?_(C):-1;i!==!0&&m(D===-1?0:D<_(T)?-1:1),l.value!==D&&(l.value=D,o("beforeTransition",C,T),n(()=>{o("transition",C,T)},e.transitionDuration))});function v(){h(1)}function A(){h(-1)}function E(C){o("update:modelValue",C)}function S(C){return C!=null&&C!==""}function _(C){return t.findIndex(T=>T.props.name===C&&T.props.disable!==""&&T.props.disable!==!0)}function P(){return t.filter(C=>C.props.disable!==""&&C.props.disable!==!0)}function m(C){const T=C!==0&&e.animated===!0&&l.value!==-1?"q-transition--"+(C===-1?y.value:g.value):null;s.value!==T&&(s.value=T)}function h(C,T=l.value){let D=T+C;for(;D!==-1&&D<t.length;){const Y=t[D];if(Y!==void 0&&Y.props.disable!==""&&Y.props.disable!==!0){m(C),i=!0,o("update:modelValue",Y.props.name),setTimeout(()=>{i=!1});return}D+=C}e.infinite===!0&&t.length!==0&&T!==-1&&T!==t.length&&h(C,C===-1?t.length:-1)}function d(){const C=_(e.modelValue);return l.value!==C&&(l.value=C),!0}function q(){const C=S(e.modelValue)===!0&&d()&&t[l.value];return e.keepAlive===!0?[M($t,p.value,[M(w.value===!0?r(b.value,()=>({...it,name:b.value})):it,{key:b.value,style:c.value},()=>C)])]:[M("div",{class:"q-panel scroll",style:c.value,key:b.value,role:"tabpanel"},[C])]}function B(){if(t.length!==0)return e.animated===!0?[M(xt,{name:s.value},q)]:q()}function I(C){return t=hn(X(C.default,[])).filter(T=>T.props!==null&&T.props.slot===void 0&&S(T.props.name)===!0),t.length}function N(){return t}return Object.assign(a,{next:v,previous:A,goTo:E}),{panelIndex:l,panelDirectives:u,updatePanelsList:I,updatePanelIndex:d,getPanelContent:B,getEnabledPanels:P,getPanels:N,isValidPanelName:S,keepAliveProps:p,needsUniqueKeepAliveWrapper:w,goToPanelByOffset:h,goToPanel:E,nextPanel:v,previousPanel:A}}function Kt(e){return M("div",{class:"q-stepper__step-content"},[M("div",{class:"q-stepper__step-inner"},X(e.default))])}const at={setup(e,{slots:o}){return()=>Kt(o)}},st=oe({name:"QStep",props:{...Dn,icon:String,color:String,title:{type:String,required:!0},caption:String,prefix:[String,Number],doneIcon:String,doneColor:String,activeIcon:String,activeColor:String,errorIcon:String,errorColor:String,headerNav:{type:Boolean,default:!0},done:Boolean,error:Boolean,onScroll:[Function,Array]},setup(e,{slots:o,emit:a}){const{proxy:{$q:r}}=ie(),n=gn(Ut,ve);if(n===ve)return console.error("QStep needs to be a child of QStepper"),ve;const{getCache:t}=Qt(),i=F(null),s=k(()=>n.value.modelValue===e.name),l=k(()=>r.platform.is.ios!==!0&&r.platform.is.chrome===!0||s.value!==!0||n.value.vertical!==!0?{}:{onScroll(y){const{target:g}=y;g.scrollTop>0&&(g.scrollTop=0),e.onScroll!==void 0&&a("scroll",y)}}),f=k(()=>typeof e.name=="string"||typeof e.name=="number"?e.name:String(e.name));function u(){const y=n.value.vertical;return y===!0&&n.value.keepAlive===!0?M($t,n.value.keepAliveProps.value,s.value===!0?[M(n.value.needsUniqueKeepAliveWrapper.value===!0?t(f.value,()=>({...at,name:f.value})):at,{key:f.value},o.default)]:void 0):y!==!0||s.value===!0?Kt(o):void 0}return()=>M("div",{ref:i,class:"q-stepper__step",role:"tabpanel",...l.value},n.value.vertical===!0?[M(Ft,{stepper:n.value,step:e,goToPanel:n.value.goToPanel}),n.value.animated===!0?M(kn,u):u()]:[u()])}}),Un=/(-\w)/g;function Fn(e){const o={};for(const a in e){const r=a.replace(Un,n=>n[1].toUpperCase());o[r]=e[a]}return o}const Qn=oe({name:"QStepper",props:{...mn,...Vn,flat:Boolean,bordered:Boolean,alternativeLabels:Boolean,headerNav:Boolean,contracted:Boolean,headerClass:String,inactiveColor:String,inactiveIcon:String,doneIcon:String,doneColor:String,activeIcon:String,activeColor:String,errorIcon:String,errorColor:String},emits:xn,setup(e,{slots:o}){const a=ie(),r=pn(e,a.proxy.$q),{updatePanelsList:n,isValidPanelName:t,updatePanelIndex:i,getPanelContent:s,getPanels:l,panelDirectives:f,goToPanel:u,keepAliveProps:y,needsUniqueKeepAliveWrapper:g}=$n();Dt(Ut,k(()=>({goToPanel:u,keepAliveProps:y,needsUniqueKeepAliveWrapper:g,...e})));const c=k(()=>`q-stepper q-stepper--${e.vertical===!0?"vertical":"horizontal"}`+(e.flat===!0?" q-stepper--flat":"")+(e.bordered===!0?" q-stepper--bordered":"")+(r.value===!0?" q-stepper--dark q-dark":"")),b=k(()=>`q-stepper__header row items-stretch justify-between q-stepper__header--${e.alternativeLabels===!0?"alternative":"standard"}-labels`+(e.flat===!1||e.bordered===!0?" q-stepper__header--border":"")+(e.contracted===!0?" q-stepper__header--contracted":"")+(e.headerClass!==void 0?` ${e.headerClass}`:""));function p(){const w=X(o.message,[]);if(e.vertical===!0){t(e.modelValue)&&i();const v=M("div",{class:"q-stepper__content"},X(o.default));return w===void 0?[v]:w.concat(v)}return[M("div",{class:b.value},l().map(v=>{const A=Fn(v.props);return M(Ft,{key:A.name,stepper:e,step:A,goToPanel:u})})),w,wn("div",{class:"q-stepper__content q-panel-parent"},s(),"cont",e.swipeable,()=>f.value)]}return()=>(n(o),M("div",{class:c.value},vn(o.navigation,p())))}});function Kn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var W={},Se,lt;function zn(){return lt||(lt=1,Se=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),Se}var Pe={},K={},ut;function O(){if(ut)return K;ut=1;let e;const o=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return K.getSymbolSize=function(r){if(!r)throw new Error('"version" cannot be null or undefined');if(r<1||r>40)throw new Error('"version" should be in range from 1 to 40');return r*4+17},K.getSymbolTotalCodewords=function(r){return o[r]},K.getBCHDigit=function(a){let r=0;for(;a!==0;)r++,a>>>=1;return r},K.setToSJISFunction=function(r){if(typeof r!="function")throw new Error('"toSJISFunc" is not a valid function.');e=r},K.isKanjiModeEnabled=function(){return typeof e<"u"},K.toSJIS=function(r){return e(r)},K}var Be={},ct;function He(){return ct||(ct=1,function(e){e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2};function o(a){if(typeof a!="string")throw new Error("Param is not a string");switch(a.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+a)}}e.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},e.from=function(r,n){if(e.isValid(r))return r;try{return o(r)}catch{return n}}}(Be)),Be}var Ae,dt;function jn(){if(dt)return Ae;dt=1;function e(){this.buffer=[],this.length=0}return e.prototype={get:function(o){const a=Math.floor(o/8);return(this.buffer[a]>>>7-o%8&1)===1},put:function(o,a){for(let r=0;r<a;r++)this.putBit((o>>>a-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(o){const a=Math.floor(this.length/8);this.buffer.length<=a&&this.buffer.push(0),o&&(this.buffer[a]|=128>>>this.length%8),this.length++}},Ae=e,Ae}var Ne,ft;function On(){if(ft)return Ne;ft=1;function e(o){if(!o||o<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=o,this.data=new Uint8Array(o*o),this.reservedBit=new Uint8Array(o*o)}return e.prototype.set=function(o,a,r,n){const t=o*this.size+a;this.data[t]=r,n&&(this.reservedBit[t]=!0)},e.prototype.get=function(o,a){return this.data[o*this.size+a]},e.prototype.xor=function(o,a,r){this.data[o*this.size+a]^=r},e.prototype.isReserved=function(o,a){return this.reservedBit[o*this.size+a]},Ne=e,Ne}var qe={},ht;function Hn(){return ht||(ht=1,function(e){const o=O().getSymbolSize;e.getRowColCoords=function(r){if(r===1)return[];const n=Math.floor(r/7)+2,t=o(r),i=t===145?26:Math.ceil((t-13)/(2*n-2))*2,s=[t-7];for(let l=1;l<n-1;l++)s[l]=s[l-1]-i;return s.push(6),s.reverse()},e.getPositions=function(r){const n=[],t=e.getRowColCoords(r),i=t.length;for(let s=0;s<i;s++)for(let l=0;l<i;l++)s===0&&l===0||s===0&&l===i-1||s===i-1&&l===0||n.push([t[s],t[l]]);return n}}(qe)),qe}var Ie={},gt;function Yn(){if(gt)return Ie;gt=1;const e=O().getSymbolSize,o=7;return Ie.getPositions=function(r){const n=e(r);return[[0,0],[n-o,0],[0,n-o]]},Ie}var _e={},mt;function Jn(){return mt||(mt=1,function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const o={N1:3,N2:3,N3:40,N4:10};e.isValid=function(n){return n!=null&&n!==""&&!isNaN(n)&&n>=0&&n<=7},e.from=function(n){return e.isValid(n)?parseInt(n,10):void 0},e.getPenaltyN1=function(n){const t=n.size;let i=0,s=0,l=0,f=null,u=null;for(let y=0;y<t;y++){s=l=0,f=u=null;for(let g=0;g<t;g++){let c=n.get(y,g);c===f?s++:(s>=5&&(i+=o.N1+(s-5)),f=c,s=1),c=n.get(g,y),c===u?l++:(l>=5&&(i+=o.N1+(l-5)),u=c,l=1)}s>=5&&(i+=o.N1+(s-5)),l>=5&&(i+=o.N1+(l-5))}return i},e.getPenaltyN2=function(n){const t=n.size;let i=0;for(let s=0;s<t-1;s++)for(let l=0;l<t-1;l++){const f=n.get(s,l)+n.get(s,l+1)+n.get(s+1,l)+n.get(s+1,l+1);(f===4||f===0)&&i++}return i*o.N2},e.getPenaltyN3=function(n){const t=n.size;let i=0,s=0,l=0;for(let f=0;f<t;f++){s=l=0;for(let u=0;u<t;u++)s=s<<1&2047|n.get(f,u),u>=10&&(s===1488||s===93)&&i++,l=l<<1&2047|n.get(u,f),u>=10&&(l===1488||l===93)&&i++}return i*o.N3},e.getPenaltyN4=function(n){let t=0;const i=n.data.length;for(let l=0;l<i;l++)t+=n.data[l];return Math.abs(Math.ceil(t*100/i/5)-10)*o.N4};function a(r,n,t){switch(r){case e.Patterns.PATTERN000:return(n+t)%2===0;case e.Patterns.PATTERN001:return n%2===0;case e.Patterns.PATTERN010:return t%3===0;case e.Patterns.PATTERN011:return(n+t)%3===0;case e.Patterns.PATTERN100:return(Math.floor(n/2)+Math.floor(t/3))%2===0;case e.Patterns.PATTERN101:return n*t%2+n*t%3===0;case e.Patterns.PATTERN110:return(n*t%2+n*t%3)%2===0;case e.Patterns.PATTERN111:return(n*t%3+(n+t)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}e.applyMask=function(n,t){const i=t.size;for(let s=0;s<i;s++)for(let l=0;l<i;l++)t.isReserved(l,s)||t.xor(l,s,a(n,l,s))},e.getBestMask=function(n,t){const i=Object.keys(e.Patterns).length;let s=0,l=1/0;for(let f=0;f<i;f++){t(f),e.applyMask(f,n);const u=e.getPenaltyN1(n)+e.getPenaltyN2(n)+e.getPenaltyN3(n)+e.getPenaltyN4(n);e.applyMask(f,n),u<l&&(l=u,s=f)}return s}}(_e)),_e}var ce={},pt;function zt(){if(pt)return ce;pt=1;const e=He(),o=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],a=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return ce.getBlocksCount=function(n,t){switch(t){case e.L:return o[(n-1)*4+0];case e.M:return o[(n-1)*4+1];case e.Q:return o[(n-1)*4+2];case e.H:return o[(n-1)*4+3];default:return}},ce.getTotalCodewordsCount=function(n,t){switch(t){case e.L:return a[(n-1)*4+0];case e.M:return a[(n-1)*4+1];case e.Q:return a[(n-1)*4+2];case e.H:return a[(n-1)*4+3];default:return}},ce}var Re={},ne={},vt;function Gn(){if(vt)return ne;vt=1;const e=new Uint8Array(512),o=new Uint8Array(256);return function(){let r=1;for(let n=0;n<255;n++)e[n]=r,o[r]=n,r<<=1,r&256&&(r^=285);for(let n=255;n<512;n++)e[n]=e[n-255]}(),ne.log=function(r){if(r<1)throw new Error("log("+r+")");return o[r]},ne.exp=function(r){return e[r]},ne.mul=function(r,n){return r===0||n===0?0:e[o[r]+o[n]]},ne}var wt;function Wn(){return wt||(wt=1,function(e){const o=Gn();e.mul=function(r,n){const t=new Uint8Array(r.length+n.length-1);for(let i=0;i<r.length;i++)for(let s=0;s<n.length;s++)t[i+s]^=o.mul(r[i],n[s]);return t},e.mod=function(r,n){let t=new Uint8Array(r);for(;t.length-n.length>=0;){const i=t[0];for(let l=0;l<n.length;l++)t[l]^=o.mul(n[l],i);let s=0;for(;s<t.length&&t[s]===0;)s++;t=t.slice(s)}return t},e.generateECPolynomial=function(r){let n=new Uint8Array([1]);for(let t=0;t<r;t++)n=e.mul(n,new Uint8Array([1,o.exp(t)]));return n}}(Re)),Re}var Te,yt;function Xn(){if(yt)return Te;yt=1;const e=Wn();function o(a){this.genPoly=void 0,this.degree=a,this.degree&&this.initialize(this.degree)}return o.prototype.initialize=function(r){this.degree=r,this.genPoly=e.generateECPolynomial(this.degree)},o.prototype.encode=function(r){if(!this.genPoly)throw new Error("Encoder not initialized");const n=new Uint8Array(r.length+this.degree);n.set(r);const t=e.mod(n,this.genPoly),i=this.degree-t.length;if(i>0){const s=new Uint8Array(this.degree);return s.set(t,i),s}return t},Te=o,Te}var ke={},Me={},Le={},Ct;function jt(){return Ct||(Ct=1,Le.isValid=function(o){return!isNaN(o)&&o>=1&&o<=40}),Le}var x={},bt;function Ot(){if(bt)return x;bt=1;const e="[0-9]+",o="[A-Z $%*+\\-./:]+";let a="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";a=a.replace(/u/g,"\\u");const r="(?:(?![A-Z0-9 $%*+\\-./:]|"+a+`)(?:.|[\r
]))+`;x.KANJI=new RegExp(a,"g"),x.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),x.BYTE=new RegExp(r,"g"),x.NUMERIC=new RegExp(e,"g"),x.ALPHANUMERIC=new RegExp(o,"g");const n=new RegExp("^"+a+"$"),t=new RegExp("^"+e+"$"),i=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return x.testKanji=function(l){return n.test(l)},x.testNumeric=function(l){return t.test(l)},x.testAlphanumeric=function(l){return i.test(l)},x}var Et;function H(){return Et||(Et=1,function(e){const o=jt(),a=Ot();e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(t,i){if(!t.ccBits)throw new Error("Invalid mode: "+t);if(!o.isValid(i))throw new Error("Invalid version: "+i);return i>=1&&i<10?t.ccBits[0]:i<27?t.ccBits[1]:t.ccBits[2]},e.getBestModeForData=function(t){return a.testNumeric(t)?e.NUMERIC:a.testAlphanumeric(t)?e.ALPHANUMERIC:a.testKanji(t)?e.KANJI:e.BYTE},e.toString=function(t){if(t&&t.id)return t.id;throw new Error("Invalid mode")},e.isValid=function(t){return t&&t.bit&&t.ccBits};function r(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+n)}}e.from=function(t,i){if(e.isValid(t))return t;try{return r(t)}catch{return i}}}(Me)),Me}var St;function Zn(){return St||(St=1,function(e){const o=O(),a=zt(),r=He(),n=H(),t=jt(),i=7973,s=o.getBCHDigit(i);function l(g,c,b){for(let p=1;p<=40;p++)if(c<=e.getCapacity(p,b,g))return p}function f(g,c){return n.getCharCountIndicator(g,c)+4}function u(g,c){let b=0;return g.forEach(function(p){const w=f(p.mode,c);b+=w+p.getBitsLength()}),b}function y(g,c){for(let b=1;b<=40;b++)if(u(g,b)<=e.getCapacity(b,c,n.MIXED))return b}e.from=function(c,b){return t.isValid(c)?parseInt(c,10):b},e.getCapacity=function(c,b,p){if(!t.isValid(c))throw new Error("Invalid QR Code version");typeof p>"u"&&(p=n.BYTE);const w=o.getSymbolTotalCodewords(c),v=a.getTotalCodewordsCount(c,b),A=(w-v)*8;if(p===n.MIXED)return A;const E=A-f(p,c);switch(p){case n.NUMERIC:return Math.floor(E/10*3);case n.ALPHANUMERIC:return Math.floor(E/11*2);case n.KANJI:return Math.floor(E/13);case n.BYTE:default:return Math.floor(E/8)}},e.getBestVersionForData=function(c,b){let p;const w=r.from(b,r.M);if(Array.isArray(c)){if(c.length>1)return y(c,w);if(c.length===0)return 1;p=c[0]}else p=c;return l(p.mode,p.getLength(),w)},e.getEncodedBits=function(c){if(!t.isValid(c)||c<7)throw new Error("Invalid QR Code version");let b=c<<12;for(;o.getBCHDigit(b)-s>=0;)b^=i<<o.getBCHDigit(b)-s;return c<<12|b}}(ke)),ke}var De={},Pt;function er(){if(Pt)return De;Pt=1;const e=O(),o=1335,a=21522,r=e.getBCHDigit(o);return De.getEncodedBits=function(t,i){const s=t.bit<<3|i;let l=s<<10;for(;e.getBCHDigit(l)-r>=0;)l^=o<<e.getBCHDigit(l)-r;return(s<<10|l)^a},De}var Ve={},xe,Bt;function tr(){if(Bt)return xe;Bt=1;const e=H();function o(a){this.mode=e.NUMERIC,this.data=a.toString()}return o.getBitsLength=function(r){return 10*Math.floor(r/3)+(r%3?r%3*3+1:0)},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(r){let n,t,i;for(n=0;n+3<=this.data.length;n+=3)t=this.data.substr(n,3),i=parseInt(t,10),r.put(i,10);const s=this.data.length-n;s>0&&(t=this.data.substr(n),i=parseInt(t,10),r.put(i,s*3+1))},xe=o,xe}var $e,At;function nr(){if(At)return $e;At=1;const e=H(),o=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function a(r){this.mode=e.ALPHANUMERIC,this.data=r}return a.getBitsLength=function(n){return 11*Math.floor(n/2)+6*(n%2)},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(n){let t;for(t=0;t+2<=this.data.length;t+=2){let i=o.indexOf(this.data[t])*45;i+=o.indexOf(this.data[t+1]),n.put(i,11)}this.data.length%2&&n.put(o.indexOf(this.data[t]),6)},$e=a,$e}var Ue,Nt;function rr(){if(Nt)return Ue;Nt=1;const e=H();function o(a){this.mode=e.BYTE,typeof a=="string"?this.data=new TextEncoder().encode(a):this.data=new Uint8Array(a)}return o.getBitsLength=function(r){return r*8},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(a){for(let r=0,n=this.data.length;r<n;r++)a.put(this.data[r],8)},Ue=o,Ue}var Fe,qt;function or(){if(qt)return Fe;qt=1;const e=H(),o=O();function a(r){this.mode=e.KANJI,this.data=r}return a.getBitsLength=function(n){return n*13},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(r){let n;for(n=0;n<this.data.length;n++){let t=o.toSJIS(this.data[n]);if(t>=33088&&t<=40956)t-=33088;else if(t>=57408&&t<=60351)t-=49472;else throw new Error("Invalid SJIS character: "+this.data[n]+`
Make sure your charset is UTF-8`);t=(t>>>8&255)*192+(t&255),r.put(t,13)}},Fe=a,Fe}var Qe={exports:{}},It;function ir(){return It||(It=1,function(e){var o={single_source_shortest_paths:function(a,r,n){var t={},i={};i[r]=0;var s=o.PriorityQueue.make();s.push(r,0);for(var l,f,u,y,g,c,b,p,w;!s.empty();){l=s.pop(),f=l.value,y=l.cost,g=a[f]||{};for(u in g)g.hasOwnProperty(u)&&(c=g[u],b=y+c,p=i[u],w=typeof i[u]>"u",(w||p>b)&&(i[u]=b,s.push(u,b),t[u]=f))}if(typeof n<"u"&&typeof i[n]>"u"){var v=["Could not find a path from ",r," to ",n,"."].join("");throw new Error(v)}return t},extract_shortest_path_from_predecessor_list:function(a,r){for(var n=[],t=r;t;)n.push(t),a[t],t=a[t];return n.reverse(),n},find_path:function(a,r,n){var t=o.single_source_shortest_paths(a,r,n);return o.extract_shortest_path_from_predecessor_list(t,n)},PriorityQueue:{make:function(a){var r=o.PriorityQueue,n={},t;a=a||{};for(t in r)r.hasOwnProperty(t)&&(n[t]=r[t]);return n.queue=[],n.sorter=a.sorter||r.default_sorter,n},default_sorter:function(a,r){return a.cost-r.cost},push:function(a,r){var n={value:a,cost:r};this.queue.push(n),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};e.exports=o}(Qe)),Qe.exports}var _t;function ar(){return _t||(_t=1,function(e){const o=H(),a=tr(),r=nr(),n=rr(),t=or(),i=Ot(),s=O(),l=ir();function f(v){return unescape(encodeURIComponent(v)).length}function u(v,A,E){const S=[];let _;for(;(_=v.exec(E))!==null;)S.push({data:_[0],index:_.index,mode:A,length:_[0].length});return S}function y(v){const A=u(i.NUMERIC,o.NUMERIC,v),E=u(i.ALPHANUMERIC,o.ALPHANUMERIC,v);let S,_;return s.isKanjiModeEnabled()?(S=u(i.BYTE,o.BYTE,v),_=u(i.KANJI,o.KANJI,v)):(S=u(i.BYTE_KANJI,o.BYTE,v),_=[]),A.concat(E,S,_).sort(function(m,h){return m.index-h.index}).map(function(m){return{data:m.data,mode:m.mode,length:m.length}})}function g(v,A){switch(A){case o.NUMERIC:return a.getBitsLength(v);case o.ALPHANUMERIC:return r.getBitsLength(v);case o.KANJI:return t.getBitsLength(v);case o.BYTE:return n.getBitsLength(v)}}function c(v){return v.reduce(function(A,E){const S=A.length-1>=0?A[A.length-1]:null;return S&&S.mode===E.mode?(A[A.length-1].data+=E.data,A):(A.push(E),A)},[])}function b(v){const A=[];for(let E=0;E<v.length;E++){const S=v[E];switch(S.mode){case o.NUMERIC:A.push([S,{data:S.data,mode:o.ALPHANUMERIC,length:S.length},{data:S.data,mode:o.BYTE,length:S.length}]);break;case o.ALPHANUMERIC:A.push([S,{data:S.data,mode:o.BYTE,length:S.length}]);break;case o.KANJI:A.push([S,{data:S.data,mode:o.BYTE,length:f(S.data)}]);break;case o.BYTE:A.push([{data:S.data,mode:o.BYTE,length:f(S.data)}])}}return A}function p(v,A){const E={},S={start:{}};let _=["start"];for(let P=0;P<v.length;P++){const m=v[P],h=[];for(let d=0;d<m.length;d++){const q=m[d],B=""+P+d;h.push(B),E[B]={node:q,lastCount:0},S[B]={};for(let I=0;I<_.length;I++){const N=_[I];E[N]&&E[N].node.mode===q.mode?(S[N][B]=g(E[N].lastCount+q.length,q.mode)-g(E[N].lastCount,q.mode),E[N].lastCount+=q.length):(E[N]&&(E[N].lastCount=q.length),S[N][B]=g(q.length,q.mode)+4+o.getCharCountIndicator(q.mode,A))}}_=h}for(let P=0;P<_.length;P++)S[_[P]].end=0;return{map:S,table:E}}function w(v,A){let E;const S=o.getBestModeForData(v);if(E=o.from(A,S),E!==o.BYTE&&E.bit<S.bit)throw new Error('"'+v+'" cannot be encoded with mode '+o.toString(E)+`.
 Suggested mode is: `+o.toString(S));switch(E===o.KANJI&&!s.isKanjiModeEnabled()&&(E=o.BYTE),E){case o.NUMERIC:return new a(v);case o.ALPHANUMERIC:return new r(v);case o.KANJI:return new t(v);case o.BYTE:return new n(v)}}e.fromArray=function(A){return A.reduce(function(E,S){return typeof S=="string"?E.push(w(S,null)):S.data&&E.push(w(S.data,S.mode)),E},[])},e.fromString=function(A,E){const S=y(A,s.isKanjiModeEnabled()),_=b(S),P=p(_,E),m=l.find_path(P.map,"start","end"),h=[];for(let d=1;d<m.length-1;d++)h.push(P.table[m[d]].node);return e.fromArray(c(h))},e.rawSplit=function(A){return e.fromArray(y(A,s.isKanjiModeEnabled()))}}(Ve)),Ve}var Rt;function sr(){if(Rt)return Pe;Rt=1;const e=O(),o=He(),a=jn(),r=On(),n=Hn(),t=Yn(),i=Jn(),s=zt(),l=Xn(),f=Zn(),u=er(),y=H(),g=ar();function c(P,m){const h=P.size,d=t.getPositions(m);for(let q=0;q<d.length;q++){const B=d[q][0],I=d[q][1];for(let N=-1;N<=7;N++)if(!(B+N<=-1||h<=B+N))for(let C=-1;C<=7;C++)I+C<=-1||h<=I+C||(N>=0&&N<=6&&(C===0||C===6)||C>=0&&C<=6&&(N===0||N===6)||N>=2&&N<=4&&C>=2&&C<=4?P.set(B+N,I+C,!0,!0):P.set(B+N,I+C,!1,!0))}}function b(P){const m=P.size;for(let h=8;h<m-8;h++){const d=h%2===0;P.set(h,6,d,!0),P.set(6,h,d,!0)}}function p(P,m){const h=n.getPositions(m);for(let d=0;d<h.length;d++){const q=h[d][0],B=h[d][1];for(let I=-2;I<=2;I++)for(let N=-2;N<=2;N++)I===-2||I===2||N===-2||N===2||I===0&&N===0?P.set(q+I,B+N,!0,!0):P.set(q+I,B+N,!1,!0)}}function w(P,m){const h=P.size,d=f.getEncodedBits(m);let q,B,I;for(let N=0;N<18;N++)q=Math.floor(N/3),B=N%3+h-8-3,I=(d>>N&1)===1,P.set(q,B,I,!0),P.set(B,q,I,!0)}function v(P,m,h){const d=P.size,q=u.getEncodedBits(m,h);let B,I;for(B=0;B<15;B++)I=(q>>B&1)===1,B<6?P.set(B,8,I,!0):B<8?P.set(B+1,8,I,!0):P.set(d-15+B,8,I,!0),B<8?P.set(8,d-B-1,I,!0):B<9?P.set(8,15-B-1+1,I,!0):P.set(8,15-B-1,I,!0);P.set(d-8,8,1,!0)}function A(P,m){const h=P.size;let d=-1,q=h-1,B=7,I=0;for(let N=h-1;N>0;N-=2)for(N===6&&N--;;){for(let C=0;C<2;C++)if(!P.isReserved(q,N-C)){let T=!1;I<m.length&&(T=(m[I]>>>B&1)===1),P.set(q,N-C,T),B--,B===-1&&(I++,B=7)}if(q+=d,q<0||h<=q){q-=d,d=-d;break}}}function E(P,m,h){const d=new a;h.forEach(function(C){d.put(C.mode.bit,4),d.put(C.getLength(),y.getCharCountIndicator(C.mode,P)),C.write(d)});const q=e.getSymbolTotalCodewords(P),B=s.getTotalCodewordsCount(P,m),I=(q-B)*8;for(d.getLengthInBits()+4<=I&&d.put(0,4);d.getLengthInBits()%8!==0;)d.putBit(0);const N=(I-d.getLengthInBits())/8;for(let C=0;C<N;C++)d.put(C%2?17:236,8);return S(d,P,m)}function S(P,m,h){const d=e.getSymbolTotalCodewords(m),q=s.getTotalCodewordsCount(m,h),B=d-q,I=s.getBlocksCount(m,h),N=d%I,C=I-N,T=Math.floor(d/I),D=Math.floor(B/I),Y=D+1,Ye=T-D,Yt=new l(Ye);let de=0;const ae=new Array(I),Je=new Array(I);let fe=0;const Jt=new Uint8Array(P.buffer);for(let J=0;J<I;J++){const ge=J<C?D:Y;ae[J]=Jt.slice(de,de+ge),Je[J]=Yt.encode(ae[J]),de+=ge,fe=Math.max(fe,ge)}const he=new Uint8Array(d);let Ge=0,$,U;for($=0;$<fe;$++)for(U=0;U<I;U++)$<ae[U].length&&(he[Ge++]=ae[U][$]);for($=0;$<Ye;$++)for(U=0;U<I;U++)he[Ge++]=Je[U][$];return he}function _(P,m,h,d){let q;if(Array.isArray(P))q=g.fromArray(P);else if(typeof P=="string"){let T=m;if(!T){const D=g.rawSplit(P);T=f.getBestVersionForData(D,h)}q=g.fromString(P,T||40)}else throw new Error("Invalid data");const B=f.getBestVersionForData(q,h);if(!B)throw new Error("The amount of data is too big to be stored in a QR Code");if(!m)m=B;else if(m<B)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+B+`.
`);const I=E(m,h,q),N=e.getSymbolSize(m),C=new r(N);return c(C,m),b(C),p(C,m),v(C,h,0),m>=7&&w(C,m),A(C,I),isNaN(d)&&(d=i.getBestMask(C,v.bind(null,C,h))),i.applyMask(d,C),v(C,h,d),{modules:C,version:m,errorCorrectionLevel:h,maskPattern:d,segments:q}}return Pe.create=function(m,h){if(typeof m>"u"||m==="")throw new Error("No input text");let d=o.M,q,B;return typeof h<"u"&&(d=o.from(h.errorCorrectionLevel,o.M),q=f.from(h.version),B=i.from(h.maskPattern),h.toSJISFunc&&e.setToSJISFunction(h.toSJISFunc)),_(m,q,d,B)},Pe}var Ke={},ze={},Tt;function Ht(){return Tt||(Tt=1,function(e){function o(a){if(typeof a=="number"&&(a=a.toString()),typeof a!="string")throw new Error("Color should be defined as hex string");let r=a.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+a);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(t){return[t,t]}))),r.length===6&&r.push("F","F");const n=parseInt(r.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:n&255,hex:"#"+r.slice(0,6).join("")}}e.getOptions=function(r){r||(r={}),r.color||(r.color={});const n=typeof r.margin>"u"||r.margin===null||r.margin<0?4:r.margin,t=r.width&&r.width>=21?r.width:void 0,i=r.scale||4;return{width:t,scale:t?4:i,margin:n,color:{dark:o(r.color.dark||"#000000ff"),light:o(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},e.getScale=function(r,n){return n.width&&n.width>=r+n.margin*2?n.width/(r+n.margin*2):n.scale},e.getImageWidth=function(r,n){const t=e.getScale(r,n);return Math.floor((r+n.margin*2)*t)},e.qrToImageData=function(r,n,t){const i=n.modules.size,s=n.modules.data,l=e.getScale(i,t),f=Math.floor((i+t.margin*2)*l),u=t.margin*l,y=[t.color.light,t.color.dark];for(let g=0;g<f;g++)for(let c=0;c<f;c++){let b=(g*f+c)*4,p=t.color.light;if(g>=u&&c>=u&&g<f-u&&c<f-u){const w=Math.floor((g-u)/l),v=Math.floor((c-u)/l);p=y[s[w*i+v]?1:0]}r[b++]=p.r,r[b++]=p.g,r[b++]=p.b,r[b]=p.a}}}(ze)),ze}var kt;function lr(){return kt||(kt=1,function(e){const o=Ht();function a(n,t,i){n.clearRect(0,0,t.width,t.height),t.style||(t.style={}),t.height=i,t.width=i,t.style.height=i+"px",t.style.width=i+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}e.render=function(t,i,s){let l=s,f=i;typeof l>"u"&&(!i||!i.getContext)&&(l=i,i=void 0),i||(f=r()),l=o.getOptions(l);const u=o.getImageWidth(t.modules.size,l),y=f.getContext("2d"),g=y.createImageData(u,u);return o.qrToImageData(g.data,t,l),a(y,f,u),y.putImageData(g,0,0),f},e.renderToDataURL=function(t,i,s){let l=s;typeof l>"u"&&(!i||!i.getContext)&&(l=i,i=void 0),l||(l={});const f=e.render(t,i,l),u=l.type||"image/png",y=l.rendererOpts||{};return f.toDataURL(u,y.quality)}}(Ke)),Ke}var je={},Mt;function ur(){if(Mt)return je;Mt=1;const e=Ht();function o(n,t){const i=n.a/255,s=t+'="'+n.hex+'"';return i<1?s+" "+t+'-opacity="'+i.toFixed(2).slice(1)+'"':s}function a(n,t,i){let s=n+t;return typeof i<"u"&&(s+=" "+i),s}function r(n,t,i){let s="",l=0,f=!1,u=0;for(let y=0;y<n.length;y++){const g=Math.floor(y%t),c=Math.floor(y/t);!g&&!f&&(f=!0),n[y]?(u++,y>0&&g>0&&n[y-1]||(s+=f?a("M",g+i,.5+c+i):a("m",l,0),l=0,f=!1),g+1<t&&n[y+1]||(s+=a("h",u),u=0)):l++}return s}return je.render=function(t,i,s){const l=e.getOptions(i),f=t.modules.size,u=t.modules.data,y=f+l.margin*2,g=l.color.light.a?"<path "+o(l.color.light,"fill")+' d="M0 0h'+y+"v"+y+'H0z"/>':"",c="<path "+o(l.color.dark,"stroke")+' d="'+r(u,f,l.margin)+'"/>',b='viewBox="0 0 '+y+" "+y+'"',w='<svg xmlns="http://www.w3.org/2000/svg" '+(l.width?'width="'+l.width+'" height="'+l.width+'" ':"")+b+' shape-rendering="crispEdges">'+g+c+`</svg>
`;return typeof s=="function"&&s(null,w),w},je}var Lt;function cr(){if(Lt)return W;Lt=1;const e=zn(),o=sr(),a=lr(),r=ur();function n(t,i,s,l,f){const u=[].slice.call(arguments,1),y=u.length,g=typeof u[y-1]=="function";if(!g&&!e())throw new Error("Callback required as last argument");if(g){if(y<2)throw new Error("Too few arguments provided");y===2?(f=s,s=i,i=l=void 0):y===3&&(i.getContext&&typeof f>"u"?(f=l,l=void 0):(f=l,l=s,s=i,i=void 0))}else{if(y<1)throw new Error("Too few arguments provided");return y===1?(s=i,i=l=void 0):y===2&&!i.getContext&&(l=s,s=i,i=void 0),new Promise(function(c,b){try{const p=o.create(s,l);c(t(p,i,l))}catch(p){b(p)}})}try{const c=o.create(s,l);f(null,t(c,i,l))}catch(c){f(c)}}return W.create=o.create,W.toCanvas=n.bind(null,a.render),W.toDataURL=n.bind(null,a.renderToDataURL),W.toString=n.bind(null,function(t,i,s){return r.render(t,s)}),W}var dr=cr();const fr=Kn(dr),hr={class:"tw-container tw-max-w-screen-xl tw-mx-auto"},gr={class:"row q-col-gutter-md"},mr={class:"col-12 col-md-8"},pr={class:"col-12 col-sm-6"},vr={class:"col-12 col-sm-6"},wr={class:"col-12"},yr={class:"col-12"},Cr={key:0,class:"text-warning text-xs"},br={class:"col-12"},Er={class:"col-6"},Sr={class:"col-6"},Pr={key:1},Br={key:0,class:"q-mt-lg"},Ar={class:"col-12 col-md-4"},Nr={class:"tw-text-xl tw-mb-4"},Oe=!0,qr=yn({__name:"CheckoutPage",setup(e){Cn(m=>({"851bf5bc":u.value,"1eea3b8e":y.value}));const o=bn(),a=En(),r=Sn(),{t:n}=Pn(),t=F(1),i=F("card"),s=F({firstName:"",lastName:"",email:"",address:""}),l=F({cardNumber:"",expiry:"",cvv:""}),f=F(null),u=k(()=>o.dark.isActive?"white":"black"),y=k(()=>o.dark.isActive?"black":"white"),g=k(()=>a.items.reduce((m,h)=>m+h.price*h.quantity,0)),c="160600000075936693",b={id:Math.floor(Math.random()*1e3),items:a.items,total:g.value,firstName:s.value.firstName,lastName:s.value.lastName,email:s.value.email,address:s.value.address,cardNumber:l.value.cardNumber,cvv:l.value.cvv,expiry:l.value.expiry},p=async()=>{const m="Payment for E-comm-platform",h=Math.floor(Math.random()*1e3),d=k(()=>te(g.value,"RSD").trim().replace(/\s+/,"").replace(",","").replace(".",",").replace(/(,\d{2})?$/,B=>B||",00")),q=`K:PR|V:01|C:1|P:${g.value.toFixed(2)}|S:${m}|N:E-comm-platform|I:${d.value}|R:${c}|RO:00${h}|SF:289`.trim();try{f.value=await fr.toDataURL(q)}catch(B){console.error("Error generating QR code:",B)}},w=m=>!!m||"Field is required",v=m=>/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(m)||"Invalid email",A=()=>{t.value++},E=()=>{t.value++},S=()=>{r.push("/cart")},_=()=>{o.dialog({title:n("checkout.title"),message:`
      <div class="tw-flex tw-flex-col tw-items-start full-width">
        <h6 class="q-my-none">${n("checkout.summary")}</h6>
        <p class="text-h6 q-mb-md">${n("checkout.total")}: ${te(b.total)}</p>

        <div class="q-mb-md">
          <strong>${n("checkout.shippingDetails")}:</strong>
          <p class="q-mb-none">${b.firstName} ${b.lastName}</p>
          <p class="q-mb-none">${b.email}</p>
          <p class="q-mb-none">${b.address}</p>
        </div>

        <div class="q-mb-md">
          <strong>${n("checkout.paymentInfo")}:</strong>
          <p class="q-mb-none">${n("checkout.card")}: **** **** **** ${b.cardNumber.slice(-4)}</p>
          <p class="q-mb-none">${n("checkout.expiry")}: ${b.expiry}</p>
        </div>

        <div class="q-mt-sm full-width">
          <strong>${n("checkout.items")}:</strong>
          ${b.items.map(m=>`
            <div class="q-py-sm full-width tw-flex tw-justify-between tw-items-center">
              <div class="tw-flex-shrink-0 tw-mr-32">${m.name||m.title}</div>
              <div class="tw-flex-grow tw-flex tw-justify-between tw-items-center tw-gap-2">
                <div>${m.quantity}</div> <div>${te(m.price)}</div>
              </div>
            </div>
          `).join("")}
        </div>
      </div>
    `,html:!0,persistent:!0,class:"confirm-dialog",ok:{label:n("checkout.confirmButton"),flat:!0,style:`opacity: 1 !important; box-shadow: inset 0 0 0 2px ${u.value}; color: ${y.value} !important;`,class:`bg-${u.value} lt-sm:full-width`},cancel:{label:n("checkout.cancelButton"),flat:!0,style:`opacity: 1 !important; box-shadow: inset 0 0 0 2px ${u.value}; color: ${u.value} !important;`,class:`lt-sm:full-width lt-sm:q-mt-sm tw-border-${u.value}`},style:{maxWidth:"600px",width:"95vw",margin:"0 auto"}}).onOk(()=>{a.clearCart(),r.push("/thankyou")})},P=()=>{t.value++};return Vt(()=>{p()}),(m,h)=>(z(),we(Tn,{padding:""},{default:L(()=>[V("div",hr,[V("div",gr,[V("div",mr,[R(Qn,{modelValue:t.value,"onUpdate:modelValue":h[9]||(h[9]=d=>t.value=d),vertical:"",class:"checkout-stepper",color:u.value,"text-color":y.value,"header-nav":""},{default:L(()=>[R(st,{name:1,title:m.$t("checkout.shipping"),icon:"local_shipping",done:t.value>1,class:"checkout-step","header-nav":!0},{default:L(()=>[R(ye,{flat:"",bordered:""},{default:L(()=>[R(Ce,null,{default:L(()=>[R(ot,{class:"row q-col-gutter-md",onSubmit:et(A,["prevent"])},{default:L(()=>[V("div",pr,[R(j,{modelValue:s.value.firstName,"onUpdate:modelValue":h[0]||(h[0]=d=>s.value.firstName=d),label:m.$t("checkout.firstName"),rules:[w]},null,8,["modelValue","label","rules"])]),V("div",vr,[R(j,{modelValue:s.value.lastName,"onUpdate:modelValue":h[1]||(h[1]=d=>s.value.lastName=d),label:m.$t("checkout.lastName"),rules:[w]},null,8,["modelValue","label","rules"])]),V("div",wr,[R(j,{modelValue:s.value.email,"onUpdate:modelValue":h[2]||(h[2]=d=>s.value.email=d),label:m.$t("checkout.email"),type:"email",rules:[w,v]},null,8,["modelValue","label","rules"])]),V("div",yr,[R(j,{modelValue:s.value.address,"onUpdate:modelValue":h[3]||(h[3]=d=>s.value.address=d),label:m.$t("checkout.address"),rules:[w]},null,8,["modelValue","label","rules"])])]),_:1})]),_:1})]),_:1})]),_:1},8,["title","done"]),R(st,{name:2,title:m.$t("checkout.payment"),icon:"payment",done:t.value>2,"header-nav":!0},{default:L(()=>[R(be,{class:"!tw-p-0"},{default:L(()=>[R(ee,{class:"tw-text-sm"},{default:L(()=>[R(tt,{modelValue:i.value,"onUpdate:modelValue":h[4]||(h[4]=d=>i.value=d),val:"card",label:m.$t("checkout.cardPayment")},null,8,["modelValue","label"]),R(tt,{modelValue:i.value,"onUpdate:modelValue":h[5]||(h[5]=d=>i.value=d),val:"ips",disable:!Oe},{default:L(()=>[V("span",null,[G(Q(m.$t("checkout.ipsScanQrCode"))+" ",1),Oe?le("",!0):(z(),ue("span",Cr," - Available only for RSD payments."))])]),_:1},8,["modelValue","disable"])]),_:1})]),_:1}),i.value==="card"?(z(),we(ye,{key:0,flat:"",bordered:""},{default:L(()=>[R(Ce,null,{default:L(()=>[R(ot,{class:"row q-col-gutter-md",onSubmit:et(E,["prevent"])},{default:L(()=>[V("div",br,[R(j,{modelValue:l.value.cardNumber,"onUpdate:modelValue":h[6]||(h[6]=d=>l.value.cardNumber=d),label:m.$t("checkout.cardNumber"),mask:"#### #### #### ####",rules:[w]},null,8,["modelValue","label","rules"])]),V("div",Er,[R(j,{modelValue:l.value.expiry,"onUpdate:modelValue":h[7]||(h[7]=d=>l.value.expiry=d),label:"MM/YY",mask:"##/##",rules:[w]},null,8,["modelValue","rules"])]),V("div",Sr,[R(j,{modelValue:l.value.cvv,"onUpdate:modelValue":h[8]||(h[8]=d=>l.value.cvv=d),label:"CVV",mask:"###",rules:[w]},null,8,["modelValue","rules"])])]),_:1})]),_:1})]),_:1})):le("",!0),Oe&&i.value==="ips"?(z(),ue("div",Pr,[f.value?(z(),ue("div",Br,[R(Rn,{src:f.value,alt:"QR Code for Payment",fit:"contain",class:"tw-w-48 tw-h-48"},null,8,["src"])])):le("",!0)])):le("",!0)]),_:1},8,["title","done"])]),_:1},8,["modelValue","color","text-color"])]),V("div",Ar,[R(ye,{class:"tw-flex tw-justify-between"},{default:L(()=>[R(Ce,{class:"tw-w-full"},{default:L(()=>[V("div",Nr,Q(m.$t("checkout.orderSummary")),1),R(Bn,{dense:"",class:"tw-w-full tw-flex tw-flex-col tw-justify-between"},{default:L(()=>[(z(!0),ue(Nn,null,An(Ee(a).items,d=>(z(),we(be,{key:d.id,class:"tw-justify-between"},{default:L(()=>[R(ee,null,{default:L(()=>[R(rt,null,{default:L(()=>[G(Q(d.name||d.title),1)]),_:2},1024),R(rt,{caption:""},{default:L(()=>[G(Q(m.$t("checkout.qty"))+": "+Q(d.quantity),1)]),_:2},1024)]),_:2},1024),R(ee,{side:""},{default:L(()=>[G(Q(Ee(te)(d.price*d.quantity)),1)]),_:2},1024)]),_:2},1024))),128)),R(qn,{class:"q-my-md"}),R(be,null,{default:L(()=>[R(ee,{class:"text-subtitle1 text-weight-bold"},{default:L(()=>[G(Q(m.$t("checkout.total")),1)]),_:1}),R(ee,{side:"",class:"text-subtitle1 text-weight-bold tw-text-"},{default:L(()=>[G(Q(Ee(te)(g.value)),1)]),_:1})]),_:1})]),_:1})]),_:1}),R(In,{align:"center"},{default:L(()=>[R(nt,{color:u.value,"text-color":y.value,label:t.value===2?m.$t("checkout.placeOrder"):m.$t("checkout.continue"),class:"full-width tw-mb-2",onClick:h[10]||(h[10]=d=>t.value===2?_():P())},null,8,["color","text-color","label"]),R(nt,{color:y.value,"text-color":u.value,label:m.$t("checkout.cart"),class:"full-width",onClick:h[11]||(h[11]=d=>S())},null,8,["color","text-color","label"])]),_:1})]),_:1})])])])]),_:1}))}}),kr=_n(qr,[["__scopeId","data-v-b615bfe4"]]);export{kr as default};
