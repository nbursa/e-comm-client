import{p as we,a7 as tt,aB as at,a8 as lt,c as i,q as x,aC as nt,a1 as z,aD as Le,aE as ot,aF as De,B,ac as rt,D as xe,k as Ee,d as ve,o as L,a as te,w as oe,ah as Ce,h as Z,t as ee,e as U,Q as it,f as X,j as ut,F as ie,g as me,ag as st,aG as ct,l as dt,a4 as ke,a5 as be,aH as Fe,J as Oe,A as je,L as vt,R as ft,aI as gt,G as mt,K as ce,a9 as bt,aJ as he,a0 as Ve,aK as ht,v as yt,y as Ct,z as wt,aL as xt,C as kt,r as Te,aM as Tt,aj as Qe,n as St,_ as Pt,ak as qt,al as $t,ab as Bt,aN as _e,aO as At,ao as pt,aP as It}from"./index-D4xUG4uP.js";import{Q as Lt}from"./QPage-pmDv6aKN.js";import{u as Vt}from"./products-BZOD4RJq.js";import{Q as _t}from"./QImg-BQ3WR208.js";import{f as ye}from"./currency-DilllrcX.js";import{api as Re}from"./axios-BNnHKsoi.js";import"./rates-B5s1l_ys.js";function se(e,P){return[!0,!1].includes(e)?e:P}const Rt=we({name:"QPagination",props:{...tt,modelValue:{type:Number,required:!0},min:{type:[Number,String],default:1},max:{type:[Number,String],required:!0},maxPages:{type:[Number,String],default:0,validator:e=>(typeof e=="string"?parseInt(e,10):e)>=0},inputStyle:[Array,String,Object],inputClass:[Array,String,Object],size:String,disable:Boolean,input:Boolean,iconPrev:String,iconNext:String,iconFirst:String,iconLast:String,toFn:Function,boundaryLinks:{type:Boolean,default:null},boundaryNumbers:{type:Boolean,default:null},directionLinks:{type:Boolean,default:null},ellipses:{type:Boolean,default:null},ripple:{type:[Boolean,Object],default:null},round:Boolean,rounded:Boolean,flat:Boolean,outline:Boolean,unelevated:Boolean,push:Boolean,glossy:Boolean,color:{type:String,default:"primary"},textColor:String,activeDesign:{type:String,default:"",values:e=>e===""||at.includes(e)},activeColor:String,activeTextColor:String,gutter:String,padding:{type:String,default:"3px 2px"}},emits:["update:modelValue"],setup(e,{emit:P}){const{proxy:k}=xe(),{$q:s}=k,u=lt(e,s),d=i(()=>parseInt(e.min,10)),o=i(()=>parseInt(e.max,10)),h=i(()=>parseInt(e.maxPages,10)),v=i(()=>q.value+" / "+o.value),V=i(()=>se(e.boundaryLinks,e.input)),b=i(()=>se(e.boundaryNumbers,!e.input)),y=i(()=>se(e.directionLinks,e.input)),r=i(()=>se(e.ellipses,!e.input)),w=x(null),q=i({get:()=>e.modelValue,set:f=>{if(f=parseInt(f,10),e.disable||isNaN(f))return;const n=nt(f,d.value,o.value);e.modelValue!==n&&P("update:modelValue",n)}});z(()=>`${d.value}|${o.value}`,()=>{q.value=e.modelValue});const O=i(()=>"q-pagination row no-wrap items-center"+(e.disable===!0?" disabled":"")),A=i(()=>e.gutter in Le?`${Le[e.gutter]}px`:e.gutter||null),K=i(()=>A.value!==null?`--q-pagination-gutter-parent:-${A.value};--q-pagination-gutter-child:${A.value}`:null),j=i(()=>{const f=[e.iconFirst||s.iconSet.pagination.first,e.iconPrev||s.iconSet.pagination.prev,e.iconNext||s.iconSet.pagination.next,e.iconLast||s.iconSet.pagination.last];return s.lang.rtl===!0?f.reverse():f}),g=i(()=>({"aria-disabled":e.disable===!0?"true":"false",role:"navigation"})),$=i(()=>ot(e,"flat")),M=i(()=>({[$.value]:!0,round:e.round,rounded:e.rounded,padding:e.padding,color:e.color,textColor:e.textColor,size:e.size,ripple:e.ripple!==null?e.ripple:!0})),_=i(()=>{const f={[$.value]:!1};return e.activeDesign!==""&&(f[e.activeDesign]=!0),f}),D=i(()=>({..._.value,color:e.activeColor||e.color,textColor:e.activeTextColor||e.textColor})),l=i(()=>{let f=Math.max(h.value,1+(r.value?2:0)+(b.value?2:0));const n={pgFrom:d.value,pgTo:o.value,ellipsesStart:!1,ellipsesEnd:!1,boundaryStart:!1,boundaryEnd:!1,marginalStyle:{minWidth:`${Math.max(2,String(o.value).length)}em`}};return h.value&&f<o.value-d.value+1&&(f=1+Math.floor(f/2)*2,n.pgFrom=Math.max(d.value,Math.min(o.value-f+1,e.modelValue-Math.floor(f/2))),n.pgTo=Math.min(o.value,n.pgFrom+f-1),b.value&&(n.boundaryStart=!0,n.pgFrom++),r.value&&n.pgFrom>d.value+(b.value?1:0)&&(n.ellipsesStart=!0,n.pgFrom++),b.value&&(n.boundaryEnd=!0,n.pgTo--),r.value&&n.pgTo<o.value-(b.value?1:0)&&(n.ellipsesEnd=!0,n.pgTo--)),n});function p(f){q.value=f}function Q(f){q.value=q.value+f}const G=i(()=>{function f(){q.value=w.value,w.value=null}return{"onUpdate:modelValue":n=>{w.value=n},onKeyup:n=>{De(n,13)===!0&&f()},onBlur:f}});function E(f,n,R){const N={"aria-label":n,"aria-current":"false",...M.value,...f};return R===!0&&Object.assign(N,{"aria-current":"true",...D.value}),n!==void 0&&(e.toFn!==void 0?N.to=e.toFn(n):N.onClick=()=>{p(n)}),B(Ee,N)}return Object.assign(k,{set:p,setByOffset:Q}),()=>{const f=[],n=[];let R;if(V.value===!0&&(f.push(E({key:"bls",disable:e.disable||e.modelValue<=d.value,icon:j.value[0]},d.value)),n.unshift(E({key:"ble",disable:e.disable||e.modelValue>=o.value,icon:j.value[3]},o.value))),y.value===!0&&(f.push(E({key:"bdp",disable:e.disable||e.modelValue<=d.value,icon:j.value[1]},e.modelValue-1)),n.unshift(E({key:"bdn",disable:e.disable||e.modelValue>=o.value,icon:j.value[2]},e.modelValue+1))),e.input!==!0){R=[];const{pgFrom:N,pgTo:ae,marginalStyle:H}=l.value;if(l.value.boundaryStart===!0){const F=d.value===e.modelValue;f.push(E({key:"bns",style:H,disable:e.disable,label:d.value},d.value,F))}if(l.value.boundaryEnd===!0){const F=o.value===e.modelValue;n.unshift(E({key:"bne",style:H,disable:e.disable,label:o.value},o.value,F))}l.value.ellipsesStart===!0&&f.push(E({key:"bes",style:H,disable:e.disable,label:"…",ripple:!1},N-1)),l.value.ellipsesEnd===!0&&n.unshift(E({key:"bee",style:H,disable:e.disable,label:"…",ripple:!1},ae+1));for(let F=N;F<=ae;F++)R.push(E({key:`bpg${F}`,style:H,disable:e.disable,label:F},F,F===e.modelValue))}return B("div",{class:O.value,...g.value},[B("div",{class:"q-pagination__content row no-wrap items-center",style:K.value},[...f,e.input===!0?B(rt,{class:"inline",style:{width:`${v.value.length/1.5}em`},type:"number",dense:!0,value:w.value,disable:e.disable,dark:u.value,borderless:!0,inputClass:e.inputClass,inputStyle:e.inputStyle,placeholder:v.value,min:d.value,max:o.value,...G.value}):B("div",{class:"q-pagination__middle row justify-center"},R),...n])])}}}),Mt={class:"text-bold"},Dt={class:"text-caption"},Et={class:"q-mt-sm text-bold price-text"},Ft={class:"text-grey"},Ot={class:"text-positive q-ml-sm"},jt=ve({__name:"ProductCard",props:{product:{type:Object,required:!0},color:{type:String,default:"primary"},text:{type:String,default:"white"}},emits:["add-to-cart","view-product"],setup(e,{emit:P}){const k=e,s=P,u=x(null),d=x(null),o=y=>{s("add-to-cart",y)},h=y=>{s("view-product",y)},v=y=>y,V=()=>{u.value&&d.value&&(d.value.style.height=`${u.value.clientHeight}px`)},b=y=>{const r=y.match(/[^.!?]*[.!?]/);return r?r[0]:y};return z(()=>k.product.image,()=>{V()}),(y,r)=>(L(),te(dt,{bordered:"",class:"product tw-w-full tw-max-w-72 tw-mx-auto !tw-bg-primary sm:tw-mx-none tw-transition tw-duration-200 tw-ease-in-out hover:tw-cursor-pointer hover:tw-scale-105 tw-shadow-none",onClick:r[1]||(r[1]=w=>h(e.product))},{default:oe(()=>[e.product.image?(L(),te(_t,{key:0,ref_key:"imageSection",ref:u,src:v(e.product.image),alt:e.product.name,fit:"contain",class:"sm:tw-h-2/3 tw-w-full tw-max-h-1.5"},null,8,["src","alt"])):Ce("",!0),e.product.image?Ce("",!0):(L(),Z("div",{key:1,ref_key:"noImageSection",ref:d,class:"tw-p-1.5 tw-flex tw-items-center tw-justify-center tw-min-h-64 tw-w-full tw-max-h-1.5"},ee(y.$t("products.noImage")),513)),U(it,{class:"q-px-sm !tw-pb-0"},{default:oe(()=>[X("div",Mt,ee(e.product.name||e.product.title),1),X("div",Dt,ee(b(e.product.description)),1)]),_:1}),U(ut,{class:"row justify-between items-center !tw-pt-0"},{default:oe(()=>[X("div",Et,[e.product.discount?(L(),Z(ie,{key:0},[X("span",Ft,ee(me(ye)(e.product.price)),1),X("span",Ot,ee(me(ye)(e.product.discountedPrice||e.product.price)),1)],64)):(L(),Z(ie,{key:1},[st(ee(me(ye)(e.product.price)),1)],64))]),U(Ee,{color:e.color,"text-color":e.text,label:y.$t("products.addToCart"),class:"full-width q-mt-md !tw-py-4",onClick:r[0]||(r[0]=ct(w=>o(e.product),["stop"]))},null,8,["color","text-color","label"])]),_:1})]),_:1}))}});let Qt=0;const Nt=["click","keydown"],Ut={icon:String,label:[Number,String],alert:[Boolean,String],alertIcon:String,name:{type:[Number,String],default:()=>`t_${Qt++}`},noCaps:Boolean,tabindex:[String,Number],disable:Boolean,contentClass:String,ripple:{type:[Boolean,Object],default:!0}};function Kt(e,P,k,s){const u=ke(Fe,be);if(u===be)return console.error("QTab/QRouteTab component needs to be child of QTabs"),be;const{proxy:d}=xe(),o=x(null),h=x(null),v=x(null),V=i(()=>e.disable===!0||e.ripple===!1?!1:Object.assign({keyCodes:[13,32],early:!0},e.ripple===!0?{}:e.ripple)),b=i(()=>u.currentModel.value===e.name),y=i(()=>"q-tab relative-position self-stretch flex flex-center text-center"+(b.value===!0?" q-tab--active"+(u.tabProps.value.activeClass?" "+u.tabProps.value.activeClass:"")+(u.tabProps.value.activeColor?` text-${u.tabProps.value.activeColor}`:"")+(u.tabProps.value.activeBgColor?` bg-${u.tabProps.value.activeBgColor}`:""):" q-tab--inactive")+(e.icon&&e.label&&u.tabProps.value.inlineLabel===!1?" q-tab--full":"")+(e.noCaps===!0||u.tabProps.value.noCaps===!0?" q-tab--no-caps":"")+(e.disable===!0?" disabled":" q-focusable q-hoverable cursor-pointer")),r=i(()=>"q-tab__content self-stretch flex-center relative-position q-anchor--skip non-selectable "+(u.tabProps.value.inlineLabel===!0?"row no-wrap q-tab__content--inline":"column")+(e.contentClass!==void 0?` ${e.contentClass}`:"")),w=i(()=>e.disable===!0||u.hasFocus.value===!0||b.value===!1&&u.hasActiveTab.value===!0?-1:e.tabindex||0);function q(g,$){if($!==!0&&o.value!==null&&o.value.focus(),e.disable!==!0){u.updateModel({name:e.name}),k("click",g);return}}function O(g){De(g,[13,32])?q(g,!0):gt(g)!==!0&&g.keyCode>=35&&g.keyCode<=40&&g.altKey!==!0&&g.metaKey!==!0&&u.onKbdNavigate(g.keyCode,d.$el)===!0&&mt(g),k("keydown",g)}function A(){const g=u.tabProps.value.narrowIndicator,$=[],M=B("div",{ref:v,class:["q-tab__indicator",u.tabProps.value.indicatorClass]});e.icon!==void 0&&$.push(B(ce,{class:"q-tab__icon",name:e.icon})),e.label!==void 0&&$.push(B("div",{class:"q-tab__label"},e.label)),e.alert!==!1&&$.push(e.alertIcon!==void 0?B(ce,{class:"q-tab__alert-icon",color:e.alert!==!0?e.alert:void 0,name:e.alertIcon}):B("div",{class:"q-tab__alert"+(e.alert!==!0?` text-${e.alert}`:"")})),g===!0&&$.push(M);const _=[B("div",{class:"q-focus-helper",tabindex:-1,ref:o}),B("div",{class:r.value},bt(P.default,$))];return g===!1&&_.push(M),_}const K={name:i(()=>e.name),rootRef:h,tabIndicatorRef:v,routeData:s};Oe(()=>{u.unregisterTab(K)}),je(()=>{u.registerTab(K)});function j(g,$){const M={ref:h,class:y.value,tabindex:w.value,role:"tab","aria-selected":b.value===!0?"true":"false","aria-disabled":e.disable===!0?"true":void 0,onClick:q,onKeydown:O,...$};return vt(B(g,M,A()),[[ft,V.value]])}return{renderTab:j,$tabs:u}}const de=we({name:"QTab",props:Ut,emits:Nt,setup(e,{slots:P,emit:k}){const{renderTab:s}=Kt(e,P,k);return()=>s("div")}});function Ht(e,P,k){const s=k===!0?["left","right"]:["top","bottom"];return`absolute-${P===!0?s[0]:s[1]}${e?` text-${e}`:""}`}const zt=["left","center","right","justify"],Ne=we({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:e=>zt.includes(e)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(e,{slots:P,emit:k}){const{proxy:s}=xe(),{$q:u}=s,{registerTick:d}=he(),{registerTick:o}=he(),{registerTick:h}=he(),{registerTimeout:v,removeTimeout:V}=Ve(),{registerTimeout:b,removeTimeout:y}=Ve(),r=x(null),w=x(null),q=x(e.modelValue),O=x(!1),A=x(!0),K=x(!1),j=x(!1),g=[],$=x(0),M=x(!1);let _=null,D=null,l;const p=i(()=>({activeClass:e.activeClass,activeColor:e.activeColor,activeBgColor:e.activeBgColor,indicatorClass:Ht(e.indicatorColor,e.switchIndicator,e.vertical),narrowIndicator:e.narrowIndicator,inlineLabel:e.inlineLabel,noCaps:e.noCaps})),Q=i(()=>{const t=$.value,a=q.value;for(let c=0;c<t;c++)if(g[c].name.value===a)return!0;return!1}),G=i(()=>`q-tabs__content--align-${O.value===!0?"left":j.value===!0?"justify":e.align}`),E=i(()=>`q-tabs row no-wrap items-center q-tabs--${O.value===!0?"":"not-"}scrollable q-tabs--${e.vertical===!0?"vertical":"horizontal"} q-tabs__arrows--${e.outsideArrows===!0?"outside":"inside"} q-tabs--mobile-with${e.mobileArrows===!0?"":"out"}-arrows`+(e.dense===!0?" q-tabs--dense":"")+(e.shrink===!0?" col-shrink":"")+(e.stretch===!0?" self-stretch":"")),f=i(()=>"q-tabs__content scroll--mobile row no-wrap items-center self-stretch hide-scrollbar relative-position "+G.value+(e.contentClass!==void 0?` ${e.contentClass}`:"")),n=i(()=>e.vertical===!0?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}),R=i(()=>e.vertical!==!0&&u.lang.rtl===!0),N=i(()=>ht===!1&&R.value===!0);z(R,ne),z(()=>e.modelValue,t=>{ae({name:t,setCurrent:!0,skipEmit:!0})}),z(()=>e.outsideArrows,H);function ae({name:t,setCurrent:a,skipEmit:c}){q.value!==t&&(c!==!0&&e["onUpdate:modelValue"]!==void 0&&k("update:modelValue",t),(a===!0||e["onUpdate:modelValue"]===void 0)&&(Ue(q.value,t),q.value=t))}function H(){d(()=>{r.value&&F({width:r.value.offsetWidth,height:r.value.offsetHeight})})}function F(t){if(n.value===void 0||w.value===null)return;const a=t[n.value.container],c=Math.min(w.value[n.value.scroll],Array.prototype.reduce.call(w.value.children,(S,C)=>S+(C[n.value.content]||0),0)),T=a>0&&c>a;O.value=T,T===!0&&o(ne),j.value=a<parseInt(e.breakpoint,10)}function Ue(t,a){const c=t!=null&&t!==""?g.find(S=>S.name.value===t):null,T=a!=null&&a!==""?g.find(S=>S.name.value===a):null;if(ue===!0)ue=!1;else if(c&&T){const S=c.tabIndicatorRef.value,C=T.tabIndicatorRef.value;_!==null&&(clearTimeout(_),_=null),S.style.transition="none",S.style.transform="none",C.style.transition="none",C.style.transform="none";const m=S.getBoundingClientRect(),I=C.getBoundingClientRect();C.style.transform=e.vertical===!0?`translate3d(0,${m.top-I.top}px,0) scale3d(1,${I.height?m.height/I.height:1},1)`:`translate3d(${m.left-I.left}px,0,0) scale3d(${I.width?m.width/I.width:1},1,1)`,h(()=>{_=setTimeout(()=>{_=null,C.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",C.style.transform="none"},70)})}T&&O.value===!0&&le(T.rootRef.value)}function le(t){const{left:a,width:c,top:T,height:S}=w.value.getBoundingClientRect(),C=t.getBoundingClientRect();let m=e.vertical===!0?C.top-T:C.left-a;if(m<0){w.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.floor(m),ne();return}m+=e.vertical===!0?C.height-S:C.width-c,m>0&&(w.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.ceil(m),ne())}function ne(){const t=w.value;if(t===null)return;const a=t.getBoundingClientRect(),c=e.vertical===!0?t.scrollTop:Math.abs(t.scrollLeft);R.value===!0?(A.value=Math.ceil(c+a.width)<t.scrollWidth-1,K.value=c>0):(A.value=c>0,K.value=e.vertical===!0?Math.ceil(c+a.height)<t.scrollHeight:Math.ceil(c+a.width)<t.scrollWidth)}function Se(t){D!==null&&clearInterval(D),D=setInterval(()=>{ze(t)===!0&&Y()},5)}function Pe(){Se(N.value===!0?Number.MAX_SAFE_INTEGER:0)}function qe(){Se(N.value===!0?0:Number.MAX_SAFE_INTEGER)}function Y(){D!==null&&(clearInterval(D),D=null)}function Ke(t,a){const c=Array.prototype.filter.call(w.value.children,I=>I===a||I.matches&&I.matches(".q-tab.q-focusable")===!0),T=c.length;if(T===0)return;if(t===36)return le(c[0]),c[0].focus(),!0;if(t===35)return le(c[T-1]),c[T-1].focus(),!0;const S=t===(e.vertical===!0?38:37),C=t===(e.vertical===!0?40:39),m=S===!0?-1:C===!0?1:void 0;if(m!==void 0){const I=R.value===!0?-1:1,W=c.indexOf(a)+m*I;return W>=0&&W<T&&(le(c[W]),c[W].focus({preventScroll:!0})),!0}}const He=i(()=>N.value===!0?{get:t=>Math.abs(t.scrollLeft),set:(t,a)=>{t.scrollLeft=-a}}:e.vertical===!0?{get:t=>t.scrollTop,set:(t,a)=>{t.scrollTop=a}}:{get:t=>t.scrollLeft,set:(t,a)=>{t.scrollLeft=a}});function ze(t){const a=w.value,{get:c,set:T}=He.value;let S=!1,C=c(a);const m=t<C?-1:1;return C+=m*5,C<0?(S=!0,C=0):(m===-1&&C<=t||m===1&&C>=t)&&(S=!0,C=t),T(a,C),ne(),S}function $e(t,a){for(const c in t)if(t[c]!==a[c])return!1;return!0}function We(){let t=null,a={matchedLen:0,queryDiff:9999,hrefLen:0};const c=g.filter(m=>m.routeData!==void 0&&m.routeData.hasRouterLink.value===!0),{hash:T,query:S}=s.$route,C=Object.keys(S).length;for(const m of c){const I=m.routeData.exact.value===!0;if(m.routeData[I===!0?"linkIsExactActive":"linkIsActive"].value!==!0)continue;const{hash:W,query:fe,matched:Ze,href:et}=m.routeData.resolvedLink.value,ge=Object.keys(fe).length;if(I===!0){if(W!==T||ge!==C||$e(S,fe)===!1)continue;t=m.name.value;break}if(W!==""&&W!==T||ge!==0&&$e(fe,S)===!1)continue;const J={matchedLen:Ze.length,queryDiff:C-ge,hrefLen:et.length-W.length};if(J.matchedLen>a.matchedLen){t=m.name.value,a=J;continue}else if(J.matchedLen!==a.matchedLen)continue;if(J.queryDiff<a.queryDiff)t=m.name.value,a=J;else if(J.queryDiff!==a.queryDiff)continue;J.hrefLen>a.hrefLen&&(t=m.name.value,a=J)}if(t===null&&g.some(m=>m.routeData===void 0&&m.name.value===q.value)===!0){ue=!1;return}ae({name:t,setCurrent:!0})}function Ge(t){if(V(),M.value!==!0&&r.value!==null&&t.target&&typeof t.target.closest=="function"){const a=t.target.closest(".q-tab");a&&r.value.contains(a)===!0&&(M.value=!0,O.value===!0&&le(a))}}function Ye(){v(()=>{M.value=!1},30)}function re(){Ae.avoidRouteWatcher===!1?b(We):y()}function Be(){if(l===void 0){const t=z(()=>s.$route.fullPath,re);l=()=>{t(),l=void 0}}}function Je(t){g.push(t),$.value++,H(),t.routeData===void 0||s.$route===void 0?b(()=>{if(O.value===!0){const a=q.value,c=a!=null&&a!==""?g.find(T=>T.name.value===a):null;c&&le(c.rootRef.value)}}):(Be(),t.routeData.hasRouterLink.value===!0&&re())}function Xe(t){g.splice(g.indexOf(t),1),$.value--,H(),l!==void 0&&t.routeData!==void 0&&(g.every(a=>a.routeData===void 0)===!0&&l(),re())}const Ae={currentModel:q,tabProps:p,hasFocus:M,hasActiveTab:Q,registerTab:Je,unregisterTab:Xe,verifyRouteModel:re,updateModel:ae,onKbdNavigate:Ke,avoidRouteWatcher:!1};yt(Fe,Ae);function pe(){_!==null&&clearTimeout(_),Y(),l!==void 0&&l()}let Ie,ue;return Oe(pe),Ct(()=>{Ie=l!==void 0,pe()}),wt(()=>{Ie===!0&&(Be(),ue=!0,re()),H()}),()=>B("div",{ref:r,class:E.value,role:"tablist",onFocusin:Ge,onFocusout:Ye},[B(xt,{onResize:F}),B("div",{ref:w,class:f.value,onScroll:ne},kt(P.default)),B(ce,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+(A.value===!0?"":" q-tabs__arrow--faded"),name:e.leftIcon||u.iconSet.tabs[e.vertical===!0?"up":"left"],onMousedownPassive:Pe,onTouchstartPassive:Pe,onMouseupPassive:Y,onMouseleavePassive:Y,onTouchendPassive:Y}),B(ce,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+(K.value===!0?"":" q-tabs__arrow--faded"),name:e.rightIcon||u.iconSet.tabs[e.vertical===!0?"down":"right"],onMousedownPassive:qe,onTouchstartPassive:qe,onMouseupPassive:Y,onMouseleavePassive:Y,onTouchendPassive:Y})])}}),Wt=ve({__name:"CategorySelect",props:{selectedCategory:{type:String,required:!0},categories:{type:Array,required:!0},color:{type:String,required:!0},text:{type:String,required:!0}},emits:["update:selectedCategory"],setup(e,{emit:P}){const k=e,s=P,u=i({get:()=>k.selectedCategory,set:o=>{s("update:selectedCategory",o)}}),d=o=>o?o.split(" ").map(h=>h.charAt(0).toUpperCase()+h.slice(1)).join(" "):"";return(o,h)=>(L(),Z("div",null,[U(Ne,{modelValue:u.value,"onUpdate:modelValue":h[0]||(h[0]=v=>u.value=v),class:"q-mb-md gt-sm","active-color":e.color,"active-bg-color":e.color,"text-color":e.color,"inactive-color":e.color,align:"justify"},{default:oe(()=>[U(de,{name:"all",label:o.$t("products.categories.allProducts")},null,8,["label"]),(L(!0),Z(ie,null,Te(e.categories,v=>(L(),te(de,{key:v,name:v,label:d(v)},null,8,["name","label"]))),128))]),_:1},8,["modelValue","active-color","active-bg-color","text-color","inactive-color"]),U(Tt,{modelValue:u.value,"onUpdate:modelValue":h[1]||(h[1]=v=>u.value=v),options:["all",...e.categories],class:"q-my-md lt-md",color:e.color,"text-color":e.text,label:o.$t("products.selectCategory"),outlined:"","option-label":v=>v==="all"?o.$t("products.categories.allProducts"):d(v)},null,8,["modelValue","options","color","text-color","label","option-label"])]))}}),Gt=ve({__name:"ProductTabs",props:{selectedCategory:{type:String,required:!0},scrollOffset:{type:Number,default:0},categories:{type:Array,required:!0}},emits:["update:selectedCategory"],setup(e,{emit:P}){const k=e,s=ke("scrollToTop"),u=P,d=Qe(),o=x(!1),h=x(k.selectedCategory),v=i(()=>({stickyBgColor:d.dark.isActive?"q-dark":"q-light-lighter",activeBgColor:(d.dark.isActive,"white"),activeTextColor:d.dark.isActive?"dark":"black",backgroundColor:d.dark.isActive?"white":"black",textColor:d.dark.isActive?"black":"white"}));z(()=>k.scrollOffset,b=>{o.value=b>0},{immediate:!0}),z(()=>k.selectedCategory,b=>{b!==h.value&&(h.value=b)}),z(()=>h.value,b=>{u("update:selectedCategory",b),s()});const V=b=>b.split(" ").map(y=>y.charAt(0).toUpperCase()+y.slice(1)).join(" ");return(b,y)=>(L(),Z("div",{class:St(["sticky",{"is-sticky":o.value},o.value&&`tw-bg-${v.value.stickyBgColor}`])},[U(Ne,{modelValue:h.value,"onUpdate:modelValue":y[0]||(y[0]=r=>h.value=r),"indicator-color":"transparent",class:"gt-sm !tw-max-w-screen-xl tw-mx-auto","active-color":v.value.activeTextColor,"active-bg-color":v.value.activeBgColor,"text-color":v.value.backgroundColor,"inactive-color":v.value.textColor,align:"justify"},{default:oe(()=>[U(de,{name:"all",label:b.$t("products.categories.allProducts")},null,8,["label"]),(L(!0),Z(ie,null,Te(e.categories,r=>(L(),te(de,{key:r,name:r,label:V(r)},null,8,["name","label"]))),128))]),_:1},8,["modelValue","active-color","active-bg-color","text-color","inactive-color"]),U(Wt,{"selected-category":h.value,"onUpdate:selectedCategory":y[1]||(y[1]=r=>h.value=r),categories:e.categories,color:v.value.backgroundColor,text:v.value.textColor,class:"q-my-md lt-md"},null,8,["selected-category","categories","color","text"])],2))}}),Yt=Pt(Gt,[["__scopeId","data-v-8ab3e7da"]]),Jt={class:"tw-font-serif tw-my-4"},Xt={class:"tw-container tw-mx-auto tw-mb-8 grid justify-center"},Zt={class:"tw-grid tw-grid-cols-1 md:tw-grid-cols-2 lg:tw-grid-cols-3 xl:tw-grid-cols-4 tw-gap-4"},ea="products_categories",Me=10,ua=ve({__name:"ProductsPage",props:{scrollOffset:{type:Number,required:!0}},setup(e){const P=ke("scrollToTop"),k=qt(),s=Qe(),u=$t(),d=Vt(),{t:o}=Bt(),h=x([]),v=x(1),V=x("all"),b=x([]),y=x(!0),r=x({search:"",minPrice:0,maxPrice:999999,sortBy:"id",sortOrder:"asc"}),w=x({total:0,page:1,limit:10,lastPage:1}),q=i(()=>Math.ceil(w.value.total/w.value.limit)),O=i(()=>h.value),A=i(()=>({activeTextColor:s.dark.isActive?"dark":"black",backgroundColor:s.dark.isActive?"white":"black",textColor:s.dark.isActive?"black":"white",paginationColor:s.dark.isActive?"light":"dark",paginationTextColor:s.dark.isActive?"white":"black",paginationActiveColor:s.dark.isActive?"white":"dark",paginationActiveTextColor:s.dark.isActive?"black":"white"}));z(r,()=>{v.value=1,D(V.value)},{deep:!0});const K=l=>{k.addItem({...l,quantity:1}),s.notify({color:"positive",position:"top",timeout:1e3,message:o("products.itemAdded"),icon:"check_circle"})},j=l=>{u.push(`${_e}/${l.id}`)},g=l=>{v.value=l,P(),D(V.value)},$=async l=>{V.value=l,v.value=1,await D(l)},M=async()=>{try{if(y.value=!0,d.isCacheValid(ea)){const p=d.getCategoryCache();if(p){b.value=p.categories;return}}const l=await Re.get(`http://localhost:8080/api${It}`);if(l.status!==200)throw new Error("Failed to fetch categories");b.value=l.data,d.setCategoryCache(b.value)}catch(l){console.error("Error fetching categories:",l)}finally{y.value=!1}},_=l=>`products_${l.category}_${l.page}_${l.limit}_${l.search}_${l.minPrice}_${l.maxPrice}_${l.sortBy}_${l.sortOrder}`,D=async(l="all")=>{s.loading.show();try{const p={category:l,page:v.value,limit:Me,search:r.value.search,minPrice:r.value.minPrice,maxPrice:r.value.maxPrice,sortBy:r.value.sortBy,sortOrder:r.value.sortOrder},Q=_(p),G=d.getCache(Q);if(G?.meta&&G?.data){h.value=G.data,w.value=G.meta,s.loading.hide();return}const E=new URLSearchParams({page:v.value.toString(),limit:Me.toString(),search:r.value.search,minPrice:r.value.minPrice.toString(),maxPrice:r.value.maxPrice.toString(),sortBy:r.value.sortBy,sortOrder:r.value.sortOrder}),f=`http://localhost:8080/api${_e}${l!=="all"?`${At}/${l}`:""}?${E}`,n=await Re.get(f,{params:p});if(n.status!==200)throw new Error("Failed to fetch products");if(n&&n.data){const R=n.data;h.value=R.data,w.value=R.meta,d.setCache(R,Q)}}catch(p){console.error("Error fetching products:",p),s.notify({color:"negative",message:o("errors.fetchProducts"),timeout:1e3,icon:"error",position:"top"})}finally{s.loading.hide()}};return je(async()=>{await Promise.all([M(),D()])}),(l,p)=>(L(),te(Lt,{padding:"",class:"!tw-pb-16 !tw-pt-4"},{default:oe(()=>[X("h5",Jt,ee(l.$t("products.title")),1),U(Yt,{"selected-category":V.value,categories:b.value,"scroll-offset":e.scrollOffset,"onUpdate:selectedCategory":$},null,8,["selected-category","categories","scroll-offset"]),U(pt,{class:"q-my-md"}),X("div",Xt,[X("div",Zt,[(L(!0),Z(ie,null,Te(O.value,Q=>(L(),te(jt,{key:Q.id,product:Q,color:A.value.backgroundColor,text:A.value.textColor,onAddToCart:K,onViewProduct:j},null,8,["product","color","text"]))),128))])]),w.value.total>0?(L(),te(Rt,{key:0,modelValue:v.value,"onUpdate:modelValue":[p[0]||(p[0]=Q=>v.value=Q),g],max:q.value,"boundary-numbers":"",class:"tw-py-8 tw-flex tw-justify-center tw-items-center !tw-gap-8",color:A.value.paginationColor,"text-color":A.value.paginationTextColor,"active-color":A.value.paginationActiveColor,"active-text-color":A.value.paginationActiveTextColor},null,8,["modelValue","max","color","text-color","active-color","active-text-color"])):Ce("",!0)]),_:1}))}});export{ua as default};
