import{d as W,c as x,o as I,a as B,w as S,e as g,f as re,g as se,h as w,t as q,j as R,k as j,F as ie,r as we,l as xe,m as ce,n as Y,p as Be,_ as Se,q as X,v as Qe,x as k,T as qe,y as T,z as Oe,A as je,R as Ue,B as G,C as Le,D as K,E as de,G as Me,H as pe,I as ze,J as Z,K as ae,L as me,M as H,O as Ke,P as ne,S as Ye,U as Ce,V as He,W as z,X as ke,Y as Ve,Z as le,$ as $e,a0 as We,a1 as Xe,a2 as _e,a3 as Ge,a4 as Je,a5 as Ze,a6 as et,a7 as tt,a8 as ue,a9 as at,aa as nt,ab as lt,ac as Pe,ad as Q,ae as O,af as De,ag as ee,ah as L,ai as fe,aj as M,ak as ot,al as rt,am as st,an as it,ao as ve,ap as ut,aq as he,ar as ct,Q as oe,as as dt,at as pt}from"./index-BrpM8wxG.js";import{Q as mt}from"./QPage-Duuna0Um.js";import{u as ft}from"./order-DZn4TmNj.js";import{f as te}from"./currency-DNdHl-ZD.js";import{Q as vt}from"./QImg-CdsVYnpO.js";import"./rates-DR2RuQtv.js";import"./axios-Co-nYjem.js";const ht={class:"tw-flex tw-flex-col tw-items-start full-width"},gt={class:"q-my-none"},yt={class:"text-h6 q-mb-md"},bt={class:"q-mb-md"},wt={class:"q-mb-none"},xt={class:"q-mb-none"},St={class:"q-mb-none"},qt={class:"q-mb-md"},Ct={class:"q-mb-none"},kt={class:"q-mb-none"},Vt={class:"q-mt-sm full-width"},$t={class:"tw-text-center"},_t={class:"tw-text-right"},Pt=W({__name:"OrderConfirmationDialog",props:{modelValue:{type:Boolean,required:!0},details:{type:Object,required:!0},form:{type:Object,required:!0},color:{type:String,required:!0},text:{type:String,required:!0}},emits:["update:modelValue","confirm","cancel"],setup(e,{emit:o}){const d=e,p=o,i=x({get:()=>d.modelValue,set:s=>p("update:modelValue",s)}),t=()=>{i.value=!1,p("confirm")},a=()=>{i.value=!1,p("cancel")};return(s,f)=>(I(),B(Be,{modelValue:i.value,"onUpdate:modelValue":f[0]||(f[0]=u=>i.value=u),class:"confirm-dialog"},{default:S(()=>[g(re,{style:{"max-width":"430px",width:"95vw",margin:"0 auto"}},{default:S(()=>[g(se,null,{default:S(()=>[w("div",ht,[w("h6",gt,q(s.$t("checkout.summary")),1),w("p",yt,q(s.$t("checkout.total"))+": "+q(R(te)(e.details.total)),1),w("div",bt,[w("strong",null,q(s.$t("checkout.shippingDetails"))+":",1),w("p",wt,q(e.form.shipping.firstName)+" "+q(e.form.shipping.lastName),1),w("p",xt,q(e.form.shipping.email),1),w("p",St,q(e.form.shipping.address),1)]),w("div",qt,[w("strong",null,q(s.$t("checkout.paymentInfo"))+":",1),w("p",Ct,q(s.$t("checkout.card"))+": **** **** **** "+q(e.form.payment&&e.form.payment.cardDetails?.cardNumber.slice(-4)),1),w("p",kt,q(s.$t("checkout.expiry"))+": "+q(e.form.payment?.cardDetails?.expiry),1)]),w("div",Vt,[w("strong",null,q(s.$t("checkout.items"))+":",1),(I(!0),j(ie,null,we(e.details.items,u=>(I(),j("div",{key:u.id,class:"q-py-xs tw-grid tw-grid-cols-3 tw-gap-1 tw-w-full"},[w("div",null,q(u.name||u.title),1),w("div",$t,q(u.quantity),1),w("div",_t,q(R(te)(u.price)),1)]))),128))])])]),_:1}),g(xe,{class:"tw-flex tw-flex-col sm:tw-flex-row tw-gap-2 tw-items-center !tw-justify-between"},{default:S(()=>[g(ce,{label:s.$t("checkout.cancelButton"),outline:"",class:Y(["!tw-w-full sm:!tw-w-40 !tw-py-4 !tw-flex !tw-items-center !tw-justify-center",`tw-border-${e.color}`]),onClick:a},null,8,["label","class"]),g(ce,{label:s.$t("checkout.confirmButton"),flat:"","text-color":e.text,class:Y(["!tw-w-full sm:!tw-w-40 !tw-m-0 !tw-py-4 !tw-flex !tw-items-center !tw-justify-center",`bg-${e.color}`]),onClick:t},null,8,["label","text-color","class"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),Dt=Se(Pt,[["__scopeId","data-v-3e031146"]]),Ft=X({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:o,emit:d}){let p=!1,i,t,a=null,s=null,f,u;function m(){i&&i(),i=null,p=!1,a!==null&&(clearTimeout(a),a=null),s!==null&&(clearTimeout(s),s=null),t!==void 0&&t.removeEventListener("transitionend",f),f=null}function l(v,c,y){c!==void 0&&(v.style.height=`${c}px`),v.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,p=!0,i=y}function r(v,c){v.style.overflowY=null,v.style.height=null,v.style.transition=null,m(),c!==u&&d(c)}function n(v,c){let y=0;t=v,p===!0?(m(),y=v.offsetHeight===v.scrollHeight?0:void 0):(u="hide",v.style.overflowY="hidden"),l(v,y,c),a=setTimeout(()=>{a=null,v.style.height=`${v.scrollHeight}px`,f=_=>{s=null,(Object(_)!==_||_.target===v)&&r(v,"show")},v.addEventListener("transitionend",f),s=setTimeout(f,e.duration*1.1)},100)}function h(v,c){let y;t=v,p===!0?m():(u="show",v.style.overflowY="hidden",y=v.scrollHeight),l(v,y,c),a=setTimeout(()=>{a=null,v.style.height=0,f=_=>{s=null,(Object(_)!==_||_.target===v)&&r(v,"hide")},v.addEventListener("transitionend",f),s=setTimeout(f,e.duration*1.1)},100)}return Qe(()=>{p===!0&&m()}),()=>k(qe,{css:!1,appear:e.appear,onEnter:n,onLeave:h},o.default)}}),Fe=X({name:"StepHeader",props:{stepper:{},step:{},goToPanel:Function},setup(e,{attrs:o}){const{proxy:{$q:d}}=G(),p=T(null),i=x(()=>e.stepper.modelValue===e.step.name),t=x(()=>{const c=e.step.disable;return c===!0||c===""}),a=x(()=>{const c=e.step.error;return c===!0||c===""}),s=x(()=>{const c=e.step.done;return t.value===!1&&(c===!0||c==="")}),f=x(()=>{const c=e.step.headerNav,y=c===!0||c===""||c===void 0;return t.value===!1&&e.stepper.headerNav&&y}),u=x(()=>e.step.prefix&&(i.value===!1||e.stepper.activeIcon==="none")&&(a.value===!1||e.stepper.errorIcon==="none")&&(s.value===!1||e.stepper.doneIcon==="none")),m=x(()=>{const c=e.step.icon||e.stepper.inactiveIcon;if(i.value===!0){const y=e.step.activeIcon||e.stepper.activeIcon;return y==="none"?c:y||d.iconSet.stepper.active}if(a.value===!0){const y=e.step.errorIcon||e.stepper.errorIcon;return y==="none"?c:y||d.iconSet.stepper.error}if(t.value===!1&&s.value===!0){const y=e.step.doneIcon||e.stepper.doneIcon;return y==="none"?c:y||d.iconSet.stepper.done}return c}),l=x(()=>{const c=a.value===!0?e.step.errorColor||e.stepper.errorColor:void 0;if(i.value===!0){const y=e.step.activeColor||e.stepper.activeColor||e.step.color;return y!==void 0?y:c}return c!==void 0?c:t.value===!1&&s.value===!0?e.step.doneColor||e.stepper.doneColor||e.step.color||e.stepper.inactiveColor:e.step.color||e.stepper.inactiveColor}),r=x(()=>"q-stepper__tab col-grow flex items-center no-wrap relative-position"+(l.value!==void 0?` text-${l.value}`:"")+(a.value===!0?" q-stepper__tab--error q-stepper__tab--error-with-"+(u.value===!0?"prefix":"icon"):"")+(i.value===!0?" q-stepper__tab--active":"")+(s.value===!0?" q-stepper__tab--done":"")+(f.value===!0?" q-stepper__tab--navigation q-focusable q-hoverable":"")+(t.value===!0?" q-stepper__tab--disabled":"")),n=x(()=>e.stepper.headerNav!==!0?!1:f.value);function h(){p.value!==null&&p.value.focus(),i.value===!1&&e.goToPanel(e.step.name)}function v(c){c.keyCode===13&&i.value===!1&&e.goToPanel(e.step.name)}return()=>{const c={class:r.value};f.value===!0&&(c.onClick=h,c.onKeyup=v,Object.assign(c,t.value===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:o.tabindex||0}));const y=[k("div",{class:"q-focus-helper",tabindex:-1,ref:p}),k("div",{class:"q-stepper__dot row flex-center q-stepper__line relative-position"},[k("span",{class:"row flex-center"},[u.value===!0?e.step.prefix:k(Oe,{name:m.value})])])];if(e.step.title!==void 0&&e.step.title!==null){const _=[k("div",{class:"q-stepper__title"},e.step.title)];e.step.caption!==void 0&&e.step.caption!==null&&_.push(k("div",{class:"q-stepper__caption"},e.step.caption)),y.push(k("div",{class:"q-stepper__label q-stepper__line relative-position"},_))}return je(k("div",c,y),[[Ue,n.value]])}}});function Nt(e){const o=[.06,6,50];return typeof e=="string"&&e.length&&e.split(":").forEach((d,p)=>{const i=parseFloat(d);i&&(o[p]=i)}),o}const It=Le({name:"touch-swipe",beforeMount(e,{value:o,arg:d,modifiers:p}){if(p.mouse!==!0&&K.has.touch!==!0)return;const i=p.mouseCapture===!0?"Capture":"",t={handler:o,sensitivity:Nt(d),direction:de(p),noop:Me,mouseStart(a){pe(a,t)&&ze(a)&&(Z(t,"temp",[[document,"mousemove","move",`notPassive${i}`],[document,"mouseup","end","notPassiveCapture"]]),t.start(a,!0))},touchStart(a){if(pe(a,t)){const s=a.target;Z(t,"temp",[[s,"touchmove","move","notPassiveCapture"],[s,"touchcancel","end","notPassiveCapture"],[s,"touchend","end","notPassiveCapture"]]),t.start(a)}},start(a,s){K.is.firefox===!0&&ae(e,!0);const f=me(a);t.event={x:f.left,y:f.top,time:Date.now(),mouse:s===!0,dir:!1}},move(a){if(t.event===void 0)return;if(t.event.dir!==!1){H(a);return}const s=Date.now()-t.event.time;if(s===0)return;const f=me(a),u=f.left-t.event.x,m=Math.abs(u),l=f.top-t.event.y,r=Math.abs(l);if(t.event.mouse!==!0){if(m<t.sensitivity[1]&&r<t.sensitivity[1]){t.end(a);return}}else if(window.getSelection().toString()!==""){t.end(a);return}else if(m<t.sensitivity[2]&&r<t.sensitivity[2])return;const n=m/s,h=r/s;t.direction.vertical===!0&&m<r&&m<100&&h>t.sensitivity[0]&&(t.event.dir=l<0?"up":"down"),t.direction.horizontal===!0&&m>r&&r<100&&n>t.sensitivity[0]&&(t.event.dir=u<0?"left":"right"),t.direction.up===!0&&m<r&&l<0&&m<100&&h>t.sensitivity[0]&&(t.event.dir="up"),t.direction.down===!0&&m<r&&l>0&&m<100&&h>t.sensitivity[0]&&(t.event.dir="down"),t.direction.left===!0&&m>r&&u<0&&r<100&&n>t.sensitivity[0]&&(t.event.dir="left"),t.direction.right===!0&&m>r&&u>0&&r<100&&n>t.sensitivity[0]&&(t.event.dir="right"),t.event.dir!==!1?(H(a),t.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Ke(),t.styleCleanup=v=>{t.styleCleanup=void 0,document.body.classList.remove("non-selectable");const c=()=>{document.body.classList.remove("no-pointer-events--children")};v===!0?setTimeout(c,50):c()}),t.handler({evt:a,touch:t.event.mouse!==!0,mouse:t.event.mouse,direction:t.event.dir,duration:s,distance:{x:m,y:r}})):t.end(a)},end(a){t.event!==void 0&&(ne(t,"temp"),K.is.firefox===!0&&ae(e,!1),t.styleCleanup!==void 0&&t.styleCleanup(!0),a!==void 0&&t.event.dir!==!1&&H(a),t.event=void 0)}};if(e.__qtouchswipe=t,p.mouse===!0){const a=p.mouseCapture===!0||p.mousecapture===!0?"Capture":"";Z(t,"main",[[e,"mousedown","mouseStart",`passive${a}`]])}K.has.touch===!0&&Z(t,"main",[[e,"touchstart","touchStart",`passive${p.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,o){const d=e.__qtouchswipe;d!==void 0&&(o.oldValue!==o.value&&(typeof o.value!="function"&&d.end(),d.handler=o.value),d.direction=de(o.modifiers))},beforeUnmount(e){const o=e.__qtouchswipe;o!==void 0&&(ne(o,"main"),ne(o,"temp"),K.is.firefox===!0&&ae(e,!1),o.styleCleanup!==void 0&&o.styleCleanup(),delete e.__qtouchswipe)}});function Ne(){let e=Object.create(null);return{getCache:(o,d)=>e[o]===void 0?e[o]=typeof d=="function"?d():d:e[o],setCache(o,d){e[o]=d},hasCache(o){return Object.hasOwnProperty.call(e,o)},clearCache(o){o!==void 0?delete e[o]:e=Object.create(null)}}}const Tt={name:{required:!0},disable:Boolean},ge={setup(e,{slots:o}){return()=>k("div",{class:"q-panel scroll",role:"tabpanel"},z(o.default))}},At={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},Et=["update:modelValue","beforeTransition","transition"];function Rt(){const{props:e,emit:o,proxy:d}=G(),{getCache:p}=Ne(),{registerTimeout:i}=Ye();let t,a;const s=T(null),f={value:null};function u(b){const $=e.vertical===!0?"up":"left";C((d.$q.lang.rtl===!0?-1:1)*(b.direction===$?1:-1))}const m=x(()=>[[It,u,void 0,{horizontal:e.vertical!==!0,vertical:e.vertical,mouse:!0}]]),l=x(()=>e.transitionPrev||`slide-${e.vertical===!0?"down":"right"}`),r=x(()=>e.transitionNext||`slide-${e.vertical===!0?"up":"left"}`),n=x(()=>`--q-transition-duration: ${e.transitionDuration}ms`),h=x(()=>typeof e.modelValue=="string"||typeof e.modelValue=="number"?e.modelValue:String(e.modelValue)),v=x(()=>({include:e.keepAliveInclude,exclude:e.keepAliveExclude,max:e.keepAliveMax})),c=x(()=>e.keepAliveInclude!==void 0||e.keepAliveExclude!==void 0);Ce(()=>e.modelValue,(b,$)=>{const A=P(b)===!0?N(b):-1;a!==!0&&E(A===-1?0:A<N($)?-1:1),f.value!==A&&(f.value=A,o("beforeTransition",b,$),i(()=>{o("transition",b,$)},e.transitionDuration))});function y(){C(1)}function _(){C(-1)}function V(b){o("update:modelValue",b)}function P(b){return b!=null&&b!==""}function N(b){return t.findIndex($=>$.props.name===b&&$.props.disable!==""&&$.props.disable!==!0)}function U(){return t.filter(b=>b.props.disable!==""&&b.props.disable!==!0)}function E(b){const $=b!==0&&e.animated===!0&&f.value!==-1?"q-transition--"+(b===-1?l.value:r.value):null;s.value!==$&&(s.value=$)}function C(b,$=f.value){let A=$+b;for(;A!==-1&&A<t.length;){const J=t[A];if(J!==void 0&&J.props.disable!==""&&J.props.disable!==!0){E(b),a=!0,o("update:modelValue",J.props.name),setTimeout(()=>{a=!1});return}A+=b}e.infinite===!0&&t.length!==0&&$!==-1&&$!==t.length&&C(b,b===-1?t.length:-1)}function D(){const b=N(e.modelValue);return f.value!==b&&(f.value=b),!0}function F(){const b=P(e.modelValue)===!0&&D()&&t[f.value];return e.keepAlive===!0?[k(ke,v.value,[k(c.value===!0?p(h.value,()=>({...ge,name:h.value})):ge,{key:h.value,style:n.value},()=>b)])]:[k("div",{class:"q-panel scroll",style:n.value,key:h.value,role:"tabpanel"},[b])]}function Ae(){if(t.length!==0)return e.animated===!0?[k(qe,{name:s.value},F)]:F()}function Ee(b){return t=He(z(b.default,[])).filter($=>$.props!==null&&$.props.slot===void 0&&P($.props.name)===!0),t.length}function Re(){return t}return Object.assign(d,{next:y,previous:_,goTo:V}),{panelIndex:f,panelDirectives:m,updatePanelsList:Ee,updatePanelIndex:D,getPanelContent:Ae,getEnabledPanels:U,getPanels:Re,isValidPanelName:P,keepAliveProps:v,needsUniqueKeepAliveWrapper:c,goToPanelByOffset:C,goToPanel:V,nextPanel:y,previousPanel:_}}function Ie(e){return k("div",{class:"q-stepper__step-content"},[k("div",{class:"q-stepper__step-inner"},z(e.default))])}const ye={setup(e,{slots:o}){return()=>Ie(o)}},be=X({name:"QStep",props:{...Tt,icon:String,color:String,title:{type:String,required:!0},caption:String,prefix:[String,Number],doneIcon:String,doneColor:String,activeIcon:String,activeColor:String,errorIcon:String,errorColor:String,headerNav:{type:Boolean,default:!0},done:Boolean,error:Boolean,onScroll:[Function,Array]},setup(e,{slots:o,emit:d}){const{proxy:{$q:p}}=G(),i=Ve($e,le);if(i===le)return console.error("QStep needs to be a child of QStepper"),le;const{getCache:t}=Ne(),a=T(null),s=x(()=>i.value.modelValue===e.name),f=x(()=>p.platform.is.ios!==!0&&p.platform.is.chrome===!0||s.value!==!0||i.value.vertical!==!0?{}:{onScroll(l){const{target:r}=l;r.scrollTop>0&&(r.scrollTop=0),e.onScroll!==void 0&&d("scroll",l)}}),u=x(()=>typeof e.name=="string"||typeof e.name=="number"?e.name:String(e.name));function m(){const l=i.value.vertical;return l===!0&&i.value.keepAlive===!0?k(ke,i.value.keepAliveProps.value,s.value===!0?[k(i.value.needsUniqueKeepAliveWrapper.value===!0?t(u.value,()=>({...ye,name:u.value})):ye,{key:u.value},o.default)]:void 0):l!==!0||s.value===!0?Ie(o):void 0}return()=>k("div",{ref:a,class:"q-stepper__step",role:"tabpanel",...f.value},i.value.vertical===!0?[k(Fe,{stepper:i.value,step:e,goToPanel:i.value.goToPanel}),i.value.animated===!0?k(Ft,m):m()]:[m()])}}),Bt=/(-\w)/g;function Qt(e){const o={};for(const d in e){const p=d.replace(Bt,i=>i[1].toUpperCase());o[p]=e[d]}return o}const Ot=X({name:"QStepper",props:{...We,...At,flat:Boolean,bordered:Boolean,alternativeLabels:Boolean,headerNav:Boolean,contracted:Boolean,headerClass:String,inactiveColor:String,inactiveIcon:String,doneIcon:String,doneColor:String,activeIcon:String,activeColor:String,errorIcon:String,errorColor:String},emits:Et,setup(e,{slots:o}){const d=G(),p=Xe(e,d.proxy.$q),{updatePanelsList:i,isValidPanelName:t,updatePanelIndex:a,getPanelContent:s,getPanels:f,panelDirectives:u,goToPanel:m,keepAliveProps:l,needsUniqueKeepAliveWrapper:r}=Rt();_e($e,x(()=>({goToPanel:m,keepAliveProps:l,needsUniqueKeepAliveWrapper:r,...e})));const n=x(()=>`q-stepper q-stepper--${e.vertical===!0?"vertical":"horizontal"}`+(e.flat===!0?" q-stepper--flat":"")+(e.bordered===!0?" q-stepper--bordered":"")+(p.value===!0?" q-stepper--dark q-dark":"")),h=x(()=>`q-stepper__header row items-stretch justify-between q-stepper__header--${e.alternativeLabels===!0?"alternative":"standard"}-labels`+(e.flat===!1||e.bordered===!0?" q-stepper__header--border":"")+(e.contracted===!0?" q-stepper__header--contracted":"")+(e.headerClass!==void 0?` ${e.headerClass}`:""));function v(){const c=z(o.message,[]);if(e.vertical===!0){t(e.modelValue)&&a();const y=k("div",{class:"q-stepper__content"},z(o.default));return c===void 0?[y]:c.concat(y)}return[k("div",{class:h.value},f().map(y=>{const _=Qt(y.props);return k(Fe,{key:_.name,stepper:e,step:_,goToPanel:m})})),c,Je("div",{class:"q-stepper__content q-panel-parent"},s(),"cont",e.swipeable,()=>u.value)]}return()=>(i(o),k("div",{class:n.value},Ge(o.navigation,v())))}}),Te=X({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(e,{slots:o,emit:d}){const p=G(),i=T(null);let t=0;const a=[];function s(n){const h=typeof n=="boolean"?n:e.noErrorFocus!==!0,v=++t,c=(V,P)=>{d(`validation${V===!0?"Success":"Error"}`,P)},y=V=>{const P=V.validate();return typeof P.then=="function"?P.then(N=>({valid:N,comp:V}),N=>({valid:!1,comp:V,err:N})):Promise.resolve({valid:P,comp:V})};return(e.greedy===!0?Promise.all(a.map(y)).then(V=>V.filter(P=>P.valid!==!0)):a.reduce((V,P)=>V.then(()=>y(P).then(N=>{if(N.valid===!1)return Promise.reject(N)})),Promise.resolve()).catch(V=>[V])).then(V=>{if(V===void 0||V.length===0)return v===t&&c(!0),!0;if(v===t){const{comp:P,err:N}=V[0];if(N!==void 0&&console.error(N),c(!1,P),h===!0){const U=V.find(({comp:E})=>typeof E.focus=="function"&&at(E.$)===!1);U!==void 0&&U.comp.focus()}}return!1})}function f(){t++,a.forEach(n=>{typeof n.resetValidation=="function"&&n.resetValidation()})}function u(n){n!==void 0&&H(n);const h=t+1;s().then(v=>{h===t&&v===!0&&(e.onSubmit!==void 0?d("submit",n):n!==void 0&&n.target!==void 0&&typeof n.target.submit=="function"&&n.target.submit())})}function m(n){n!==void 0&&H(n),d("reset"),nt(()=>{f(),e.autofocus===!0&&e.noResetFocus!==!0&&l()})}function l(){lt(()=>{if(i.value===null)return;const n=i.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||i.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||i.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(i.value.querySelectorAll("[tabindex]"),h=>h.tabIndex!==-1);n?.focus({preventScroll:!0})})}_e(Ze,{bindComponent(n){a.push(n)},unbindComponent(n){const h=a.indexOf(n);h!==-1&&a.splice(h,1)}});let r=!1;return et(()=>{r=!0}),tt(()=>{r===!0&&e.autofocus===!0&&l()}),ue(()=>{e.autofocus===!0&&l()}),Object.assign(p.proxy,{validate:s,resetValidation:f,submit:u,reset:m,focus:l,getValidationComponents:()=>a}),()=>k("form",{class:"q-form",ref:i,onSubmit:u,onReset:m},z(o.default))}}),jt={class:"col-12 col-sm-6"},Ut={class:"col-12 col-sm-6"},Lt={class:"col-12"},Mt={class:"col-12"},zt=W({__name:"ShippingForm",props:{shippingForm:{type:Object,required:!0},shippingFormRef:{type:Object,required:!0}},emits:["shipping-valid","update:shipping"],setup(e,{emit:o}){const d=e,p=o,{t:i}=Pe(),t=x({get:()=>d.shippingForm,set:u=>{p("update:shipping",u)}}),a=u=>!!u||i("errors.validation.required"),s=u=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(u)?!0:i("errors.validation.invalidEmail"),f=async()=>{if(d.shippingFormRef)try{const u=!!t.value?.firstName,m=!!t.value?.lastName,l=s(t.value?.email)===!0,r=!!t.value?.address,n=u&&m&&l&&r;if(n)await d.shippingFormRef.validate();else{p("shipping-valid",!1);return}p("shipping-valid",n)}catch{p("shipping-valid",!1)}else p("shipping-valid",!1)};return(u,m)=>(I(),j(ie,null,[Q(q(s(t.value.email))+" ",1),g(Te,{ref:"shippingFormRef",class:"row q-col-gutter-md shipping-form",onSubmit:De(f,["prevent"])},{default:S(()=>[w("div",jt,[g(O,{modelValue:t.value.firstName,"onUpdate:modelValue":m[0]||(m[0]=l=>t.value.firstName=l),label:u.$t("checkout.firstName"),"reactive-rules":"",autofocus:"",rules:[a]},null,8,["modelValue","label","rules"])]),w("div",Ut,[g(O,{modelValue:t.value.lastName,"onUpdate:modelValue":m[1]||(m[1]=l=>t.value.lastName=l),label:u.$t("checkout.lastName"),"reactive-rules":"",rules:[a]},null,8,["modelValue","label","rules"])]),w("div",Lt,[g(O,{modelValue:t.value.email,"onUpdate:modelValue":m[2]||(m[2]=l=>t.value.email=l),label:u.$t("checkout.email"),type:"email","lazy-rules":"",rules:[a,s]},null,8,["modelValue","label","rules"])]),w("div",Mt,[g(O,{modelValue:t.value.address,"onUpdate:modelValue":m[3]||(m[3]=l=>t.value.address=l),label:u.$t("checkout.address"),"lazy-rules":"",rules:[a]},null,8,["modelValue","label","rules"])])]),_:1},512)],64))}}),Kt={class:"col-12"},Yt={class:"col-6"},Ht={class:"col-6"},Wt=W({__name:"PaymentForm",props:{paymentForm:{type:Object,required:!0},paymentFormRef:{type:Object,required:!0}},emits:["payment-valid","update:payment"],setup(e,{emit:o}){const d=e,p=o,{t:i}=Pe(),t=x({get:()=>({...d.paymentForm,cardDetails:{cardNumber:d.paymentForm.cardDetails?.cardNumber||"",expiry:d.paymentForm.cardDetails?.expiry||"",cvv:d.paymentForm.cardDetails?.cvv||""}}),set:l=>{p("update:payment",l)}}),a=()=>{d.paymentFormRef?d.paymentFormRef.validate().then(l=>{p("payment-valid",l)}).catch(()=>{p("payment-valid",!1)}):p("payment-valid",!1)},s=l=>!!l||i("errors.validation.required"),f=l=>/^\d{16}$/.test(l.replace(/\s+/g,""))||i("errors.validation.invalidCardNumber"),u=l=>{const[r,n]=l.split("/").map(Number);if(!r||!n)return i("errors.validation.invalidExpiryDate");const h=new Date,v=h.getMonth()+1,c=h.getFullYear()%100;return r>=1&&r<=12&&n>=c&&(n>c||r>=v)||i("errors.validation.invalidExpiryDate")},m=l=>/^\d{3}$/.test(l)?!0:i("errors.validation.invalidCVV");return(l,r)=>(I(),B(Te,{ref:"paymentFormRef",greedy:"",class:"row q-col-gutter-md payment-form",onSubmit:De(a,["prevent"])},{default:S(()=>[w("div",Kt,[g(O,{modelValue:t.value.cardDetails.cardNumber,"onUpdate:modelValue":r[0]||(r[0]=n=>t.value.cardDetails.cardNumber=n),label:l.$t("checkout.cardNumber"),mask:"#### #### #### ####",autofocus:"","lazy-rules":"",rules:[s,f]},null,8,["modelValue","label","rules"])]),w("div",Yt,[g(O,{modelValue:t.value.cardDetails.expiry,"onUpdate:modelValue":r[1]||(r[1]=n=>t.value.cardDetails.expiry=n),label:"MM/YY",mask:"##/##","lazy-rules":"",rules:[s,u]},null,8,["modelValue","rules"])]),w("div",Ht,[g(O,{modelValue:t.value.cardDetails.cvv,"onUpdate:modelValue":r[2]||(r[2]=n=>t.value.cardDetails.cvv=n),label:"CVV",mask:"###","lazy-rules":"",rules:[s,m]},null,8,["modelValue","rules"])])]),_:1},512))}}),Xt={key:0,class:"text-positive text-xs"},Gt={key:2},Jt={key:0,class:"q-mt-lg"},Zt=W({__name:"OrderForm",props:{step:{type:Number,required:!0},text:{type:String,required:!0},orderForm:{type:Object,required:!0},isIpsEnabled:{type:Boolean,default:!1},qrCodeDataUrl:{type:String,default:""}},emits:["update:step","update:orderForm","shipping-valid","payment-valid"],setup(e,{emit:o}){const d=e,p=o,i=T(!1),t=T(!1),a=T(null),s=T(null),f=x({get:()=>d.step,set:r=>{p("update:step",r)}}),u=x({get:()=>d.orderForm,set:r=>{p("update:orderForm",r)}}),m=r=>{i.value=r,p("shipping-valid",r)},l=r=>{t.value=r,p("payment-valid",r)};return ue(()=>{a.value||(a.value={}),s.value||(s.value={})}),(r,n)=>(I(),B(Ot,{modelValue:f.value,"onUpdate:modelValue":n[4]||(n[4]=h=>f.value=h),vertical:"",class:"checkout-stepper !tw-bg-transparent full-width",color:"none","text-color":e.text,"header-nav":""},{default:S(()=>[g(be,{name:1,title:r.$t("checkout.shipping"),icon:"local_shipping",done:e.step>1,class:"checkout-step","header-nav":!0},{default:S(()=>[g(re,{flat:"",bordered:"",class:"!tw-p-0"},{default:S(()=>[g(se,null,{default:S(()=>[g(zt,{"shipping-form":u.value.shipping,"shipping-form-ref":a.value,onShippingValid:m,"onUpdate:shipping":n[0]||(n[0]=h=>u.value.shipping=h)},null,8,["shipping-form","shipping-form-ref"])]),_:1})]),_:1})]),_:1},8,["title","done"]),g(be,{name:2,title:r.$t("checkout.payment"),icon:"payment",done:e.step>2,"header-nav":!0,disable:!i.value},{default:S(()=>[e.orderForm.payment?(I(),B(ee,{key:0,class:"!tw-p-0"},{default:S(()=>[g(L,{class:"tw-text-sm"},{default:S(()=>[g(fe,{modelValue:u.value.payment.method,"onUpdate:modelValue":n[1]||(n[1]=h=>u.value.payment.method=h),val:"card",label:r.$t("checkout.cardPayment")},null,8,["modelValue","label"]),g(fe,{modelValue:u.value.payment.method,"onUpdate:modelValue":n[2]||(n[2]=h=>u.value.payment.method=h),val:"ips",disable:!e.isIpsEnabled},{default:S(()=>[w("span",null,[Q(q(r.$t("checkout.ipsScanQrCode"))+" ",1),e.isIpsEnabled?M("",!0):(I(),j("span",Xt," - "+q(r.$t("checkout.ipsInfo")),1))])]),_:1},8,["modelValue","disable"])]),_:1})]),_:1})):M("",!0),e.orderForm.payment?.method==="card"?(I(),B(re,{key:1,flat:"",bordered:""},{default:S(()=>[g(se,null,{default:S(()=>[g(Wt,{"payment-form":u.value.payment,"payment-form-ref":s.value,onPaymentValid:l,"onUpdate:payment":n[3]||(n[3]=h=>u.value.payment=h)},null,8,["payment-form","payment-form-ref"])]),_:1})]),_:1})):M("",!0),e.isIpsEnabled&&u.value.payment?.method==="ips"?(I(),j("div",Gt,[e.qrCodeDataUrl?(I(),j("div",Jt,[g(vt,{src:e.qrCodeDataUrl,alt:"QR Code for Payment",fit:"contain",class:"tw-w-48 tw-h-48"},null,8,["src"])])):M("",!0)])):M("",!0)]),_:1},8,["title","done","disable"])]),_:1},8,["modelValue","text-color"]))}}),ea={class:"tw-container tw-max-w-screen-xl tw-mx-auto"},ta={class:"tw-text-3xl tw-mt-4 tw-font-semibold tw-font-serif tw-my-4 tw-text-left md:tw-text-center tw-mb-8"},aa={class:"row q-col-gutter-md"},na={class:"col-12 col-md-8"},la={class:"col-12 col-md-4"},oa={class:"tw-text-xl tw-font-semibold tw-font-serif md:tw-text-2xl tw-mb-4"},ra={class:"tw-w-full tw-flex tw-flex-row tw-gap-2"},sa=W({__name:"CheckoutPage",setup(e){ot(C=>({"7a8f8f10":r.value,efc68840:n.value}));const o=Ve("scrollToTop"),d=rt(),p=st(),i=ft(),t=it(),a=T(1),s=T(!1),f=T(!1),u=T(!1),m=ve({id:Math.floor(Math.random()*1e3),items:p.items,total:p.totalPrice}),l=ve({shipping:{firstName:"",lastName:"",email:"",address:""},payment:{method:"card",cardDetails:{cardNumber:"",expiry:"",cvv:""}}}),r=x(()=>d.dark.isActive?"white":"black"),n=x(()=>d.dark.isActive?"black":"white"),h=d.dark.isActive,v=x(()=>p.items.reduce((C,D)=>C+D.price*D.quantity,0)),c=()=>{console.log("orderOverview:",l)},y=()=>{s.value=!1},_=()=>{a.value--,o()},V=()=>{a.value===1&&f.value?(i.setShippingForm(l.shipping),a.value++,o()):a.value===2&&u.value?(i.setPaymentForm(l.payment),t.push(dt)):(o(),d.notify({type:"negative",position:"top",message:"Please fix errors in the form.",timeout:1e3}))},P=()=>{t.push(pt)},N=C=>{console.log("Shipping valid:",C),f.value=C},U=C=>{console.log("payment valid:",C),u.value=C},E=()=>{f.value=!!l.shipping.firstName&&!!l.shipping.lastName&&!!l.shipping.email&&!!l.shipping.address,u.value=!!l.payment?.method&&!!l.payment.cardDetails?.cardNumber&&!!l.payment.cardDetails.expiry&&!!l.payment.cardDetails.cvv};return Ce(()=>i.orderForm,C=>{l.shipping=C.shipping,l.payment=C.payment??{method:"card",cardDetails:{cardNumber:"",expiry:"",cvv:""}},E()},{deep:!0,immediate:!0}),ue(()=>{i.loadOrder(),E(),o()}),(C,D)=>(I(),B(mt,{padding:"",class:"!tw-pb-16"},{default:S(()=>[w("div",ea,[w("h5",ta,q(C.$t("checkout.checkoutTitle")),1),w("div",aa,[w("div",na,[g(Zt,{step:a.value,"onUpdate:step":D[0]||(D[0]=F=>a.value=F),text:n.value,color:r.value,"order-form":l,onShippingValid:N,onPaymentValid:U},null,8,["step","text","color","order-form"])]),w("div",la,[g(ee,{class:Y(["tw-flex tw-justify-between tw-flex-col tw-gap-4 sm:!tw-pt-4 sm:!tw-pb-3 tw-rounded-md",R(h)?"tw-bg-transparent tw-text-light":"bg-light tw-text-dark"])},{default:S(()=>[g(L,{class:"tw-w-full"},{default:S(()=>[w("div",oa,q(C.$t("checkout.orderSummary")),1),g(ut,{dense:"",class:"tw-w-full tw-flex tw-flex-col tw-justify-between"},{default:S(()=>[(I(!0),j(ie,null,we(R(p).items,F=>(I(),B(ee,{key:F.id,class:"tw-justify-between"},{default:S(()=>[g(L,null,{default:S(()=>[g(he,null,{default:S(()=>[Q(q(F.name||F.title),1)]),_:2},1024),g(he,{caption:""},{default:S(()=>[Q(q(C.$t("checkout.qty"))+": "+q(F.quantity),1)]),_:2},1024)]),_:2},1024),g(L,{side:"",class:Y(R(h)?"text-light":"text-dark")},{default:S(()=>[Q(q(R(te)(F.price*F.quantity)),1)]),_:2},1032,["class"])]),_:2},1024))),128)),g(ct,{class:"q-my-md"}),g(ee,null,{default:S(()=>[g(L,{class:"text-subtitle1 text-weight-bold"},{default:S(()=>[Q(q(C.$t("checkout.total")),1)]),_:1}),g(L,{side:"",class:Y(["text-subtitle1 text-weight-bold",R(h)?"text-light":"text-dark"])},{default:S(()=>[Q(q(R(te)(v.value)),1)]),_:1},8,["class"])]),_:1})]),_:1})]),_:1}),g(xe,{align:"center"},{default:S(()=>[g(oe,{color:r.value,"text-color":n.value,disable:a.value===1&&!f.value||a.value===2&&!u.value,label:a.value===2?C.$t("checkout.orderOverview"):C.$t("checkout.continue"),"class-name":"tw-w-full tw-flex-1 !tw-ml-0 tw-mb-2 !tw-py-4",onClick:D[1]||(D[1]=F=>V())},null,8,["color","text-color","disable","label"]),w("div",ra,[g(oe,{color:n.value,"text-color":r.value,label:a.value===2?C.$t("checkout.toShipping"):C.$t("checkout.toCart"),class:"tw-flex-grow !tw-py-4",onClick:D[2]||(D[2]=F=>a.value===2?_():P())},null,8,["color","text-color","label"]),a.value===2?(I(),B(oe,{key:0,color:n.value,"text-color":r.value,label:C.$t("checkout.toCart"),class:"tw-flex-grow tw-p-0 tw-w-1/2",onClick:D[3]||(D[3]=F=>P())},null,8,["color","text-color","label"])):M("",!0)])]),_:1})]),_:1},8,["class"])])])]),g(Dt,{modelValue:s.value,"onUpdate:modelValue":D[4]||(D[4]=F=>s.value=F),form:l,details:m,color:r.value,text:n.value,onConfirm:c,onCancel:y},null,8,["modelValue","form","details","color","text"])]),_:1}))}}),va=Se(sa,[["__scopeId","data-v-5e5e72df"]]);export{va as default};
