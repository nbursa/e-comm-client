import{I as Je,J as he,am as pe,r as k,l as o,k as Me,e as Ae,w as Ge,R as Xe,h as T,an as De,ao as Ye,s as Ze,Q as ve,O as et,i as ye,c as we,ap as be,F as Be,aq as tt,G as ae,p as at,o as lt,a as nt,ar as ot,g as it,M as rt,as as st,N as ut,at as ct,au as $e,av as dt,a5 as vt,aj as Re,aw as ft,S as gt,W as ht,V as bt,X as mt,Y as yt,ax as wt,Z as W,_ as re,$ as oe,ab as Ie,a0 as H,aa as te,a1 as J,ac as se,ae as Le,ag as ue,ay as Ct,ah as St,af as G,az as kt,a2 as Tt,a3 as Pt,ai as xt,a9 as qt,a4 as _t}from"./index-Dln1CX-_.js";import{Q as Bt,f as me}from"./currencyUtils-CfAaqMk5.js";import{Q as $t}from"./QPage-xQU8a1Or.js";import"./rates-BrW5sabz.js";let It=0;const Lt=["click","keydown"],Vt={icon:String,label:[Number,String],alert:[Boolean,String],alertIcon:String,name:{type:[Number,String],default:()=>`t_${It++}`},noCaps:Boolean,tabindex:[String,Number],disable:Boolean,contentClass:String,ripple:{type:[Boolean,Object],default:!0}};function pt(e,b,w,s){const v=Je(pe,he);if(v===he)return console.error("QTab/QRouteTab component needs to be child of QTabs"),he;const{proxy:g}=ye(),h=k(null),R=k(null),x=k(null),F=o(()=>e.disable===!0||e.ripple===!1?!1:Object.assign({keyCodes:[13,32],early:!0},e.ripple===!0?{}:e.ripple)),I=o(()=>v.currentModel.value===e.name),M=o(()=>"q-tab relative-position self-stretch flex flex-center text-center"+(I.value===!0?" q-tab--active"+(v.tabProps.value.activeClass?" "+v.tabProps.value.activeClass:"")+(v.tabProps.value.activeColor?` text-${v.tabProps.value.activeColor}`:"")+(v.tabProps.value.activeBgColor?` bg-${v.tabProps.value.activeBgColor}`:""):" q-tab--inactive")+(e.icon&&e.label&&v.tabProps.value.inlineLabel===!1?" q-tab--full":"")+(e.noCaps===!0||v.tabProps.value.noCaps===!0?" q-tab--no-caps":"")+(e.disable===!0?" disabled":" q-focusable q-hoverable cursor-pointer")),B=o(()=>"q-tab__content self-stretch flex-center relative-position q-anchor--skip non-selectable "+(v.tabProps.value.inlineLabel===!0?"row no-wrap q-tab__content--inline":"column")+(e.contentClass!==void 0?` ${e.contentClass}`:"")),m=o(()=>e.disable===!0||v.hasFocus.value===!0||I.value===!1&&v.hasActiveTab.value===!0?-1:e.tabindex||0);function y(u,P){if(P!==!0&&h.value!==null&&h.value.focus(),e.disable!==!0){v.updateModel({name:e.name}),w("click",u);return}}function L(u){De(u,[13,32])?y(u,!0):Ye(u)!==!0&&u.keyCode>=35&&u.keyCode<=40&&u.altKey!==!0&&u.metaKey!==!0&&v.onKbdNavigate(u.keyCode,g.$el)===!0&&Ze(u),w("keydown",u)}function E(){const u=v.tabProps.value.narrowIndicator,P=[],V=T("div",{ref:x,class:["q-tab__indicator",v.tabProps.value.indicatorClass]});e.icon!==void 0&&P.push(T(ve,{class:"q-tab__icon",name:e.icon})),e.label!==void 0&&P.push(T("div",{class:"q-tab__label"},e.label)),e.alert!==!1&&P.push(e.alertIcon!==void 0?T(ve,{class:"q-tab__alert-icon",color:e.alert!==!0?e.alert:void 0,name:e.alertIcon}):T("div",{class:"q-tab__alert"+(e.alert!==!0?` text-${e.alert}`:"")})),u===!0&&P.push(V);const p=[T("div",{class:"q-focus-helper",tabindex:-1,ref:h}),T("div",{class:B.value},et(b.default,P))];return u===!1&&p.push(V),p}const j={name:o(()=>e.name),rootRef:R,tabIndicatorRef:x,routeData:s};Me(()=>{v.unregisterTab(j)}),Ae(()=>{v.registerTab(j)});function N(u,P){const V={ref:R,class:M.value,tabindex:m.value,role:"tab","aria-selected":I.value===!0?"true":"false","aria-disabled":e.disable===!0?"true":void 0,onClick:y,onKeydown:L,...P};return Ge(T(u,V,E()),[[Xe,F.value]])}return{renderTab:N,$tabs:v}}const Ve=we({name:"QTab",props:Vt,emits:Lt,setup(e,{slots:b,emit:w}){const{renderTab:s}=pt(e,b,w);return()=>s("div")}});function Mt(e,b,w){const s=w===!0?["left","right"]:["top","bottom"];return`absolute-${b===!0?s[0]:s[1]}${e?` text-${e}`:""}`}const At=["left","center","right","justify"],Dt=we({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:e=>At.includes(e)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(e,{slots:b,emit:w}){const{proxy:s}=ye(),{$q:v}=s,{registerTick:g}=be(),{registerTick:h}=be(),{registerTick:R}=be(),{registerTimeout:x,removeTimeout:F}=Be(),{registerTimeout:I,removeTimeout:M}=Be(),B=k(null),m=k(null),y=k(e.modelValue),L=k(!1),E=k(!0),j=k(!1),N=k(!1),u=[],P=k(0),V=k(!1);let p=null,O=null,q;const X=o(()=>({activeClass:e.activeClass,activeColor:e.activeColor,activeBgColor:e.activeBgColor,indicatorClass:Mt(e.indicatorColor,e.switchIndicator,e.vertical),narrowIndicator:e.narrowIndicator,inlineLabel:e.inlineLabel,noCaps:e.noCaps})),le=o(()=>{const t=P.value,l=y.value;for(let r=0;r<t;r++)if(u[r].name.value===l)return!0;return!1}),Y=o(()=>`q-tabs__content--align-${L.value===!0?"left":N.value===!0?"justify":e.align}`),A=o(()=>`q-tabs row no-wrap items-center q-tabs--${L.value===!0?"":"not-"}scrollable q-tabs--${e.vertical===!0?"vertical":"horizontal"} q-tabs__arrows--${e.outsideArrows===!0?"outside":"inside"} q-tabs--mobile-with${e.mobileArrows===!0?"":"out"}-arrows`+(e.dense===!0?" q-tabs--dense":"")+(e.shrink===!0?" col-shrink":"")+(e.stretch===!0?" self-stretch":"")),i=o(()=>"q-tabs__content scroll--mobile row no-wrap items-center self-stretch hide-scrollbar relative-position "+Y.value+(e.contentClass!==void 0?` ${e.contentClass}`:"")),a=o(()=>e.vertical===!0?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}),d=o(()=>e.vertical!==!0&&v.lang.rtl===!0),n=o(()=>tt===!1&&d.value===!0);ae(d,ee),ae(()=>e.modelValue,t=>{Q({name:t,setCurrent:!0,skipEmit:!0})}),ae(()=>e.outsideArrows,D);function Q({name:t,setCurrent:l,skipEmit:r}){y.value!==t&&(r!==!0&&e["onUpdate:modelValue"]!==void 0&&w("update:modelValue",t),(l===!0||e["onUpdate:modelValue"]===void 0)&&(Fe(y.value,t),y.value=t))}function D(){g(()=>{B.value&&_({width:B.value.offsetWidth,height:B.value.offsetHeight})})}function _(t){if(a.value===void 0||m.value===null)return;const l=t[a.value.container],r=Math.min(m.value[a.value.scroll],Array.prototype.reduce.call(m.value.children,(S,f)=>S+(f[a.value.content]||0),0)),C=l>0&&r>l;L.value=C,C===!0&&h(ee),N.value=l<parseInt(e.breakpoint,10)}function Fe(t,l){const r=t!=null&&t!==""?u.find(S=>S.name.value===t):null,C=l!=null&&l!==""?u.find(S=>S.name.value===l):null;if(ie===!0)ie=!1;else if(r&&C){const S=r.tabIndicatorRef.value,f=C.tabIndicatorRef.value;p!==null&&(clearTimeout(p),p=null),S.style.transition="none",S.style.transform="none",f.style.transition="none",f.style.transform="none";const c=S.getBoundingClientRect(),$=f.getBoundingClientRect();f.style.transform=e.vertical===!0?`translate3d(0,${c.top-$.top}px,0) scale3d(1,${$.height?c.height/$.height:1},1)`:`translate3d(${c.left-$.left}px,0,0) scale3d(${$.width?c.width/$.width:1},1,1)`,R(()=>{p=setTimeout(()=>{p=null,f.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",f.style.transform="none"},70)})}C&&L.value===!0&&Z(C.rootRef.value)}function Z(t){const{left:l,width:r,top:C,height:S}=m.value.getBoundingClientRect(),f=t.getBoundingClientRect();let c=e.vertical===!0?f.top-C:f.left-l;if(c<0){m.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.floor(c),ee();return}c+=e.vertical===!0?f.height-S:f.width-r,c>0&&(m.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.ceil(c),ee())}function ee(){const t=m.value;if(t===null)return;const l=t.getBoundingClientRect(),r=e.vertical===!0?t.scrollTop:Math.abs(t.scrollLeft);d.value===!0?(E.value=Math.ceil(r+l.width)<t.scrollWidth-1,j.value=r>0):(E.value=r>0,j.value=e.vertical===!0?Math.ceil(r+l.height)<t.scrollHeight:Math.ceil(r+l.width)<t.scrollWidth)}function Ce(t){O!==null&&clearInterval(O),O=setInterval(()=>{Qe(t)===!0&&U()},5)}function Se(){Ce(n.value===!0?Number.MAX_SAFE_INTEGER:0)}function ke(){Ce(n.value===!0?0:Number.MAX_SAFE_INTEGER)}function U(){O!==null&&(clearInterval(O),O=null)}function Ee(t,l){const r=Array.prototype.filter.call(m.value.children,$=>$===l||$.matches&&$.matches(".q-tab.q-focusable")===!0),C=r.length;if(C===0)return;if(t===36)return Z(r[0]),r[0].focus(),!0;if(t===35)return Z(r[C-1]),r[C-1].focus(),!0;const S=t===(e.vertical===!0?38:37),f=t===(e.vertical===!0?40:39),c=S===!0?-1:f===!0?1:void 0;if(c!==void 0){const $=d.value===!0?-1:1,K=r.indexOf(l)+c*$;return K>=0&&K<C&&(Z(r[K]),r[K].focus({preventScroll:!0})),!0}}const Ne=o(()=>n.value===!0?{get:t=>Math.abs(t.scrollLeft),set:(t,l)=>{t.scrollLeft=-l}}:e.vertical===!0?{get:t=>t.scrollTop,set:(t,l)=>{t.scrollTop=l}}:{get:t=>t.scrollLeft,set:(t,l)=>{t.scrollLeft=l}});function Qe(t){const l=m.value,{get:r,set:C}=Ne.value;let S=!1,f=r(l);const c=t<f?-1:1;return f+=c*5,f<0?(S=!0,f=0):(c===-1&&f<=t||c===1&&f>=t)&&(S=!0,f=t),C(l,f),ee(),S}function Te(t,l){for(const r in t)if(t[r]!==l[r])return!1;return!0}function je(){let t=null,l={matchedLen:0,queryDiff:9999,hrefLen:0};const r=u.filter(c=>c.routeData!==void 0&&c.routeData.hasRouterLink.value===!0),{hash:C,query:S}=s.$route,f=Object.keys(S).length;for(const c of r){const $=c.routeData.exact.value===!0;if(c.routeData[$===!0?"linkIsExactActive":"linkIsActive"].value!==!0)continue;const{hash:K,query:fe,matched:We,href:He}=c.routeData.resolvedLink.value,ge=Object.keys(fe).length;if($===!0){if(K!==C||ge!==f||Te(S,fe)===!1)continue;t=c.name.value;break}if(K!==""&&K!==C||ge!==0&&Te(fe,S)===!1)continue;const z={matchedLen:We.length,queryDiff:f-ge,hrefLen:He.length-K.length};if(z.matchedLen>l.matchedLen){t=c.name.value,l=z;continue}else if(z.matchedLen!==l.matchedLen)continue;if(z.queryDiff<l.queryDiff)t=c.name.value,l=z;else if(z.queryDiff!==l.queryDiff)continue;z.hrefLen>l.hrefLen&&(t=c.name.value,l=z)}if(t===null&&u.some(c=>c.routeData===void 0&&c.name.value===y.value)===!0){ie=!1;return}Q({name:t,setCurrent:!0})}function Oe(t){if(F(),V.value!==!0&&B.value!==null&&t.target&&typeof t.target.closest=="function"){const l=t.target.closest(".q-tab");l&&B.value.contains(l)===!0&&(V.value=!0,L.value===!0&&Z(l))}}function Ke(){x(()=>{V.value=!1},30)}function ne(){xe.avoidRouteWatcher===!1?I(je):M()}function Pe(){if(q===void 0){const t=ae(()=>s.$route.fullPath,ne);q=()=>{t(),q=void 0}}}function Ue(t){u.push(t),P.value++,D(),t.routeData===void 0||s.$route===void 0?I(()=>{if(L.value===!0){const l=y.value,r=l!=null&&l!==""?u.find(C=>C.name.value===l):null;r&&Z(r.rootRef.value)}}):(Pe(),t.routeData.hasRouterLink.value===!0&&ne())}function ze(t){u.splice(u.indexOf(t),1),P.value--,D(),q!==void 0&&t.routeData!==void 0&&(u.every(l=>l.routeData===void 0)===!0&&q(),ne())}const xe={currentModel:y,tabProps:X,hasFocus:V,hasActiveTab:le,registerTab:Ue,unregisterTab:ze,verifyRouteModel:ne,updateModel:Q,onKbdNavigate:Ee,avoidRouteWatcher:!1};at(pe,xe);function qe(){p!==null&&clearTimeout(p),U(),q!==void 0&&q()}let _e,ie;return Me(qe),lt(()=>{_e=q!==void 0,qe()}),nt(()=>{_e===!0&&(Pe(),ie=!0,ne()),D()}),()=>T("div",{ref:B,class:A.value,role:"tablist",onFocusin:Oe,onFocusout:Ke},[T(ot,{onResize:_}),T("div",{ref:m,class:i.value,onScroll:ee},it(b.default)),T(ve,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+(E.value===!0?"":" q-tabs__arrow--faded"),name:e.leftIcon||v.iconSet.tabs[e.vertical===!0?"up":"left"],onMousedownPassive:Se,onTouchstartPassive:Se,onMouseupPassive:U,onMouseleavePassive:U,onTouchendPassive:U}),T(ve,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+(j.value===!0?"":" q-tabs__arrow--faded"),name:e.rightIcon||v.iconSet.tabs[e.vertical===!0?"down":"right"],onMousedownPassive:ke,onTouchstartPassive:ke,onMouseupPassive:U,onMouseleavePassive:U,onTouchendPassive:U})])}});function ce(e,b){return[!0,!1].includes(e)?e:b}const Rt=we({name:"QPagination",props:{...rt,modelValue:{type:Number,required:!0},min:{type:[Number,String],default:1},max:{type:[Number,String],required:!0},maxPages:{type:[Number,String],default:0,validator:e=>(typeof e=="string"?parseInt(e,10):e)>=0},inputStyle:[Array,String,Object],inputClass:[Array,String,Object],size:String,disable:Boolean,input:Boolean,iconPrev:String,iconNext:String,iconFirst:String,iconLast:String,toFn:Function,boundaryLinks:{type:Boolean,default:null},boundaryNumbers:{type:Boolean,default:null},directionLinks:{type:Boolean,default:null},ellipses:{type:Boolean,default:null},ripple:{type:[Boolean,Object],default:null},round:Boolean,rounded:Boolean,flat:Boolean,outline:Boolean,unelevated:Boolean,push:Boolean,glossy:Boolean,color:{type:String,default:"primary"},textColor:String,activeDesign:{type:String,default:"",values:e=>e===""||st.includes(e)},activeColor:String,activeTextColor:String,gutter:String,padding:{type:String,default:"3px 2px"}},emits:["update:modelValue"],setup(e,{emit:b}){const{proxy:w}=ye(),{$q:s}=w,v=ut(e,s),g=o(()=>parseInt(e.min,10)),h=o(()=>parseInt(e.max,10)),R=o(()=>parseInt(e.maxPages,10)),x=o(()=>y.value+" / "+h.value),F=o(()=>ce(e.boundaryLinks,e.input)),I=o(()=>ce(e.boundaryNumbers,!e.input)),M=o(()=>ce(e.directionLinks,e.input)),B=o(()=>ce(e.ellipses,!e.input)),m=k(null),y=o({get:()=>e.modelValue,set:i=>{if(i=parseInt(i,10),e.disable||isNaN(i))return;const a=ct(i,g.value,h.value);e.modelValue!==a&&b("update:modelValue",a)}});ae(()=>`${g.value}|${h.value}`,()=>{y.value=e.modelValue});const L=o(()=>"q-pagination row no-wrap items-center"+(e.disable===!0?" disabled":"")),E=o(()=>e.gutter in $e?`${$e[e.gutter]}px`:e.gutter||null),j=o(()=>E.value!==null?`--q-pagination-gutter-parent:-${E.value};--q-pagination-gutter-child:${E.value}`:null),N=o(()=>{const i=[e.iconFirst||s.iconSet.pagination.first,e.iconPrev||s.iconSet.pagination.prev,e.iconNext||s.iconSet.pagination.next,e.iconLast||s.iconSet.pagination.last];return s.lang.rtl===!0?i.reverse():i}),u=o(()=>({"aria-disabled":e.disable===!0?"true":"false",role:"navigation"})),P=o(()=>dt(e,"flat")),V=o(()=>({[P.value]:!0,round:e.round,rounded:e.rounded,padding:e.padding,color:e.color,textColor:e.textColor,size:e.size,ripple:e.ripple!==null?e.ripple:!0})),p=o(()=>{const i={[P.value]:!1};return e.activeDesign!==""&&(i[e.activeDesign]=!0),i}),O=o(()=>({...p.value,color:e.activeColor||e.color,textColor:e.activeTextColor||e.textColor})),q=o(()=>{let i=Math.max(R.value,1+(B.value?2:0)+(I.value?2:0));const a={pgFrom:g.value,pgTo:h.value,ellipsesStart:!1,ellipsesEnd:!1,boundaryStart:!1,boundaryEnd:!1,marginalStyle:{minWidth:`${Math.max(2,String(h.value).length)}em`}};return R.value&&i<h.value-g.value+1&&(i=1+Math.floor(i/2)*2,a.pgFrom=Math.max(g.value,Math.min(h.value-i+1,e.modelValue-Math.floor(i/2))),a.pgTo=Math.min(h.value,a.pgFrom+i-1),I.value&&(a.boundaryStart=!0,a.pgFrom++),B.value&&a.pgFrom>g.value+(I.value?1:0)&&(a.ellipsesStart=!0,a.pgFrom++),I.value&&(a.boundaryEnd=!0,a.pgTo--),B.value&&a.pgTo<h.value-(I.value?1:0)&&(a.ellipsesEnd=!0,a.pgTo--)),a});function X(i){y.value=i}function le(i){y.value=y.value+i}const Y=o(()=>{function i(){y.value=m.value,m.value=null}return{"onUpdate:modelValue":a=>{m.value=a},onKeyup:a=>{De(a,13)===!0&&i()},onBlur:i}});function A(i,a,d){const n={"aria-label":a,"aria-current":"false",...V.value,...i};return d===!0&&Object.assign(n,{"aria-current":"true",...O.value}),a!==void 0&&(e.toFn!==void 0?n.to=e.toFn(a):n.onClick=()=>{X(a)}),T(Re,n)}return Object.assign(w,{set:X,setByOffset:le}),()=>{const i=[],a=[];let d;if(F.value===!0&&(i.push(A({key:"bls",disable:e.disable||e.modelValue<=g.value,icon:N.value[0]},g.value)),a.unshift(A({key:"ble",disable:e.disable||e.modelValue>=h.value,icon:N.value[3]},h.value))),M.value===!0&&(i.push(A({key:"bdp",disable:e.disable||e.modelValue<=g.value,icon:N.value[1]},e.modelValue-1)),a.unshift(A({key:"bdn",disable:e.disable||e.modelValue>=h.value,icon:N.value[2]},e.modelValue+1))),e.input!==!0){d=[];const{pgFrom:n,pgTo:Q,marginalStyle:D}=q.value;if(q.value.boundaryStart===!0){const _=g.value===e.modelValue;i.push(A({key:"bns",style:D,disable:e.disable,label:g.value},g.value,_))}if(q.value.boundaryEnd===!0){const _=h.value===e.modelValue;a.unshift(A({key:"bne",style:D,disable:e.disable,label:h.value},h.value,_))}q.value.ellipsesStart===!0&&i.push(A({key:"bes",style:D,disable:e.disable,label:"…",ripple:!1},n-1)),q.value.ellipsesEnd===!0&&a.unshift(A({key:"bee",style:D,disable:e.disable,label:"…",ripple:!1},Q+1));for(let _=n;_<=Q;_++)d.push(A({key:`bpg${_}`,style:D,disable:e.disable,label:_},_,_===e.modelValue))}return T("div",{class:L.value,...u.value},[T("div",{class:"q-pagination__content row no-wrap items-center",style:j.value},[...i,e.input===!0?T(vt,{class:"inline",style:{width:`${x.value.length/1.5}em`},type:"number",dense:!0,value:m.value,disable:e.disable,dark:v.value,borderless:!0,inputClass:e.inputClass,inputStyle:e.inputStyle,placeholder:x.value,min:g.value,max:h.value,...Y.value}):T("div",{class:"q-pagination__middle row justify-center"},d),...a])])}}}),Ft=ft("productCache",{state:()=>({cacheMap:new Map,categoryCache:null,cacheDuration:5*60*1e3}),actions:{getCacheKey(e="all"){return`products_${e}`},setCache(e,b="all"){const w={products:e,timestamp:Date.now(),category:b};this.cacheMap.set(this.getCacheKey(b),w),localStorage.setItem(this.getCacheKey(b),JSON.stringify(w))},getCache(e="all"){const b=this.cacheMap.get(this.getCacheKey(e));if(b)return b;const w=localStorage.getItem(this.getCacheKey(e));if(!w)return null;const s=JSON.parse(w);return this.cacheMap.set(this.getCacheKey(e),s),s},isCacheValid(e="all"){const b=this.getCache(e);return b?Date.now()-b.timestamp<this.cacheDuration:!1},setCategoryCache(e){this.categoryCache={categories:e,timestamp:Date.now()},localStorage.setItem("categories",JSON.stringify(this.categoryCache))},getCategoryCache(){if(this.categoryCache)return this.categoryCache;const e=localStorage.getItem("categories");return e?(this.categoryCache=JSON.parse(e),this.categoryCache):null},isCategoryCacheValid(){const e=this.getCategoryCache();return e?Date.now()-e.timestamp<this.cacheDuration:!1}}}),Et={class:"q-my-md"},Nt={class:"tw-container tw-mx-auto tw-max-w-screen-xl tw-mb-8"},Qt={class:"tw-grid tw-grid-cols-1 sm:tw-grid-cols-2 lg:tw-grid-cols-3 xl:tw-grid-cols-4 tw-gap-4"},jt={class:"text-bold product-name"},Ot={class:"text-caption"},Kt={class:"q-mt-sm text-bold price-text"},Ut={class:"text-grey"},zt={class:"text-positive q-ml-sm"},de=10,Xt=gt({__name:"ProductsPage",setup(e){const{getVerticalScrollPosition:b}=kt,w=ht(),s=bt(),v=mt(),g=Ft(),{t:h}=yt(),R="https://e-comm-backend-16bba1769344.herokuapp.com",x=k([]),F=k(1),I=k(!1),M=k("all"),B=k(!0),m=k([]),y=o(()=>s.dark.isActive?"white":"black"),L=o(()=>s.dark.isActive?"black":"white"),E=o(()=>x.value?M.value==="all"?x.value:x.value.filter(a=>a.category===M.value):[]),j=o(()=>E.value.slice((F.value-1)*de,F.value*de)),N=o(()=>Math.ceil(x.value.length/de)),u=o(()=>w.totalItems),P=o(()=>w.totalPrice),V=a=>a?a.split(" ").map(d=>d.charAt(0).toUpperCase()+d.slice(1)).join(" "):"",p=a=>{const d=a.match(/[^.!?]*[.!?]/);return d?d[0]:a},O=a=>a,q=()=>{const a=document.querySelector("body");a?a.scrollTo({top:0,behavior:"smooth"}):console.warn("Element body not found")},X=a=>{w.addItem({...a,quantity:1}),s.notify({color:"positive",message:h("products.itemAdded"),icon:"check_circle"})},le=a=>{v.push(`/products/${a.id}`)},Y=()=>{const a=b(window);I.value=a>0};ae(M,async a=>{F.value=1,await i(a)});const A=async()=>{try{if(B.value=!0,g.isCategoryCacheValid()){const n=g.getCategoryCache();if(n){m.value=n.categories;return}}const d=await(await fetch(`${R}/products/categories`)).json();m.value=d,g.setCategoryCache(d)}catch(a){console.error("Error fetching categories:",a),m.value=[]}finally{B.value=!1}},i=async a=>{s.loading.show();try{const d=a||"all";if(g.isCacheValid(d)){const _=g.getCache(d);if(_){x.value=_.products,s.loading.hide();return}}const n=a&&a!=="all"?`${R}/products/category/${a}`:`${R}/products`,Q=await fetch(n);if(!Q.ok)throw new Error("Network response was not ok");const D=await Q.json();x.value=D,g.setCache(D,d)}catch{s.notify({color:"negative",position:"top",message:"Failed to fetch products. Please try again later.",icon:"error"}),x.value=[]}finally{s.loading.hide()}};return Ae(async()=>{await Promise.all([A(),i()]),window.addEventListener("scroll",Y)}),wt(()=>{window.removeEventListener("scroll",Y)}),(a,d)=>(W(),re($t,{padding:""},{default:oe(()=>[Ie("",!0),H("h5",Et,te(a.$t("products.title")),1),J(Dt,{modelValue:M.value,"onUpdate:modelValue":d[0]||(d[0]=n=>M.value=n),class:"q-mb-md gt-sm","active-color":L.value,"active-bg-color":y.value,"text-color":y.value,"inactive-color":y.value,align:"justify"},{default:oe(()=>[J(Ve,{name:"all",label:a.$t("products.categories.allProducts")},null,8,["label"]),(W(!0),se(ue,null,Le(m.value,n=>(W(),re(Ve,{key:n,name:n,label:V(n)},null,8,["name","label"]))),128))]),_:1},8,["modelValue","active-color","active-bg-color","text-color","inactive-color"]),J(Ct,{modelValue:M.value,"onUpdate:modelValue":d[1]||(d[1]=n=>M.value=n),options:["all",...m.value],class:"q-my-md lt-md",color:y.value,"text-color":L.value,label:a.$t("products.selectCategory"),outlined:"","option-label":n=>n==="all"?a.$t("products.categories.allProducts"):V(n)},null,8,["modelValue","options","color","text-color","label","option-label"]),J(St,{class:"q-my-md"}),H("div",Nt,[H("div",Qt,[(W(!0),se(ue,null,Le(j.value,n=>(W(),re(Tt,{key:n.id,class:"tw-w-full tw-transition tw-duration-200 tw-ease-in-out hover:tw-cursor-pointer hover:tw-scale-105",bordered:"",onClick:Q=>le(n)},{default:oe(()=>[J(Bt,{src:O(n.image),alt:n.name,fit:"contain",class:"sm:tw-h-2/3 tw-w-full tw-max-h-1.5"},null,8,["src","alt"]),J(Pt,{class:"tw-flex-grow q-pa-sm !tw-pb-0"},{default:oe(()=>[H("div",jt,te(n.name||n.title),1),H("div",Ot,te(p(n.description)),1)]),_:2},1024),J(xt,{class:"row justify-between items-center !tw-pt-0"},{default:oe(()=>[H("div",Kt,[n.discount?(W(),se(ue,{key:0},[H("s",Ut,te(G(me)(n.price)),1),H("span",zt,te(G(me)(n.discountedPrice||n.price)),1)],64)):(W(),se(ue,{key:1},[qt(te(G(me)(n.price)),1)],64))]),J(Re,{color:y.value,"text-color":L.value,label:a.$t("products.addToCart"),class:"full-width q-mt-md",onClick:_t(Q=>X(n),["stop"])},null,8,["color","text-color","label","onClick"])]),_:2},1024)]),_:2},1032,["onClick"]))),128))])]),x.value.length>de?(W(),re(Rt,{key:1,modelValue:F.value,"onUpdate:modelValue":[d[2]||(d[2]=n=>F.value=n),q],max:N.value,"boundary-numbers":"",class:"q-my-md text-center justify-center",color:G(s).dark.isActive?"white":"dark","text-color":G(s).dark.isActive?"white":"dark","active-color":G(s).dark.isActive?"white":"dark","active-text-color":G(s).dark.isActive?"dark":"white"},null,8,["modelValue","max","color","text-color","active-color","active-text-color"])):Ie("",!0)]),_:1}))}});export{Xt as default};
