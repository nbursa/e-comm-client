import{b1 as m,b2 as c}from"./index-C0JJa2YO.js";const v=m("products",()=>{const o="products",s=()=>{const e=c.get(o);return e||{cache:{},viewed:{products:[],timestamp:Date.now()},categories:[],timestamp:Date.now(),version:"1.0"}},i=()=>{const e=s();e.viewed||(e.viewed={products:[],timestamp:Date.now()},c.set(o,e,{expiration:3e5,version:"1.0"}))},n=(e,t)=>{const r=s();r.cache[t]={data:e.data,meta:e.meta,timestamp:Date.now()},c.set(o,r,{expiration:3e5,version:"1.0"})},d=e=>{const t=s();return a(e)?t.cache[e]:null},C=e=>{const t=s();e==="viewed"?t.viewed={products:[],timestamp:Date.now()}:t.cache[e]&&delete t.cache[e],c.set(o,t,{expiration:3e5,version:"1.0"})},a=e=>{const t=s();return t.cache[e]?Date.now()-t.cache[e].timestamp<3e5:!1};return{setCache:n,getCache:d,isCacheValid:a,clearCache:C,setCategoryCache:e=>{const t=s();t.categories=e,t.timestamp=Date.now(),c.set(o,t,{expiration:3e5,version:"1.0"})},getCategoryCache:()=>{const e=s();return e.categories?.length?{categories:e.categories,timestamp:e.timestamp}:null},setViewedCache:e=>{const t=s();t.viewed={products:[e,...(t.viewed?.products||[]).filter(r=>r.id!==e.id)].slice(0,10),timestamp:Date.now()},c.set(o,t,{expiration:3e5,version:"1.0"})},getViewedCache:()=>{const e=s();return e.viewed?.products?.length?e.viewed:null},initViewedCache:i,clearAllProductsCache:()=>{c.remove(o)}}});export{v as u};
