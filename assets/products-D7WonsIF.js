import{az as m,aA as a}from"./index-DkL1IWry.js";const P=m("products",()=>{const o="products",s=()=>{const e=a.get(o);return e||{cache:{},viewed:{products:[],timestamp:Date.now()},categories:[],timestamp:Date.now(),version:"1.0"}},i=()=>{const e=s();e.viewed||(e.viewed={products:[],timestamp:Date.now()},a.set(o,e,{expiration:3e5,version:"1.0"}))},n=(e,t)=>{const c=s();c.cache[t]={data:e.data,meta:e.meta,timestamp:Date.now()},a.set(o,c,{expiration:3e5,version:"1.0"})},d=e=>{const t=s();return r(e)?t.cache[e]:null},C=e=>{const t=s();e==="viewed"?t.viewed={products:[],timestamp:Date.now()}:t.cache[e]&&delete t.cache[e],a.set(o,t,{expiration:3e5,version:"1.0"})},r=e=>{const t=s();return t.cache[e]?Date.now()-t.cache[e].timestamp<3e5:!1};return{setCache:n,getCache:d,isCacheValid:r,clearCache:C,setCategoryCache:e=>{const t=s();t.categories=e,t.timestamp=Date.now(),a.set(o,t,{expiration:3e5,version:"1.0"})},getCategoryCache:()=>{const e=s();return e.categories?.length?{categories:e.categories,timestamp:e.timestamp}:null},setViewedCache:e=>{const t=s();t.viewed={products:[e,...(t.viewed?.products||[]).filter(c=>c.id!==e.id)].slice(0,10),timestamp:Date.now()},a.set(o,t,{expiration:3e5,version:"1.0"})},getViewedCache:()=>{const e=s();return e.viewed?.products?.length?e.viewed:null},initViewedCache:i}});export{P as u};
