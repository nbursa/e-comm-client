import{ay as C,az as c}from"./index-Cu7LU0FT.js";const l=C("products",()=>{const o="products",s=()=>{const e=c.get(o);return e||{cache:{},viewed:{products:[],timestamp:Date.now()},categories:[],timestamp:Date.now(),version:"1.0"}},n=(e,t)=>{const a=s();a.cache[t]={data:e.data,meta:e.meta,timestamp:Date.now()},c.set(o,a,{expiration:3e5,version:"1.0"})},i=e=>{const t=s();return r(e)?t.cache[e]:null},d=e=>{const t=s();e==="viewed"?t.viewed={products:[],timestamp:Date.now()}:t.cache[e]&&delete t.cache[e],c.set(o,t,{expiration:3e5,version:"1.0"})},r=e=>{const t=s();return t.cache[e]?Date.now()-t.cache[e].timestamp<3e5:!1};return{setCache:n,getCache:i,isCacheValid:r,clearCache:d,setCategoryCache:e=>{const t=s();t.categories=e,t.timestamp=Date.now(),c.set(o,t,{expiration:3e5,version:"1.0"})},getCategoryCache:()=>{const e=s();return e.categories?.length?{categories:e.categories,timestamp:e.timestamp}:null},setViewedCache:e=>{const t=s();t.viewed={products:[e,...(t.viewed?.products||[]).filter(a=>a.id!==e.id)].slice(0,10),timestamp:Date.now()},c.set(o,t,{expiration:3e5,version:"1.0"})},getViewedCache:()=>{const e=s();return e.viewed?.products?.length?e.viewed:null}}});export{l as u};
