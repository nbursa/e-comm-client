import{S as Z,aB as L,X as O,V as R,W,Y as G,r as s,l as u,e as H,av as J,Z as y,_ as K,$ as d,aw as ee,a0 as o,a6 as r,a1 as l,ac as te,aC as b,aa as ae,a3 as oe,a8 as $,ab as Q,af as se,ah as x,a4 as le,ag as ie,a2 as ne,aD as ce,aE as re,ay as ue}from"./index-Dw7d6QSP.js";import{Q as S}from"./QImg-Dk5ZW7Mq.js";import{Q as de}from"./QPage-z6fHUOhN.js";const me={class:"q-m-sm q-"},ve={class:"q-mb-md q-mx-auto overflow-hidden",style:{"max-width":"1200px"}},pe={class:"col-12 col-md-4 q-py-lg tw-transition tw-duration-200 tw-ease-in-out hover:tw-scale-105"},ge={class:"col-12 col-md-8 sm:tw-p-3 !tw-align-top",style:{display:"flex","flex-direction":"column","flex-grow":"0",height:"auto","min-height":"100%"}},fe={class:"text-caption q-mt-sm"},he={class:"q-mt-sm text-bold price-text"},we={class:"text-grey"},ye={class:"text-positive q-ml-sm"},xe={class:"row justify-center q-mt-xl"},_e={class:"row justify-between items-center q-mb-md"},ke={class:"text-caption"},Se=Z({__name:"SingleProductPage",setup(qe){const{getVerticalScrollPosition:B}=ue,I=L(),V=O(),c=R(),g=W(),{t:T}=G(),t=s({id:0,title:"",name:"",price:0,quantity:0,description:"",category:"",image:"",rating:{rate:0,count:0}}),M=s(!1),m=s(!1),f=s(""),i=s(!1),h=s(!1),_=s(0),k=s(0),v=s(0),p=s(0),q=u(()=>c.dark.isActive?"white":"black"),C=u(()=>c.dark.isActive?"black":"white"),Ce=u(()=>g.totalItems),Pe=u(()=>g.totalPrice),z=u(()=>({"--translate-x":`${v.value}px`,"--translate-y":`${p.value}px`})),w=e=>`$${e.toFixed(2)}`,X=()=>{window.scrollTo({top:0,behavior:"smooth"})},Y=e=>{g.addItem({...e,quantity:1}),X(),c.notify({color:"positive",message:T("singleProduct.itemAdded"),icon:"check_circle"})},j=e=>{f.value=e,m.value=!0,i.value=!1},A=()=>{i.value||(v.value=0,p.value=0),i.value=!i.value},D=e=>{i.value&&(h.value=!0,_.value=e.clientX-v.value,k.value=e.clientY-p.value)},E=e=>{!i.value||!h.value||(v.value=e.clientX-_.value,p.value=e.clientY-k.value)},N=()=>{i.value&&(h.value=!1)},F=()=>{V.push("/products")},U=async()=>{const{slug:e}=I.params;c.loading.show();try{const a=await(await fetch(`https://fakestoreapi.com/products/${e}`)).json();t.value={id:a.id,name:a.title,title:a.title,price:a.price,description:a.description,image:a.image,category:a.category,discount:Math.random()>.5,discountedPrice:a.price*(Math.random()>.5?.9:1),quantity:0,rating:{rate:0,count:0}}}catch{c.notify({color:"negative",message:"Failed to fetch product details.",icon:"error"})}finally{c.loading.hide()}},P=()=>{const e=B(window);M.value=e>0};return H(()=>{U(),window.addEventListener("scroll",P)}),J(()=>{window.removeEventListener("scroll",P)}),(e,n)=>(y(),K(de,{padding:""},{default:d(()=>[ee("",!0),o("h5",me,r(t.value.title),1),l(te,{class:"q-my-md"}),o("div",ve,[o("div",{class:b(["row items-stretch full-height",{"col-reverse-md":ae(c).screen.md}])},[o("div",pe,[l(S,{src:t.value.image,alt:t.value.name,fit:"contain",class:"cursor-pointer full-width full-height",onClick:n[0]||(n[0]=a=>j(t.value.image))},null,8,["src","alt"])]),o("div",ge,[l(oe,{class:"q-pa-sm !tw-pb-0",style:{flex:"1",display:"flex","flex-direction":"column",height:"100%"}},{default:d(()=>[o("div",fe,r(t.value.description),1)]),_:1}),l(ie,{align:"right",class:"row justify-between items-end !tw-pt-0"},{default:d(()=>[o("div",he,[t.value.discount?(y(),$(Q,{key:0},[o("s",we,r(w(t.value.price)),1),o("span",ye,r(w(t.value.discountedPrice||t.value.price)),1)],64)):(y(),$(Q,{key:1},[se(r(w(t.value.price)),1)],64))]),l(x,{color:q.value,"text-color":C.value,label:e.$t("singleProduct.addToCart"),class:"q-px-md full-width",onClick:n[1]||(n[1]=le(a=>Y(t.value),["stop"]))},null,8,["color","text-color","label"])]),_:1})])],2)]),o("div",xe,[l(x,{color:q.value,"text-color":C.value,label:e.$t("singleProduct.backToProducts"),onClick:F},null,8,["color","text-color","label"])]),l(re,{modelValue:m.value,"onUpdate:modelValue":n[3]||(n[3]=a=>m.value=a),maximized:""},{default:d(()=>[l(ne,{class:"q-pa-md",style:{"max-width":"90vw","max-height":"90vh",overflow:"hidden"}},{default:d(()=>[o("div",_e,[o("div",ke,r(t.value.name),1),l(x,{flat:"",dense:"",round:"",icon:"close",onClick:n[2]||(n[2]=a=>m.value=!1)})]),l(S,{src:f.value,alt:f.value,class:b(["zoomable-image tw-cursor-pointer",{"zoom-in":i.value,"zoom-out":!i.value}]),style:ce([{"max-width":"100%","max-height":"100%"},z.value]),fit:"contain",onClick:A,onMousedown:D,onMousemove:E,onMouseleave:N},null,8,["src","alt","class","style"])]),_:1})]),_:1},8,["modelValue"])]),_:1}))}});export{Se as default};
