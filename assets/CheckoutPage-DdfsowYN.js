import{c as oe,r as F,p as Dt,f as Gt,o as Wt,a as Xt,e as Vt,h as M,g as X,i as ie,v as Zt,s as re,n as en,j as tn,k as nn,T as xt,l as k,Q as rn,w as on,R as an,m as sn,q as Z,t as We,x as ln,y as Xe,z as un,A as se,B as me,C as Ze,D as cn,E as pe,F as dn,G as fn,H as hn,K as $t,I as gn,J as ve,L as Ut,M as mn,N as pn,O as vn,P as wn,S as yn,U as Cn,V as bn,W as En,X as Sn,Y as Pn,Z as z,_ as we,$ as L,a0 as V,a1 as R,a2 as ye,a3 as Ce,a4 as et,a5 as j,a6 as be,a7 as ee,a8 as tt,a9 as G,aa as Q,ab as le,ac as ue,ad as Bn,ae as An,af as Ee,ag as Nn,ah as qn,ai as In,aj as nt,ak as rt,al as _n}from"./index-DXkTR_UH.js";import{Q as Rn,f as te}from"./currencyUtils-8u7nFrBG.js";import{Q as Tn}from"./QPage-BqarkBPH.js";import{a as kn}from"./_commonjsHelpers-IkB594pC.js";import{u as Mn}from"./rates-D_QAR2W4.js";const ot=oe({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(e,{slots:o,emit:a}){const r=ie(),n=F(null);let t=0;const i=[];function l(u){const b=typeof u=="boolean"?u:e.noErrorFocus!==!0,v=++t,y=(E,S)=>{a(`validation${E===!0?"Success":"Error"}`,S)},w=E=>{const S=E.validate();return typeof S.then=="function"?S.then(_=>({valid:_,comp:E}),_=>({valid:!1,comp:E,err:_})):Promise.resolve({valid:S,comp:E})};return(e.greedy===!0?Promise.all(i.map(w)).then(E=>E.filter(S=>S.valid!==!0)):i.reduce((E,S)=>E.then(()=>w(S).then(_=>{if(_.valid===!1)return Promise.reject(_)})),Promise.resolve()).catch(E=>[E])).then(E=>{if(E===void 0||E.length===0)return v===t&&y(!0),!0;if(v===t){const{comp:S,err:_}=E[0];if(_!==void 0&&console.error(_),y(!1,S),b===!0){const P=E.find(({comp:m})=>typeof m.focus=="function"&&Zt(m.$)===!1);P!==void 0&&P.comp.focus()}}return!1})}function s(){t++,i.forEach(u=>{typeof u.resetValidation=="function"&&u.resetValidation()})}function c(u){u!==void 0&&re(u);const b=t+1;l().then(v=>{b===t&&v===!0&&(e.onSubmit!==void 0?a("submit",u):u!==void 0&&u.target!==void 0&&typeof u.target.submit=="function"&&u.target.submit())})}function d(u){u!==void 0&&re(u),a("reset"),en(()=>{s(),e.autofocus===!0&&e.noResetFocus!==!0&&p()})}function p(){tn(()=>{if(n.value===null)return;const u=n.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||n.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||n.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(n.value.querySelectorAll("[tabindex]"),b=>b.tabIndex!==-1);u?.focus({preventScroll:!0})})}Dt(Gt,{bindComponent(u){i.push(u)},unbindComponent(u){const b=i.indexOf(u);b!==-1&&i.splice(b,1)}});let h=!1;return Wt(()=>{h=!0}),Xt(()=>{h===!0&&e.autofocus===!0&&p()}),Vt(()=>{e.autofocus===!0&&p()}),Object.assign(r.proxy,{validate:l,resetValidation:s,submit:c,reset:d,focus:p,getValidationComponents:()=>i}),()=>M("form",{class:"q-form",ref:n,onSubmit:c,onReset:d},X(o.default))}}),Ln=oe({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:o,emit:a}){let r=!1,n,t,i=null,l=null,s,c;function d(){n&&n(),n=null,r=!1,i!==null&&(clearTimeout(i),i=null),l!==null&&(clearTimeout(l),l=null),t!==void 0&&t.removeEventListener("transitionend",s),s=null}function p(v,y,w){y!==void 0&&(v.style.height=`${y}px`),v.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,r=!0,n=w}function h(v,y){v.style.overflowY=null,v.style.height=null,v.style.transition=null,d(),y!==c&&a(y)}function u(v,y){let w=0;t=v,r===!0?(d(),w=v.offsetHeight===v.scrollHeight?0:void 0):(c="hide",v.style.overflowY="hidden"),p(v,w,y),i=setTimeout(()=>{i=null,v.style.height=`${v.scrollHeight}px`,s=B=>{l=null,(Object(B)!==B||B.target===v)&&h(v,"show")},v.addEventListener("transitionend",s),l=setTimeout(s,e.duration*1.1)},100)}function b(v,y){let w;t=v,r===!0?d():(c="show",v.style.overflowY="hidden",w=v.scrollHeight),p(v,w,y),i=setTimeout(()=>{i=null,v.style.height=0,s=B=>{l=null,(Object(B)!==B||B.target===v)&&h(v,"hide")},v.addEventListener("transitionend",s),l=setTimeout(s,e.duration*1.1)},100)}return nn(()=>{r===!0&&d()}),()=>M(xt,{css:!1,appear:e.appear,onEnter:u,onLeave:b},o.default)}}),Ft=oe({name:"StepHeader",props:{stepper:{},step:{},goToPanel:Function},setup(e,{attrs:o}){const{proxy:{$q:a}}=ie(),r=F(null),n=k(()=>e.stepper.modelValue===e.step.name),t=k(()=>{const y=e.step.disable;return y===!0||y===""}),i=k(()=>{const y=e.step.error;return y===!0||y===""}),l=k(()=>{const y=e.step.done;return t.value===!1&&(y===!0||y==="")}),s=k(()=>{const y=e.step.headerNav,w=y===!0||y===""||y===void 0;return t.value===!1&&e.stepper.headerNav&&w}),c=k(()=>e.step.prefix&&(n.value===!1||e.stepper.activeIcon==="none")&&(i.value===!1||e.stepper.errorIcon==="none")&&(l.value===!1||e.stepper.doneIcon==="none")),d=k(()=>{const y=e.step.icon||e.stepper.inactiveIcon;if(n.value===!0){const w=e.step.activeIcon||e.stepper.activeIcon;return w==="none"?y:w||a.iconSet.stepper.active}if(i.value===!0){const w=e.step.errorIcon||e.stepper.errorIcon;return w==="none"?y:w||a.iconSet.stepper.error}if(t.value===!1&&l.value===!0){const w=e.step.doneIcon||e.stepper.doneIcon;return w==="none"?y:w||a.iconSet.stepper.done}return y}),p=k(()=>{const y=i.value===!0?e.step.errorColor||e.stepper.errorColor:void 0;if(n.value===!0){const w=e.step.activeColor||e.stepper.activeColor||e.step.color;return w!==void 0?w:y}return y!==void 0?y:t.value===!1&&l.value===!0?e.step.doneColor||e.stepper.doneColor||e.step.color||e.stepper.inactiveColor:e.step.color||e.stepper.inactiveColor}),h=k(()=>"q-stepper__tab col-grow flex items-center no-wrap relative-position"+(p.value!==void 0?` text-${p.value}`:"")+(i.value===!0?" q-stepper__tab--error q-stepper__tab--error-with-"+(c.value===!0?"prefix":"icon"):"")+(n.value===!0?" q-stepper__tab--active":"")+(l.value===!0?" q-stepper__tab--done":"")+(s.value===!0?" q-stepper__tab--navigation q-focusable q-hoverable":"")+(t.value===!0?" q-stepper__tab--disabled":"")),u=k(()=>e.stepper.headerNav!==!0?!1:s.value);function b(){r.value!==null&&r.value.focus(),n.value===!1&&e.goToPanel(e.step.name)}function v(y){y.keyCode===13&&n.value===!1&&e.goToPanel(e.step.name)}return()=>{const y={class:h.value};s.value===!0&&(y.onClick=b,y.onKeyup=v,Object.assign(y,t.value===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:o.tabindex||0}));const w=[M("div",{class:"q-focus-helper",tabindex:-1,ref:r}),M("div",{class:"q-stepper__dot row flex-center q-stepper__line relative-position"},[M("span",{class:"row flex-center"},[c.value===!0?e.step.prefix:M(rn,{name:d.value})])])];if(e.step.title!==void 0&&e.step.title!==null){const B=[M("div",{class:"q-stepper__title"},e.step.title)];e.step.caption!==void 0&&e.step.caption!==null&&B.push(M("div",{class:"q-stepper__caption"},e.step.caption)),w.push(M("div",{class:"q-stepper__label q-stepper__line relative-position"},B))}return on(M("div",y,w),[[an,u.value]])}}});function Dn(e){const o=[.06,6,50];return typeof e=="string"&&e.length&&e.split(":").forEach((a,r)=>{const n=parseFloat(a);n&&(o[r]=n)}),o}const Vn=sn({name:"touch-swipe",beforeMount(e,{value:o,arg:a,modifiers:r}){if(r.mouse!==!0&&Z.has.touch!==!0)return;const n=r.mouseCapture===!0?"Capture":"",t={handler:o,sensitivity:Dn(a),direction:We(r),noop:ln,mouseStart(i){Xe(i,t)&&un(i)&&(se(t,"temp",[[document,"mousemove","move",`notPassive${n}`],[document,"mouseup","end","notPassiveCapture"]]),t.start(i,!0))},touchStart(i){if(Xe(i,t)){const l=i.target;se(t,"temp",[[l,"touchmove","move","notPassiveCapture"],[l,"touchcancel","end","notPassiveCapture"],[l,"touchend","end","notPassiveCapture"]]),t.start(i)}},start(i,l){Z.is.firefox===!0&&me(e,!0);const s=Ze(i);t.event={x:s.left,y:s.top,time:Date.now(),mouse:l===!0,dir:!1}},move(i){if(t.event===void 0)return;if(t.event.dir!==!1){re(i);return}const l=Date.now()-t.event.time;if(l===0)return;const s=Ze(i),c=s.left-t.event.x,d=Math.abs(c),p=s.top-t.event.y,h=Math.abs(p);if(t.event.mouse!==!0){if(d<t.sensitivity[1]&&h<t.sensitivity[1]){t.end(i);return}}else if(window.getSelection().toString()!==""){t.end(i);return}else if(d<t.sensitivity[2]&&h<t.sensitivity[2])return;const u=d/l,b=h/l;t.direction.vertical===!0&&d<h&&d<100&&b>t.sensitivity[0]&&(t.event.dir=p<0?"up":"down"),t.direction.horizontal===!0&&d>h&&h<100&&u>t.sensitivity[0]&&(t.event.dir=c<0?"left":"right"),t.direction.up===!0&&d<h&&p<0&&d<100&&b>t.sensitivity[0]&&(t.event.dir="up"),t.direction.down===!0&&d<h&&p>0&&d<100&&b>t.sensitivity[0]&&(t.event.dir="down"),t.direction.left===!0&&d>h&&c<0&&h<100&&u>t.sensitivity[0]&&(t.event.dir="left"),t.direction.right===!0&&d>h&&c>0&&h<100&&u>t.sensitivity[0]&&(t.event.dir="right"),t.event.dir!==!1?(re(i),t.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),cn(),t.styleCleanup=v=>{t.styleCleanup=void 0,document.body.classList.remove("non-selectable");const y=()=>{document.body.classList.remove("no-pointer-events--children")};v===!0?setTimeout(y,50):y()}),t.handler({evt:i,touch:t.event.mouse!==!0,mouse:t.event.mouse,direction:t.event.dir,duration:l,distance:{x:d,y:h}})):t.end(i)},end(i){t.event!==void 0&&(pe(t,"temp"),Z.is.firefox===!0&&me(e,!1),t.styleCleanup!==void 0&&t.styleCleanup(!0),i!==void 0&&t.event.dir!==!1&&re(i),t.event=void 0)}};if(e.__qtouchswipe=t,r.mouse===!0){const i=r.mouseCapture===!0||r.mousecapture===!0?"Capture":"";se(t,"main",[[e,"mousedown","mouseStart",`passive${i}`]])}Z.has.touch===!0&&se(t,"main",[[e,"touchstart","touchStart",`passive${r.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,o){const a=e.__qtouchswipe;a!==void 0&&(o.oldValue!==o.value&&(typeof o.value!="function"&&a.end(),a.handler=o.value),a.direction=We(o.modifiers))},beforeUnmount(e){const o=e.__qtouchswipe;o!==void 0&&(pe(o,"main"),pe(o,"temp"),Z.is.firefox===!0&&me(e,!1),o.styleCleanup!==void 0&&o.styleCleanup(),delete e.__qtouchswipe)}});function Qt(){let e=Object.create(null);return{getCache:(o,a)=>e[o]===void 0?e[o]=typeof a=="function"?a():a:e[o],setCache(o,a){e[o]=a},hasCache(o){return Object.hasOwnProperty.call(e,o)},clearCache(o){o!==void 0?delete e[o]:e=Object.create(null)}}}const xn={name:{required:!0},disable:Boolean},it={setup(e,{slots:o}){return()=>M("div",{class:"q-panel scroll",role:"tabpanel"},X(o.default))}},$n={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},Un=["update:modelValue","beforeTransition","transition"];function Fn(){const{props:e,emit:o,proxy:a}=ie(),{getCache:r}=Qt(),{registerTimeout:n}=dn();let t,i;const l=F(null),s={value:null};function c(C){const T=e.vertical===!0?"up":"left";g((a.$q.lang.rtl===!0?-1:1)*(C.direction===T?1:-1))}const d=k(()=>[[Vn,c,void 0,{horizontal:e.vertical!==!0,vertical:e.vertical,mouse:!0}]]),p=k(()=>e.transitionPrev||`slide-${e.vertical===!0?"down":"right"}`),h=k(()=>e.transitionNext||`slide-${e.vertical===!0?"up":"left"}`),u=k(()=>`--q-transition-duration: ${e.transitionDuration}ms`),b=k(()=>typeof e.modelValue=="string"||typeof e.modelValue=="number"?e.modelValue:String(e.modelValue)),v=k(()=>({include:e.keepAliveInclude,exclude:e.keepAliveExclude,max:e.keepAliveMax})),y=k(()=>e.keepAliveInclude!==void 0||e.keepAliveExclude!==void 0);fn(()=>e.modelValue,(C,T)=>{const D=S(C)===!0?_(C):-1;i!==!0&&m(D===-1?0:D<_(T)?-1:1),s.value!==D&&(s.value=D,o("beforeTransition",C,T),n(()=>{o("transition",C,T)},e.transitionDuration))});function w(){g(1)}function B(){g(-1)}function E(C){o("update:modelValue",C)}function S(C){return C!=null&&C!==""}function _(C){return t.findIndex(T=>T.props.name===C&&T.props.disable!==""&&T.props.disable!==!0)}function P(){return t.filter(C=>C.props.disable!==""&&C.props.disable!==!0)}function m(C){const T=C!==0&&e.animated===!0&&s.value!==-1?"q-transition--"+(C===-1?p.value:h.value):null;l.value!==T&&(l.value=T)}function g(C,T=s.value){let D=T+C;for(;D!==-1&&D<t.length;){const Y=t[D];if(Y!==void 0&&Y.props.disable!==""&&Y.props.disable!==!0){m(C),i=!0,o("update:modelValue",Y.props.name),setTimeout(()=>{i=!1});return}D+=C}e.infinite===!0&&t.length!==0&&T!==-1&&T!==t.length&&g(C,C===-1?t.length:-1)}function f(){const C=_(e.modelValue);return s.value!==C&&(s.value=C),!0}function I(){const C=S(e.modelValue)===!0&&f()&&t[s.value];return e.keepAlive===!0?[M($t,v.value,[M(y.value===!0?r(b.value,()=>({...it,name:b.value})):it,{key:b.value,style:u.value},()=>C)])]:[M("div",{class:"q-panel scroll",style:u.value,key:b.value,role:"tabpanel"},[C])]}function N(){if(t.length!==0)return e.animated===!0?[M(xt,{name:l.value},I)]:I()}function A(C){return t=hn(X(C.default,[])).filter(T=>T.props!==null&&T.props.slot===void 0&&S(T.props.name)===!0),t.length}function q(){return t}return Object.assign(a,{next:w,previous:B,goTo:E}),{panelIndex:s,panelDirectives:d,updatePanelsList:A,updatePanelIndex:f,getPanelContent:N,getEnabledPanels:P,getPanels:q,isValidPanelName:S,keepAliveProps:v,needsUniqueKeepAliveWrapper:y,goToPanelByOffset:g,goToPanel:E,nextPanel:w,previousPanel:B}}function Kt(e){return M("div",{class:"q-stepper__step-content"},[M("div",{class:"q-stepper__step-inner"},X(e.default))])}const at={setup(e,{slots:o}){return()=>Kt(o)}},st=oe({name:"QStep",props:{...xn,icon:String,color:String,title:{type:String,required:!0},caption:String,prefix:[String,Number],doneIcon:String,doneColor:String,activeIcon:String,activeColor:String,errorIcon:String,errorColor:String,headerNav:{type:Boolean,default:!0},done:Boolean,error:Boolean,onScroll:[Function,Array]},setup(e,{slots:o,emit:a}){const{proxy:{$q:r}}=ie(),n=gn(Ut,ve);if(n===ve)return console.error("QStep needs to be a child of QStepper"),ve;const{getCache:t}=Qt(),i=F(null),l=k(()=>n.value.modelValue===e.name),s=k(()=>r.platform.is.ios!==!0&&r.platform.is.chrome===!0||l.value!==!0||n.value.vertical!==!0?{}:{onScroll(p){const{target:h}=p;h.scrollTop>0&&(h.scrollTop=0),e.onScroll!==void 0&&a("scroll",p)}}),c=k(()=>typeof e.name=="string"||typeof e.name=="number"?e.name:String(e.name));function d(){const p=n.value.vertical;return p===!0&&n.value.keepAlive===!0?M($t,n.value.keepAliveProps.value,l.value===!0?[M(n.value.needsUniqueKeepAliveWrapper.value===!0?t(c.value,()=>({...at,name:c.value})):at,{key:c.value},o.default)]:void 0):p!==!0||l.value===!0?Kt(o):void 0}return()=>M("div",{ref:i,class:"q-stepper__step",role:"tabpanel",...s.value},n.value.vertical===!0?[M(Ft,{stepper:n.value,step:e,goToPanel:n.value.goToPanel}),n.value.animated===!0?M(Ln,d):d()]:[d()])}}),Qn=/(-\w)/g;function Kn(e){const o={};for(const a in e){const r=a.replace(Qn,n=>n[1].toUpperCase());o[r]=e[a]}return o}const zn=oe({name:"QStepper",props:{...mn,...$n,flat:Boolean,bordered:Boolean,alternativeLabels:Boolean,headerNav:Boolean,contracted:Boolean,headerClass:String,inactiveColor:String,inactiveIcon:String,doneIcon:String,doneColor:String,activeIcon:String,activeColor:String,errorIcon:String,errorColor:String},emits:Un,setup(e,{slots:o}){const a=ie(),r=pn(e,a.proxy.$q),{updatePanelsList:n,isValidPanelName:t,updatePanelIndex:i,getPanelContent:l,getPanels:s,panelDirectives:c,goToPanel:d,keepAliveProps:p,needsUniqueKeepAliveWrapper:h}=Fn();Dt(Ut,k(()=>({goToPanel:d,keepAliveProps:p,needsUniqueKeepAliveWrapper:h,...e})));const u=k(()=>`q-stepper q-stepper--${e.vertical===!0?"vertical":"horizontal"}`+(e.flat===!0?" q-stepper--flat":"")+(e.bordered===!0?" q-stepper--bordered":"")+(r.value===!0?" q-stepper--dark q-dark":"")),b=k(()=>`q-stepper__header row items-stretch justify-between q-stepper__header--${e.alternativeLabels===!0?"alternative":"standard"}-labels`+(e.flat===!1||e.bordered===!0?" q-stepper__header--border":"")+(e.contracted===!0?" q-stepper__header--contracted":"")+(e.headerClass!==void 0?` ${e.headerClass}`:""));function v(){const y=X(o.message,[]);if(e.vertical===!0){t(e.modelValue)&&i();const w=M("div",{class:"q-stepper__content"},X(o.default));return y===void 0?[w]:y.concat(w)}return[M("div",{class:b.value},s().map(w=>{const B=Kn(w.props);return M(Ft,{key:B.name,stepper:e,step:B,goToPanel:d})})),y,wn("div",{class:"q-stepper__content q-panel-parent"},l(),"cont",e.swipeable,()=>c.value)]}return()=>(n(o),M("div",{class:u.value},vn(o.navigation,v())))}});var W={},Se,lt;function jn(){return lt||(lt=1,Se=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),Se}var Pe={},K={},ut;function O(){if(ut)return K;ut=1;let e;const o=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return K.getSymbolSize=function(r){if(!r)throw new Error('"version" cannot be null or undefined');if(r<1||r>40)throw new Error('"version" should be in range from 1 to 40');return r*4+17},K.getSymbolTotalCodewords=function(r){return o[r]},K.getBCHDigit=function(a){let r=0;for(;a!==0;)r++,a>>>=1;return r},K.setToSJISFunction=function(r){if(typeof r!="function")throw new Error('"toSJISFunc" is not a valid function.');e=r},K.isKanjiModeEnabled=function(){return typeof e<"u"},K.toSJIS=function(r){return e(r)},K}var Be={},ct;function He(){return ct||(ct=1,function(e){e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2};function o(a){if(typeof a!="string")throw new Error("Param is not a string");switch(a.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+a)}}e.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},e.from=function(r,n){if(e.isValid(r))return r;try{return o(r)}catch{return n}}}(Be)),Be}var Ae,dt;function On(){if(dt)return Ae;dt=1;function e(){this.buffer=[],this.length=0}return e.prototype={get:function(o){const a=Math.floor(o/8);return(this.buffer[a]>>>7-o%8&1)===1},put:function(o,a){for(let r=0;r<a;r++)this.putBit((o>>>a-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(o){const a=Math.floor(this.length/8);this.buffer.length<=a&&this.buffer.push(0),o&&(this.buffer[a]|=128>>>this.length%8),this.length++}},Ae=e,Ae}var Ne,ft;function Hn(){if(ft)return Ne;ft=1;function e(o){if(!o||o<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=o,this.data=new Uint8Array(o*o),this.reservedBit=new Uint8Array(o*o)}return e.prototype.set=function(o,a,r,n){const t=o*this.size+a;this.data[t]=r,n&&(this.reservedBit[t]=!0)},e.prototype.get=function(o,a){return this.data[o*this.size+a]},e.prototype.xor=function(o,a,r){this.data[o*this.size+a]^=r},e.prototype.isReserved=function(o,a){return this.reservedBit[o*this.size+a]},Ne=e,Ne}var qe={},ht;function Yn(){return ht||(ht=1,function(e){const o=O().getSymbolSize;e.getRowColCoords=function(r){if(r===1)return[];const n=Math.floor(r/7)+2,t=o(r),i=t===145?26:Math.ceil((t-13)/(2*n-2))*2,l=[t-7];for(let s=1;s<n-1;s++)l[s]=l[s-1]-i;return l.push(6),l.reverse()},e.getPositions=function(r){const n=[],t=e.getRowColCoords(r),i=t.length;for(let l=0;l<i;l++)for(let s=0;s<i;s++)l===0&&s===0||l===0&&s===i-1||l===i-1&&s===0||n.push([t[l],t[s]]);return n}}(qe)),qe}var Ie={},gt;function Jn(){if(gt)return Ie;gt=1;const e=O().getSymbolSize,o=7;return Ie.getPositions=function(r){const n=e(r);return[[0,0],[n-o,0],[0,n-o]]},Ie}var _e={},mt;function Gn(){return mt||(mt=1,function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const o={N1:3,N2:3,N3:40,N4:10};e.isValid=function(n){return n!=null&&n!==""&&!isNaN(n)&&n>=0&&n<=7},e.from=function(n){return e.isValid(n)?parseInt(n,10):void 0},e.getPenaltyN1=function(n){const t=n.size;let i=0,l=0,s=0,c=null,d=null;for(let p=0;p<t;p++){l=s=0,c=d=null;for(let h=0;h<t;h++){let u=n.get(p,h);u===c?l++:(l>=5&&(i+=o.N1+(l-5)),c=u,l=1),u=n.get(h,p),u===d?s++:(s>=5&&(i+=o.N1+(s-5)),d=u,s=1)}l>=5&&(i+=o.N1+(l-5)),s>=5&&(i+=o.N1+(s-5))}return i},e.getPenaltyN2=function(n){const t=n.size;let i=0;for(let l=0;l<t-1;l++)for(let s=0;s<t-1;s++){const c=n.get(l,s)+n.get(l,s+1)+n.get(l+1,s)+n.get(l+1,s+1);(c===4||c===0)&&i++}return i*o.N2},e.getPenaltyN3=function(n){const t=n.size;let i=0,l=0,s=0;for(let c=0;c<t;c++){l=s=0;for(let d=0;d<t;d++)l=l<<1&2047|n.get(c,d),d>=10&&(l===1488||l===93)&&i++,s=s<<1&2047|n.get(d,c),d>=10&&(s===1488||s===93)&&i++}return i*o.N3},e.getPenaltyN4=function(n){let t=0;const i=n.data.length;for(let s=0;s<i;s++)t+=n.data[s];return Math.abs(Math.ceil(t*100/i/5)-10)*o.N4};function a(r,n,t){switch(r){case e.Patterns.PATTERN000:return(n+t)%2===0;case e.Patterns.PATTERN001:return n%2===0;case e.Patterns.PATTERN010:return t%3===0;case e.Patterns.PATTERN011:return(n+t)%3===0;case e.Patterns.PATTERN100:return(Math.floor(n/2)+Math.floor(t/3))%2===0;case e.Patterns.PATTERN101:return n*t%2+n*t%3===0;case e.Patterns.PATTERN110:return(n*t%2+n*t%3)%2===0;case e.Patterns.PATTERN111:return(n*t%3+(n+t)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}e.applyMask=function(n,t){const i=t.size;for(let l=0;l<i;l++)for(let s=0;s<i;s++)t.isReserved(s,l)||t.xor(s,l,a(n,s,l))},e.getBestMask=function(n,t){const i=Object.keys(e.Patterns).length;let l=0,s=1/0;for(let c=0;c<i;c++){t(c),e.applyMask(c,n);const d=e.getPenaltyN1(n)+e.getPenaltyN2(n)+e.getPenaltyN3(n)+e.getPenaltyN4(n);e.applyMask(c,n),d<s&&(s=d,l=c)}return l}}(_e)),_e}var ce={},pt;function zt(){if(pt)return ce;pt=1;const e=He(),o=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],a=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return ce.getBlocksCount=function(n,t){switch(t){case e.L:return o[(n-1)*4+0];case e.M:return o[(n-1)*4+1];case e.Q:return o[(n-1)*4+2];case e.H:return o[(n-1)*4+3];default:return}},ce.getTotalCodewordsCount=function(n,t){switch(t){case e.L:return a[(n-1)*4+0];case e.M:return a[(n-1)*4+1];case e.Q:return a[(n-1)*4+2];case e.H:return a[(n-1)*4+3];default:return}},ce}var Re={},ne={},vt;function Wn(){if(vt)return ne;vt=1;const e=new Uint8Array(512),o=new Uint8Array(256);return function(){let r=1;for(let n=0;n<255;n++)e[n]=r,o[r]=n,r<<=1,r&256&&(r^=285);for(let n=255;n<512;n++)e[n]=e[n-255]}(),ne.log=function(r){if(r<1)throw new Error("log("+r+")");return o[r]},ne.exp=function(r){return e[r]},ne.mul=function(r,n){return r===0||n===0?0:e[o[r]+o[n]]},ne}var wt;function Xn(){return wt||(wt=1,function(e){const o=Wn();e.mul=function(r,n){const t=new Uint8Array(r.length+n.length-1);for(let i=0;i<r.length;i++)for(let l=0;l<n.length;l++)t[i+l]^=o.mul(r[i],n[l]);return t},e.mod=function(r,n){let t=new Uint8Array(r);for(;t.length-n.length>=0;){const i=t[0];for(let s=0;s<n.length;s++)t[s]^=o.mul(n[s],i);let l=0;for(;l<t.length&&t[l]===0;)l++;t=t.slice(l)}return t},e.generateECPolynomial=function(r){let n=new Uint8Array([1]);for(let t=0;t<r;t++)n=e.mul(n,new Uint8Array([1,o.exp(t)]));return n}}(Re)),Re}var Te,yt;function Zn(){if(yt)return Te;yt=1;const e=Xn();function o(a){this.genPoly=void 0,this.degree=a,this.degree&&this.initialize(this.degree)}return o.prototype.initialize=function(r){this.degree=r,this.genPoly=e.generateECPolynomial(this.degree)},o.prototype.encode=function(r){if(!this.genPoly)throw new Error("Encoder not initialized");const n=new Uint8Array(r.length+this.degree);n.set(r);const t=e.mod(n,this.genPoly),i=this.degree-t.length;if(i>0){const l=new Uint8Array(this.degree);return l.set(t,i),l}return t},Te=o,Te}var ke={},Me={},Le={},Ct;function jt(){return Ct||(Ct=1,Le.isValid=function(o){return!isNaN(o)&&o>=1&&o<=40}),Le}var x={},bt;function Ot(){if(bt)return x;bt=1;const e="[0-9]+",o="[A-Z $%*+\\-./:]+";let a="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";a=a.replace(/u/g,"\\u");const r="(?:(?![A-Z0-9 $%*+\\-./:]|"+a+`)(?:.|[\r
]))+`;x.KANJI=new RegExp(a,"g"),x.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),x.BYTE=new RegExp(r,"g"),x.NUMERIC=new RegExp(e,"g"),x.ALPHANUMERIC=new RegExp(o,"g");const n=new RegExp("^"+a+"$"),t=new RegExp("^"+e+"$"),i=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return x.testKanji=function(s){return n.test(s)},x.testNumeric=function(s){return t.test(s)},x.testAlphanumeric=function(s){return i.test(s)},x}var Et;function H(){return Et||(Et=1,function(e){const o=jt(),a=Ot();e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(t,i){if(!t.ccBits)throw new Error("Invalid mode: "+t);if(!o.isValid(i))throw new Error("Invalid version: "+i);return i>=1&&i<10?t.ccBits[0]:i<27?t.ccBits[1]:t.ccBits[2]},e.getBestModeForData=function(t){return a.testNumeric(t)?e.NUMERIC:a.testAlphanumeric(t)?e.ALPHANUMERIC:a.testKanji(t)?e.KANJI:e.BYTE},e.toString=function(t){if(t&&t.id)return t.id;throw new Error("Invalid mode")},e.isValid=function(t){return t&&t.bit&&t.ccBits};function r(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+n)}}e.from=function(t,i){if(e.isValid(t))return t;try{return r(t)}catch{return i}}}(Me)),Me}var St;function er(){return St||(St=1,function(e){const o=O(),a=zt(),r=He(),n=H(),t=jt(),i=7973,l=o.getBCHDigit(i);function s(h,u,b){for(let v=1;v<=40;v++)if(u<=e.getCapacity(v,b,h))return v}function c(h,u){return n.getCharCountIndicator(h,u)+4}function d(h,u){let b=0;return h.forEach(function(v){const y=c(v.mode,u);b+=y+v.getBitsLength()}),b}function p(h,u){for(let b=1;b<=40;b++)if(d(h,b)<=e.getCapacity(b,u,n.MIXED))return b}e.from=function(u,b){return t.isValid(u)?parseInt(u,10):b},e.getCapacity=function(u,b,v){if(!t.isValid(u))throw new Error("Invalid QR Code version");typeof v>"u"&&(v=n.BYTE);const y=o.getSymbolTotalCodewords(u),w=a.getTotalCodewordsCount(u,b),B=(y-w)*8;if(v===n.MIXED)return B;const E=B-c(v,u);switch(v){case n.NUMERIC:return Math.floor(E/10*3);case n.ALPHANUMERIC:return Math.floor(E/11*2);case n.KANJI:return Math.floor(E/13);case n.BYTE:default:return Math.floor(E/8)}},e.getBestVersionForData=function(u,b){let v;const y=r.from(b,r.M);if(Array.isArray(u)){if(u.length>1)return p(u,y);if(u.length===0)return 1;v=u[0]}else v=u;return s(v.mode,v.getLength(),y)},e.getEncodedBits=function(u){if(!t.isValid(u)||u<7)throw new Error("Invalid QR Code version");let b=u<<12;for(;o.getBCHDigit(b)-l>=0;)b^=i<<o.getBCHDigit(b)-l;return u<<12|b}}(ke)),ke}var De={},Pt;function tr(){if(Pt)return De;Pt=1;const e=O(),o=1335,a=21522,r=e.getBCHDigit(o);return De.getEncodedBits=function(t,i){const l=t.bit<<3|i;let s=l<<10;for(;e.getBCHDigit(s)-r>=0;)s^=o<<e.getBCHDigit(s)-r;return(l<<10|s)^a},De}var Ve={},xe,Bt;function nr(){if(Bt)return xe;Bt=1;const e=H();function o(a){this.mode=e.NUMERIC,this.data=a.toString()}return o.getBitsLength=function(r){return 10*Math.floor(r/3)+(r%3?r%3*3+1:0)},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(r){let n,t,i;for(n=0;n+3<=this.data.length;n+=3)t=this.data.substr(n,3),i=parseInt(t,10),r.put(i,10);const l=this.data.length-n;l>0&&(t=this.data.substr(n),i=parseInt(t,10),r.put(i,l*3+1))},xe=o,xe}var $e,At;function rr(){if(At)return $e;At=1;const e=H(),o=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function a(r){this.mode=e.ALPHANUMERIC,this.data=r}return a.getBitsLength=function(n){return 11*Math.floor(n/2)+6*(n%2)},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(n){let t;for(t=0;t+2<=this.data.length;t+=2){let i=o.indexOf(this.data[t])*45;i+=o.indexOf(this.data[t+1]),n.put(i,11)}this.data.length%2&&n.put(o.indexOf(this.data[t]),6)},$e=a,$e}var Ue,Nt;function or(){if(Nt)return Ue;Nt=1;const e=H();function o(a){this.mode=e.BYTE,typeof a=="string"?this.data=new TextEncoder().encode(a):this.data=new Uint8Array(a)}return o.getBitsLength=function(r){return r*8},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(a){for(let r=0,n=this.data.length;r<n;r++)a.put(this.data[r],8)},Ue=o,Ue}var Fe,qt;function ir(){if(qt)return Fe;qt=1;const e=H(),o=O();function a(r){this.mode=e.KANJI,this.data=r}return a.getBitsLength=function(n){return n*13},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(r){let n;for(n=0;n<this.data.length;n++){let t=o.toSJIS(this.data[n]);if(t>=33088&&t<=40956)t-=33088;else if(t>=57408&&t<=60351)t-=49472;else throw new Error("Invalid SJIS character: "+this.data[n]+`
Make sure your charset is UTF-8`);t=(t>>>8&255)*192+(t&255),r.put(t,13)}},Fe=a,Fe}var Qe={exports:{}},It;function ar(){return It||(It=1,function(e){var o={single_source_shortest_paths:function(a,r,n){var t={},i={};i[r]=0;var l=o.PriorityQueue.make();l.push(r,0);for(var s,c,d,p,h,u,b,v,y;!l.empty();){s=l.pop(),c=s.value,p=s.cost,h=a[c]||{};for(d in h)h.hasOwnProperty(d)&&(u=h[d],b=p+u,v=i[d],y=typeof i[d]>"u",(y||v>b)&&(i[d]=b,l.push(d,b),t[d]=c))}if(typeof n<"u"&&typeof i[n]>"u"){var w=["Could not find a path from ",r," to ",n,"."].join("");throw new Error(w)}return t},extract_shortest_path_from_predecessor_list:function(a,r){for(var n=[],t=r;t;)n.push(t),a[t],t=a[t];return n.reverse(),n},find_path:function(a,r,n){var t=o.single_source_shortest_paths(a,r,n);return o.extract_shortest_path_from_predecessor_list(t,n)},PriorityQueue:{make:function(a){var r=o.PriorityQueue,n={},t;a=a||{};for(t in r)r.hasOwnProperty(t)&&(n[t]=r[t]);return n.queue=[],n.sorter=a.sorter||r.default_sorter,n},default_sorter:function(a,r){return a.cost-r.cost},push:function(a,r){var n={value:a,cost:r};this.queue.push(n),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};e.exports=o}(Qe)),Qe.exports}var _t;function sr(){return _t||(_t=1,function(e){const o=H(),a=nr(),r=rr(),n=or(),t=ir(),i=Ot(),l=O(),s=ar();function c(w){return unescape(encodeURIComponent(w)).length}function d(w,B,E){const S=[];let _;for(;(_=w.exec(E))!==null;)S.push({data:_[0],index:_.index,mode:B,length:_[0].length});return S}function p(w){const B=d(i.NUMERIC,o.NUMERIC,w),E=d(i.ALPHANUMERIC,o.ALPHANUMERIC,w);let S,_;return l.isKanjiModeEnabled()?(S=d(i.BYTE,o.BYTE,w),_=d(i.KANJI,o.KANJI,w)):(S=d(i.BYTE_KANJI,o.BYTE,w),_=[]),B.concat(E,S,_).sort(function(m,g){return m.index-g.index}).map(function(m){return{data:m.data,mode:m.mode,length:m.length}})}function h(w,B){switch(B){case o.NUMERIC:return a.getBitsLength(w);case o.ALPHANUMERIC:return r.getBitsLength(w);case o.KANJI:return t.getBitsLength(w);case o.BYTE:return n.getBitsLength(w)}}function u(w){return w.reduce(function(B,E){const S=B.length-1>=0?B[B.length-1]:null;return S&&S.mode===E.mode?(B[B.length-1].data+=E.data,B):(B.push(E),B)},[])}function b(w){const B=[];for(let E=0;E<w.length;E++){const S=w[E];switch(S.mode){case o.NUMERIC:B.push([S,{data:S.data,mode:o.ALPHANUMERIC,length:S.length},{data:S.data,mode:o.BYTE,length:S.length}]);break;case o.ALPHANUMERIC:B.push([S,{data:S.data,mode:o.BYTE,length:S.length}]);break;case o.KANJI:B.push([S,{data:S.data,mode:o.BYTE,length:c(S.data)}]);break;case o.BYTE:B.push([{data:S.data,mode:o.BYTE,length:c(S.data)}])}}return B}function v(w,B){const E={},S={start:{}};let _=["start"];for(let P=0;P<w.length;P++){const m=w[P],g=[];for(let f=0;f<m.length;f++){const I=m[f],N=""+P+f;g.push(N),E[N]={node:I,lastCount:0},S[N]={};for(let A=0;A<_.length;A++){const q=_[A];E[q]&&E[q].node.mode===I.mode?(S[q][N]=h(E[q].lastCount+I.length,I.mode)-h(E[q].lastCount,I.mode),E[q].lastCount+=I.length):(E[q]&&(E[q].lastCount=I.length),S[q][N]=h(I.length,I.mode)+4+o.getCharCountIndicator(I.mode,B))}}_=g}for(let P=0;P<_.length;P++)S[_[P]].end=0;return{map:S,table:E}}function y(w,B){let E;const S=o.getBestModeForData(w);if(E=o.from(B,S),E!==o.BYTE&&E.bit<S.bit)throw new Error('"'+w+'" cannot be encoded with mode '+o.toString(E)+`.
 Suggested mode is: `+o.toString(S));switch(E===o.KANJI&&!l.isKanjiModeEnabled()&&(E=o.BYTE),E){case o.NUMERIC:return new a(w);case o.ALPHANUMERIC:return new r(w);case o.KANJI:return new t(w);case o.BYTE:return new n(w)}}e.fromArray=function(B){return B.reduce(function(E,S){return typeof S=="string"?E.push(y(S,null)):S.data&&E.push(y(S.data,S.mode)),E},[])},e.fromString=function(B,E){const S=p(B,l.isKanjiModeEnabled()),_=b(S),P=v(_,E),m=s.find_path(P.map,"start","end"),g=[];for(let f=1;f<m.length-1;f++)g.push(P.table[m[f]].node);return e.fromArray(u(g))},e.rawSplit=function(B){return e.fromArray(p(B,l.isKanjiModeEnabled()))}}(Ve)),Ve}var Rt;function lr(){if(Rt)return Pe;Rt=1;const e=O(),o=He(),a=On(),r=Hn(),n=Yn(),t=Jn(),i=Gn(),l=zt(),s=Zn(),c=er(),d=tr(),p=H(),h=sr();function u(P,m){const g=P.size,f=t.getPositions(m);for(let I=0;I<f.length;I++){const N=f[I][0],A=f[I][1];for(let q=-1;q<=7;q++)if(!(N+q<=-1||g<=N+q))for(let C=-1;C<=7;C++)A+C<=-1||g<=A+C||(q>=0&&q<=6&&(C===0||C===6)||C>=0&&C<=6&&(q===0||q===6)||q>=2&&q<=4&&C>=2&&C<=4?P.set(N+q,A+C,!0,!0):P.set(N+q,A+C,!1,!0))}}function b(P){const m=P.size;for(let g=8;g<m-8;g++){const f=g%2===0;P.set(g,6,f,!0),P.set(6,g,f,!0)}}function v(P,m){const g=n.getPositions(m);for(let f=0;f<g.length;f++){const I=g[f][0],N=g[f][1];for(let A=-2;A<=2;A++)for(let q=-2;q<=2;q++)A===-2||A===2||q===-2||q===2||A===0&&q===0?P.set(I+A,N+q,!0,!0):P.set(I+A,N+q,!1,!0)}}function y(P,m){const g=P.size,f=c.getEncodedBits(m);let I,N,A;for(let q=0;q<18;q++)I=Math.floor(q/3),N=q%3+g-8-3,A=(f>>q&1)===1,P.set(I,N,A,!0),P.set(N,I,A,!0)}function w(P,m,g){const f=P.size,I=d.getEncodedBits(m,g);let N,A;for(N=0;N<15;N++)A=(I>>N&1)===1,N<6?P.set(N,8,A,!0):N<8?P.set(N+1,8,A,!0):P.set(f-15+N,8,A,!0),N<8?P.set(8,f-N-1,A,!0):N<9?P.set(8,15-N-1+1,A,!0):P.set(8,15-N-1,A,!0);P.set(f-8,8,1,!0)}function B(P,m){const g=P.size;let f=-1,I=g-1,N=7,A=0;for(let q=g-1;q>0;q-=2)for(q===6&&q--;;){for(let C=0;C<2;C++)if(!P.isReserved(I,q-C)){let T=!1;A<m.length&&(T=(m[A]>>>N&1)===1),P.set(I,q-C,T),N--,N===-1&&(A++,N=7)}if(I+=f,I<0||g<=I){I-=f,f=-f;break}}}function E(P,m,g){const f=new a;g.forEach(function(C){f.put(C.mode.bit,4),f.put(C.getLength(),p.getCharCountIndicator(C.mode,P)),C.write(f)});const I=e.getSymbolTotalCodewords(P),N=l.getTotalCodewordsCount(P,m),A=(I-N)*8;for(f.getLengthInBits()+4<=A&&f.put(0,4);f.getLengthInBits()%8!==0;)f.putBit(0);const q=(A-f.getLengthInBits())/8;for(let C=0;C<q;C++)f.put(C%2?17:236,8);return S(f,P,m)}function S(P,m,g){const f=e.getSymbolTotalCodewords(m),I=l.getTotalCodewordsCount(m,g),N=f-I,A=l.getBlocksCount(m,g),q=f%A,C=A-q,T=Math.floor(f/A),D=Math.floor(N/A),Y=D+1,Ye=T-D,Yt=new s(Ye);let de=0;const ae=new Array(A),Je=new Array(A);let fe=0;const Jt=new Uint8Array(P.buffer);for(let J=0;J<A;J++){const ge=J<C?D:Y;ae[J]=Jt.slice(de,de+ge),Je[J]=Yt.encode(ae[J]),de+=ge,fe=Math.max(fe,ge)}const he=new Uint8Array(f);let Ge=0,$,U;for($=0;$<fe;$++)for(U=0;U<A;U++)$<ae[U].length&&(he[Ge++]=ae[U][$]);for($=0;$<Ye;$++)for(U=0;U<A;U++)he[Ge++]=Je[U][$];return he}function _(P,m,g,f){let I;if(Array.isArray(P))I=h.fromArray(P);else if(typeof P=="string"){let T=m;if(!T){const D=h.rawSplit(P);T=c.getBestVersionForData(D,g)}I=h.fromString(P,T||40)}else throw new Error("Invalid data");const N=c.getBestVersionForData(I,g);if(!N)throw new Error("The amount of data is too big to be stored in a QR Code");if(!m)m=N;else if(m<N)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+N+`.
`);const A=E(m,g,I),q=e.getSymbolSize(m),C=new r(q);return u(C,m),b(C),v(C,m),w(C,g,0),m>=7&&y(C,m),B(C,A),isNaN(f)&&(f=i.getBestMask(C,w.bind(null,C,g))),i.applyMask(f,C),w(C,g,f),{modules:C,version:m,errorCorrectionLevel:g,maskPattern:f,segments:I}}return Pe.create=function(m,g){if(typeof m>"u"||m==="")throw new Error("No input text");let f=o.M,I,N;return typeof g<"u"&&(f=o.from(g.errorCorrectionLevel,o.M),I=c.from(g.version),N=i.from(g.maskPattern),g.toSJISFunc&&e.setToSJISFunction(g.toSJISFunc)),_(m,I,f,N)},Pe}var Ke={},ze={},Tt;function Ht(){return Tt||(Tt=1,function(e){function o(a){if(typeof a=="number"&&(a=a.toString()),typeof a!="string")throw new Error("Color should be defined as hex string");let r=a.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+a);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(t){return[t,t]}))),r.length===6&&r.push("F","F");const n=parseInt(r.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:n&255,hex:"#"+r.slice(0,6).join("")}}e.getOptions=function(r){r||(r={}),r.color||(r.color={});const n=typeof r.margin>"u"||r.margin===null||r.margin<0?4:r.margin,t=r.width&&r.width>=21?r.width:void 0,i=r.scale||4;return{width:t,scale:t?4:i,margin:n,color:{dark:o(r.color.dark||"#000000ff"),light:o(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},e.getScale=function(r,n){return n.width&&n.width>=r+n.margin*2?n.width/(r+n.margin*2):n.scale},e.getImageWidth=function(r,n){const t=e.getScale(r,n);return Math.floor((r+n.margin*2)*t)},e.qrToImageData=function(r,n,t){const i=n.modules.size,l=n.modules.data,s=e.getScale(i,t),c=Math.floor((i+t.margin*2)*s),d=t.margin*s,p=[t.color.light,t.color.dark];for(let h=0;h<c;h++)for(let u=0;u<c;u++){let b=(h*c+u)*4,v=t.color.light;if(h>=d&&u>=d&&h<c-d&&u<c-d){const y=Math.floor((h-d)/s),w=Math.floor((u-d)/s);v=p[l[y*i+w]?1:0]}r[b++]=v.r,r[b++]=v.g,r[b++]=v.b,r[b]=v.a}}}(ze)),ze}var kt;function ur(){return kt||(kt=1,function(e){const o=Ht();function a(n,t,i){n.clearRect(0,0,t.width,t.height),t.style||(t.style={}),t.height=i,t.width=i,t.style.height=i+"px",t.style.width=i+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}e.render=function(t,i,l){let s=l,c=i;typeof s>"u"&&(!i||!i.getContext)&&(s=i,i=void 0),i||(c=r()),s=o.getOptions(s);const d=o.getImageWidth(t.modules.size,s),p=c.getContext("2d"),h=p.createImageData(d,d);return o.qrToImageData(h.data,t,s),a(p,c,d),p.putImageData(h,0,0),c},e.renderToDataURL=function(t,i,l){let s=l;typeof s>"u"&&(!i||!i.getContext)&&(s=i,i=void 0),s||(s={});const c=e.render(t,i,s),d=s.type||"image/png",p=s.rendererOpts||{};return c.toDataURL(d,p.quality)}}(Ke)),Ke}var je={},Mt;function cr(){if(Mt)return je;Mt=1;const e=Ht();function o(n,t){const i=n.a/255,l=t+'="'+n.hex+'"';return i<1?l+" "+t+'-opacity="'+i.toFixed(2).slice(1)+'"':l}function a(n,t,i){let l=n+t;return typeof i<"u"&&(l+=" "+i),l}function r(n,t,i){let l="",s=0,c=!1,d=0;for(let p=0;p<n.length;p++){const h=Math.floor(p%t),u=Math.floor(p/t);!h&&!c&&(c=!0),n[p]?(d++,p>0&&h>0&&n[p-1]||(l+=c?a("M",h+i,.5+u+i):a("m",s,0),s=0,c=!1),h+1<t&&n[p+1]||(l+=a("h",d),d=0)):s++}return l}return je.render=function(t,i,l){const s=e.getOptions(i),c=t.modules.size,d=t.modules.data,p=c+s.margin*2,h=s.color.light.a?"<path "+o(s.color.light,"fill")+' d="M0 0h'+p+"v"+p+'H0z"/>':"",u="<path "+o(s.color.dark,"stroke")+' d="'+r(d,c,s.margin)+'"/>',b='viewBox="0 0 '+p+" "+p+'"',y='<svg xmlns="http://www.w3.org/2000/svg" '+(s.width?'width="'+s.width+'" height="'+s.width+'" ':"")+b+' shape-rendering="crispEdges">'+h+u+`</svg>
`;return typeof l=="function"&&l(null,y),y},je}var Lt;function dr(){if(Lt)return W;Lt=1;const e=jn(),o=lr(),a=ur(),r=cr();function n(t,i,l,s,c){const d=[].slice.call(arguments,1),p=d.length,h=typeof d[p-1]=="function";if(!h&&!e())throw new Error("Callback required as last argument");if(h){if(p<2)throw new Error("Too few arguments provided");p===2?(c=l,l=i,i=s=void 0):p===3&&(i.getContext&&typeof c>"u"?(c=s,s=void 0):(c=s,s=l,l=i,i=void 0))}else{if(p<1)throw new Error("Too few arguments provided");return p===1?(l=i,i=s=void 0):p===2&&!i.getContext&&(s=l,l=i,i=void 0),new Promise(function(u,b){try{const v=o.create(l,s);u(t(v,i,s))}catch(v){b(v)}})}try{const u=o.create(l,s);c(null,t(u,i,s))}catch(u){c(u)}}return W.create=o.create,W.toCanvas=n.bind(null,a.render),W.toDataURL=n.bind(null,a.renderToDataURL),W.toString=n.bind(null,function(t,i,l){return r.render(t,l)}),W}var fr=dr();const hr=kn(fr),gr={class:"tw-container tw-max-w-screen-xl tw-mx-auto"},mr={class:"row q-col-gutter-md"},pr={class:"col-12 col-md-8"},vr={class:"col-12 col-sm-6"},wr={class:"col-12 col-sm-6"},yr={class:"col-12"},Cr={class:"col-12"},br={key:0,class:"text-warning text-xs"},Er={class:"col-12"},Sr={class:"col-6"},Pr={class:"col-6"},Br={key:1},Ar={key:0,class:"q-mt-lg"},Nr={class:"col-12 col-md-4"},qr={class:"tw-text-xl tw-mb-4"},Oe=!0,Ir=yn({__name:"CheckoutPage",setup(e){Cn(m=>({"348162d8":p.value,"17f4fbdc":h.value}));const o=bn(),a=En(),r=Mn(),n=Sn(),{t}=Pn(),i=F(1),l=F("card"),s=F({firstName:"",lastName:"",email:"",address:""}),c=F({cardNumber:"",expiry:"",cvv:""}),d=F(null),p=k(()=>o.dark.isActive?"white":"black"),h=k(()=>o.dark.isActive?"black":"white"),u=k(()=>a.items.reduce((m,g)=>m+g.price*g.quantity,0)),b={id:Math.floor(Math.random()*1e3),items:a.items,total:u.value,firstName:s.value.firstName,lastName:s.value.lastName,email:s.value.email,address:s.value.address,cardNumber:c.value.cardNumber,cvv:c.value.cvv,expiry:c.value.expiry},v=async()=>{const m="Payment for E-comm-platform",g=Math.floor(Math.random()*1e3),f="160600000075936693",I=te(u.value,"RSD").trim().replace(/\s+/,"").replace(",","").replace(".",",").replace(/(,\d{2})?$/,A=>A||",00"),N=`K:PR|V:01|C:1|P:${u.value.toFixed(2)}|S:${m}|N:E-comm-platform|I:${I}|R:${f}|RO:00${g}|SF:289`.trim();try{d.value=await hr.toDataURL(N)}catch(A){console.error("Error generating QR code:",A)}},y=m=>!!m||"Field is required",w=m=>/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(m)||"Invalid email",B=()=>{i.value++},E=()=>{i.value++},S=()=>{n.push("/cart")},_=()=>{o.dialog({title:t("checkout.title"),message:`
      <div class="tw-flex tw-flex-col tw-items-start full-width">
        <h6 class="q-my-none">${t("checkout.summary")}</h6>
        <p class="text-h6 q-mb-md">${t("checkout.total")}: ${te(b.total)}</p>

        <div class="q-mb-md">
          <strong>${t("checkout.shippingDetails")}:</strong>
          <p class="q-mb-none">${b.firstName} ${b.lastName}</p>
          <p class="q-mb-none">${b.email}</p>
          <p class="q-mb-none">${b.address}</p>
        </div>

        <div class="q-mb-md">
          <strong>${t("checkout.paymentInfo")}:</strong>
          <p class="q-mb-none">${t("checkout.card")}: **** **** **** ${b.cardNumber.slice(-4)}</p>
          <p class="q-mb-none">${t("checkout.expiry")}: ${b.expiry}</p>
        </div>

        <div class="q-mt-sm full-width">
          <strong>${t("checkout.items")}:</strong>
          ${b.items.map(m=>`
            <div class="q-py-sm full-width tw-flex tw-justify-between tw-items-center">
              <div class="tw-flex-shrink-0 tw-mr-32">${m.name||m.title}</div>
              <div class="tw-flex-grow tw-flex tw-justify-between tw-items-center tw-gap-2">
                <div>${m.quantity}</div> <div>${te(m.price)}</div>
              </div>
            </div>
          `).join("")}
        </div>
      </div>
    `,html:!0,persistent:!0,class:"confirm-dialog",ok:{label:t("checkout.confirmButton"),flat:!0,style:`opacity: 1 !important; box-shadow: inset 0 0 0 2px ${p.value}; color: ${h.value} !important;`,class:`bg-${p.value} lt-sm:full-width`},cancel:{label:t("checkout.cancelButton"),flat:!0,style:`opacity: 1 !important; box-shadow: inset 0 0 0 2px ${p.value}; color: ${p.value} !important;`,class:`lt-sm:full-width lt-sm:q-mt-sm tw-border-${p.value}`},style:{maxWidth:"600px",width:"95vw",margin:"0 auto"}}).onOk(()=>{a.clearCart(),n.push("/thankyou")})},P=()=>{i.value++};return Vt(async()=>{await r.loadExchangeRates(),v()}),(m,g)=>(z(),we(Tn,{padding:""},{default:L(()=>[V("div",gr,[V("div",mr,[V("div",pr,[R(zn,{modelValue:i.value,"onUpdate:modelValue":g[9]||(g[9]=f=>i.value=f),vertical:"",class:"checkout-stepper",color:p.value,"text-color":h.value,"header-nav":""},{default:L(()=>[R(st,{name:1,title:m.$t("checkout.shipping"),icon:"local_shipping",done:i.value>1,class:"checkout-step","header-nav":!0},{default:L(()=>[R(ye,{flat:"",bordered:""},{default:L(()=>[R(Ce,null,{default:L(()=>[R(ot,{class:"row q-col-gutter-md",onSubmit:et(B,["prevent"])},{default:L(()=>[V("div",vr,[R(j,{modelValue:s.value.firstName,"onUpdate:modelValue":g[0]||(g[0]=f=>s.value.firstName=f),label:m.$t("checkout.firstName"),rules:[y]},null,8,["modelValue","label","rules"])]),V("div",wr,[R(j,{modelValue:s.value.lastName,"onUpdate:modelValue":g[1]||(g[1]=f=>s.value.lastName=f),label:m.$t("checkout.lastName"),rules:[y]},null,8,["modelValue","label","rules"])]),V("div",yr,[R(j,{modelValue:s.value.email,"onUpdate:modelValue":g[2]||(g[2]=f=>s.value.email=f),label:m.$t("checkout.email"),type:"email",rules:[y,w]},null,8,["modelValue","label","rules"])]),V("div",Cr,[R(j,{modelValue:s.value.address,"onUpdate:modelValue":g[3]||(g[3]=f=>s.value.address=f),label:m.$t("checkout.address"),rules:[y]},null,8,["modelValue","label","rules"])])]),_:1})]),_:1})]),_:1})]),_:1},8,["title","done"]),R(st,{name:2,title:m.$t("checkout.payment"),icon:"payment",done:i.value>2,"header-nav":!0},{default:L(()=>[R(be,{class:"!tw-p-0"},{default:L(()=>[R(ee,{class:"tw-text-sm"},{default:L(()=>[R(tt,{modelValue:l.value,"onUpdate:modelValue":g[4]||(g[4]=f=>l.value=f),val:"card",label:m.$t("checkout.cardPayment")},null,8,["modelValue","label"]),R(tt,{modelValue:l.value,"onUpdate:modelValue":g[5]||(g[5]=f=>l.value=f),val:"ips",disable:!Oe},{default:L(()=>[V("span",null,[G(Q(m.$t("checkout.ipsScanQrCode"))+" ",1),Oe?le("",!0):(z(),ue("span",br," - Available only for RSD payments."))])]),_:1},8,["modelValue","disable"])]),_:1})]),_:1}),l.value==="card"?(z(),we(ye,{key:0,flat:"",bordered:""},{default:L(()=>[R(Ce,null,{default:L(()=>[R(ot,{class:"row q-col-gutter-md",onSubmit:et(E,["prevent"])},{default:L(()=>[V("div",Er,[R(j,{modelValue:c.value.cardNumber,"onUpdate:modelValue":g[6]||(g[6]=f=>c.value.cardNumber=f),label:m.$t("checkout.cardNumber"),mask:"#### #### #### ####",rules:[y]},null,8,["modelValue","label","rules"])]),V("div",Sr,[R(j,{modelValue:c.value.expiry,"onUpdate:modelValue":g[7]||(g[7]=f=>c.value.expiry=f),label:"MM/YY",mask:"##/##",rules:[y]},null,8,["modelValue","rules"])]),V("div",Pr,[R(j,{modelValue:c.value.cvv,"onUpdate:modelValue":g[8]||(g[8]=f=>c.value.cvv=f),label:"CVV",mask:"###",rules:[y]},null,8,["modelValue","rules"])])]),_:1})]),_:1})]),_:1})):le("",!0),Oe&&l.value==="ips"?(z(),ue("div",Br,[d.value?(z(),ue("div",Ar,[R(Rn,{src:d.value,alt:"QR Code for Payment",fit:"contain",class:"tw-w-48 tw-h-48"},null,8,["src"])])):le("",!0)])):le("",!0)]),_:1},8,["title","done"])]),_:1},8,["modelValue","color","text-color"])]),V("div",Nr,[R(ye,{class:"tw-flex tw-justify-between"},{default:L(()=>[R(Ce,{class:"tw-w-full"},{default:L(()=>[V("div",qr,Q(m.$t("checkout.orderSummary")),1),R(Bn,{dense:"",class:"tw-w-full tw-flex tw-flex-col tw-justify-between"},{default:L(()=>[(z(!0),ue(Nn,null,An(Ee(a).items,f=>(z(),we(be,{key:f.id,class:"tw-justify-between"},{default:L(()=>[R(ee,null,{default:L(()=>[R(rt,null,{default:L(()=>[G(Q(f.name||f.title),1)]),_:2},1024),R(rt,{caption:""},{default:L(()=>[G(Q(m.$t("checkout.qty"))+": "+Q(f.quantity),1)]),_:2},1024)]),_:2},1024),R(ee,{side:""},{default:L(()=>[G(Q(Ee(te)(f.price*f.quantity)),1)]),_:2},1024)]),_:2},1024))),128)),R(qn,{class:"q-my-md"}),R(be,null,{default:L(()=>[R(ee,{class:"text-subtitle1 text-weight-bold"},{default:L(()=>[G(Q(m.$t("checkout.total")),1)]),_:1}),R(ee,{side:"",class:"text-subtitle1 text-weight-bold tw-text-"},{default:L(()=>[G(Q(Ee(te)(u.value)),1)]),_:1})]),_:1})]),_:1})]),_:1}),R(In,{align:"center"},{default:L(()=>[R(nt,{color:p.value,"text-color":h.value,label:i.value===2?m.$t("checkout.placeOrder"):m.$t("checkout.continue"),class:"full-width tw-mb-2",onClick:g[10]||(g[10]=f=>i.value===2?_():P())},null,8,["color","text-color","label"]),R(nt,{color:h.value,"text-color":p.value,label:m.$t("checkout.cart"),class:"full-width",onClick:g[11]||(g[11]=f=>S())},null,8,["color","text-color","label"])]),_:1})]),_:1})])])])]),_:1}))}}),Lr=_n(Ir,[["__scopeId","data-v-6c62cf4a"]]);export{Lr as default};
