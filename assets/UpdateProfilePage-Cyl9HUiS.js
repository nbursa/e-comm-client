import{d as B,a as C,c as P,f as S,e as E,r as n,j as a,k as l,w as r,l as i,m as c,n as N,p as g,q as o,v as b,y as U,t as h,Q as f,z as q}from"./index-eqiBq1KU.js";import{Q as R}from"./QForm-E-SG7a9W.js";import{Q as j}from"./QPage-Cf_ORzAX.js";const z={class:"tw-w-full sm:tw-max-w-72 tw-mx-auto"},I={key:2,class:"tw-text-red-500 tw-mb-4"},F={class:"tw-flex tw-flex-col tw-gap-2"},D=B({__name:"UpdateProfilePage",setup(G){const d=C(),y=P(),_=S(),{t:v}=E(),w=n(d.user?.name||""),m=n(d.user?.email||""),u=n(null),s=n(!1),x=()=>{_.back()},Q=async()=>{try{const t=await d.updateProfile({name:w.value,email:m.value});y.notify({type:"positive",message:t,position:"top",timeout:5e3,icon:"check"}),s.value=!0}catch(t){const e=t;u.value=e.response?.data?.error||"Failed to change password. Please try again.",y.notify({type:"negative",message:u.value,position:"top",timeout:5e3,icon:"error"})}},k=t=>!!t||v("errors.validation.required"),V=t=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)?!0:v("errors.validation.invalidEmail");return(t,e)=>(a(),l(j,{padding:"",class:"!tw-pb-16 !tw-px-3 tw-flex tw-justify-center tw-items-center"},{default:r(()=>[i("div",z,[c(q,{flat:"",bordered:"",class:"!tw-w-full !tw-max-w-54 tw-p-4 !tw-bg-transparent"},{default:r(()=>[e[3]||(e[3]=i("h4",{class:"tw-text-3xl tw-text-center tw-mb-8 tw-font-semibold tw-font-serif"}," Update Information ",-1)),c(R,{class:"!tw-w-full",onSubmit:N(Q,["prevent"])},{default:r(()=>[s.value?(a(),l(g,{key:0},{default:r(()=>e[2]||(e[2]=[i("div",{class:"tw-w-full tw-flex tw-justify-center tw-items-center"}," Successfully updated user information! ",-1)])),_:1})):o("",!0),s.value?o("",!0):(a(),l(g,{key:1,class:"tw-flex tw-flex-col tw-gap-4 tw-w-full !tw-p-0 tw-mb-4"},{default:r(()=>[c(b,{modelValue:w.value,"onUpdate:modelValue":e[0]||(e[0]=p=>w.value=p),label:"Name",type:"text",dense:"","lazy-rules":"",rules:[k],class:"tw-w-full"},null,8,["modelValue","rules"]),c(b,{modelValue:m.value,"onUpdate:modelValue":e[1]||(e[1]=p=>m.value=p),label:"Email",type:"email",dense:"","lazy-rules":"",rules:[k,V],class:"tw-w-full"},null,8,["modelValue","rules"])]),_:1})),u.value?(a(),U("div",I,h(u.value),1)):o("",!0),i("div",F,[s.value?o("",!0):(a(),l(f,{key:0,type:"submit",label:"Update",class:"!tw-w-full !tw-py-2.5"})),s.value?o("",!0):(a(),l(f,{key:1,secondary:"",label:"Go Back",class:"!tw-w-full !tw-py-2.5",onClick:x})),s.value?(a(),l(f,{key:2,secondary:"",label:"Go Back",class:"!tw-w-full !tw-py-2.5",onClick:x})):o("",!0)])]),_:1})]),_:1})])]),_:1}))}});export{D as default};
