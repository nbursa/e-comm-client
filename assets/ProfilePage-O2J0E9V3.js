import{u as j,d as q,a as V,f as N,aZ as F,e as W,B as b,j as n,k as w,w as e,m as t,D as z,l as p,t as l,n as o,q as y,af as k,ag as f,am as v,aq as c,ai as i,Q as S,z as _,C as A,F as D,A as G,au as M,a_ as Z,a$ as J,aW as K,b0 as X}from"./index-C0JJa2YO.js";import{Q as Y}from"./QImg-RQP2TEwU.js";import{Q as ee}from"./QPage-BAchSC7v.js";import{u as te}from"./products-DYdG4mGm.js";import{f as H}from"./currency-BkOr-9aM.js";import{u as ae}from"./order-Ca8KM2zj.js";import"./rates-Zxt8FUGH.js";const le=(d,g)=>{const P=j().settings.language||"en-US",u=typeof d=="string"?new Date(d):d,x={year:"numeric",month:"long",day:"numeric"};return u.toLocaleDateString(P,g||x)},se={class:"tw-text-3xl tw-font-semibold tw-font-serif"},oe={class:"tw-w-full tw-flex tw-flex-col sm:tw-flex-row sm:tw-justify-between tw-gap-4 tw-py-4"},re={class:"tw-text-2xl tw-font-semibold tw-font-serif tw-mb-4"},ne={key:1,class:"tw-text-center tw-text-gray-500"},ue={class:"tw-text-2xl tw-font-semibold tw-font-serif tw-mb-4"},ce={key:1,class:"tw-text-center tw-text-gray-500"},ge=q({__name:"ProfilePage",setup(d){const g="https://e-comm-api-8eba0f6c8782.herokuapp.com/api".replace(/\/$/,""),h=V(),P=te(),u=N(),x=ae(),C=F(),{t:r}=W(),I=b(()=>h.user),$=b(()=>P.getViewedCache()?.products||[]),Q=b(()=>x.orderHistory),O=()=>{try{h.logout(),u.push(M)}catch(s){console.error("Logout failed:",s)}},T=s=>{if(!s)return"";const m=`${g}${s}`,a=C.getCachedImageUrl(m);return a||(C.cacheImageUrl(m),m)},U=()=>{u.push(`${Z}`)},E=()=>{u.push(`${J}`)},L=s=>{u.push(`${K}/${s}`)},B=s=>{u.push(`${X.replace(":id",s.toString())}`)};return(s,m)=>(n(),w(ee,{class:"tw-p-4"},{default:e(()=>[t(G,{flat:"",class:"!tw-bg-transparent tw-max-w-screen-sm tw-mx-auto"},{default:e(()=>[t(z,{class:"tw-w-full tw-flex !tw-justify-between tw-items-center tw-mb-8"},{default:e(()=>[p("h5",se,l(o(r)("profilePage.title")),1)]),_:1}),t(y,null,{default:e(()=>[t(k,{class:"tw-w-full tw-flex tw-flex-col tw-justify-between tw-gap-4 !tw-p-0"},{default:e(()=>[t(f,null,{default:e(()=>[t(v,null,{default:e(()=>[t(c,{class:"tw-text-base"},{default:e(()=>[i(l(I.value?.name),1)]),_:1}),t(c,{class:"tw-text-xs"},{default:e(()=>[i(l(I.value?.email),1)]),_:1})]),_:1})]),_:1}),t(f,{class:"!tw-w-full !tw-flex sm:!tw-flex-row tw-gap-4 sm:tw-gap-2 !tw-p-0 tw-items-center !tw-m-0"},{default:e(()=>[t(S,{outline:"",dense:s.$q.screen.gt.sm,label:o(r)("profilePage.updateProfile"),class:"!tw-w-full sm:!tw-w-fit",onClick:E},null,8,["dense","label"]),t(S,{outline:"",dense:s.$q.screen.gt.sm,label:o(r)("profilePage.changePassword"),class:"!tw-w-full sm:!tw-w-fit",onClick:U},null,8,["dense","label"]),t(S,{outline:"",dense:s.$q.screen.gt.sm,label:o(r)("profilePage.logout"),class:"!tw-w-full sm:!tw-w-fit",onClick:O},null,8,["dense","label"])]),_:1})]),_:1})]),_:1}),p("div",oe,[t(y,null,{default:e(()=>[p("h5",re,l(o(r)("profilePage.viewedItems")),1),$.value?.length?(n(),w(v,{key:0,class:"tw-w-full !tw-max-h-48 !tw-overflow-hidden !tw-overflow-y-auto"},{default:e(()=>[(n(!0),_(D,null,A($.value,a=>(n(),w(k,{key:a.id,clickable:"",onClick:R=>L(a.id)},{default:e(()=>[t(f,{avatar:""},{default:e(()=>[t(Y,{src:T(a.image),alt:a.name||a.title},null,8,["src","alt"])]),_:2},1024),t(f,null,{default:e(()=>[t(c,null,{default:e(()=>[i(l(a.name||a.title),1)]),_:2},1024),t(c,{caption:""},{default:e(()=>[i(l(o(H)(a.price)),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):(n(),_("div",ne,l(o(r)("profilePage.noViewedItems")),1))]),_:1}),t(y,null,{default:e(()=>[p("h5",ue,l(o(r)("profilePage.orderHistory")),1),Q.value?.length?(n(),w(v,{key:0,class:"tw-w-full !tw-max-h-48 !tw-overflow-hidden !tw-overflow-y-auto"},{default:e(()=>[(n(!0),_(D,null,A(Q.value,a=>(n(),w(k,{key:a.id,clickable:"",onClick:R=>B(a.id)},{default:e(()=>[t(f,null,{default:e(()=>[t(c,null,{default:e(()=>[i(l(o(r)("profilePage.order"))+" #"+l(a.id),1)]),_:2},1024),t(c,{caption:""},{default:e(()=>[i(l(o(le)(a.date)),1)]),_:2},1024)]),_:2},1024),t(f,{side:""},{default:e(()=>[t(c,null,{default:e(()=>[i(l(o(H)(a.total)),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):(n(),_("div",ce,l(o(r)("profilePage.noOrder")),1))]),_:1})])]),_:1})]),_:1}))}});export{ge as default};
