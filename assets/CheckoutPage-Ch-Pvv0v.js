import{d as se,c as k,o as A,a as R,w as q,e as b,Q as oe,f as C,t as V,g as Q,h as L,r as ge,F as be,j as we,k as Y,n as H,l as re,m as Fe,_ as xe,p as X,q as F,v as Ce,x as Ee,y as Be,z as Qe,A as Se,B as P,C as z,D as G,E as Re,G as W,H as Oe,I as Ue,J as je,T as qe,K as Ke,L as Le,R as ze,M as Me,O as M,P as ie,S as Ye,U as ue,V as He,W as Z,X as ne,Y as de,Z as We,$ as ae,a0 as Xe,a1 as ke,a2 as Ge,a3 as $e,a4 as Ve,a5 as le,a6 as Pe,a7 as Je,a8 as Ze,a9 as et,aa as tt,ab as nt,ac as O,ad as ee,ae as K,af as ce,ag as j,ah as U,ai as at,aj as lt,ak as ot,al as rt,am as pe,an as st,ao as it,ap as ut,aq as dt,ar as fe}from"./index-C8zgX8gP.js";import{Q as ct}from"./QPage-BhOXnm9w.js";import{u as pt}from"./order-CLWeuH_C.js";import{f as te}from"./currency-dEaWt-lR.js";import{Q as ft}from"./QImg-Bl8LMbJD.js";import"./rates-DlxPSf6Y.js";import"./axios-DVYDL29G.js";const mt={class:"tw-flex tw-flex-col tw-items-start full-width"},vt={class:"q-my-none"},ht={class:"text-h6 q-mb-md"},yt={class:"q-mb-md"},gt={class:"q-mb-none"},bt={class:"q-mb-none"},wt={class:"q-mb-none"},xt={class:"q-mb-md"},Ct={class:"q-mb-none"},St={class:"q-mb-none"},qt={class:"q-mt-sm full-width"},kt={class:"tw-text-center"},$t={class:"tw-text-right"},Vt=se({__name:"OrderConfirmationDialog",props:{modelValue:{type:Boolean,required:!0},details:{type:Object,required:!0},form:{type:Object,required:!0},color:{type:String,required:!0},text:{type:String,required:!0}},emits:["update:modelValue","confirm","cancel"],setup(e,{emit:a}){const p=e,f=a,o=k({get:()=>p.modelValue,set:r=>f("update:modelValue",r)}),t=()=>{o.value=!1,f("confirm")},n=()=>{o.value=!1,f("cancel")};return(r,l)=>(A(),R(Fe,{modelValue:o.value,"onUpdate:modelValue":l[0]||(l[0]=v=>o.value=v),class:"confirm-dialog"},{default:q(()=>[b(re,{style:{"max-width":"430px",width:"95vw",margin:"0 auto"}},{default:q(()=>[b(oe,null,{default:q(()=>[C("div",mt,[C("h6",vt,V(r.$t("checkout.summary")),1),C("p",ht,V(r.$t("checkout.total"))+": "+V(Q(te)(e.details.total)),1),C("div",yt,[C("strong",null,V(r.$t("checkout.shippingDetails"))+":",1),C("p",gt,V(e.form.shipping.firstName)+" "+V(e.form.shipping.lastName),1),C("p",bt,V(e.form.shipping.email),1),C("p",wt,V(e.form.shipping.address),1)]),C("div",xt,[C("strong",null,V(r.$t("checkout.paymentInfo"))+":",1),C("p",Ct,V(r.$t("checkout.card"))+": **** **** **** "+V(e.form.payment&&e.form.payment.cardDetails?.cardNumber.slice(-4)),1),C("p",St,V(r.$t("checkout.expiry"))+": "+V(e.form.payment?.cardDetails?.expiry),1)]),C("div",qt,[C("strong",null,V(r.$t("checkout.items"))+":",1),(A(!0),L(be,null,ge(e.details.items,v=>(A(),L("div",{key:v.id,class:"q-py-xs tw-grid tw-grid-cols-3 tw-gap-1 tw-w-full"},[C("div",null,V(v.name||v.title),1),C("div",kt,V(v.quantity),1),C("div",$t,V(Q(te)(v.price)),1)]))),128))])])]),_:1}),b(we,{class:"tw-flex tw-flex-col sm:tw-flex-row tw-gap-2 tw-items-center !tw-justify-between"},{default:q(()=>[b(Y,{label:r.$t("checkout.cancelButton"),outline:"",class:H(["!tw-w-full sm:!tw-w-40 !tw-py-4 !tw-flex !tw-items-center !tw-justify-center",`tw-border-${e.color}`]),onClick:n},null,8,["label","class"]),b(Y,{label:r.$t("checkout.confirmButton"),flat:"","text-color":e.text,class:H(["!tw-w-full sm:!tw-w-40 !tw-m-0 !tw-py-4 !tw-flex !tw-items-center !tw-justify-center",`bg-${e.color}`]),onClick:t},null,8,["label","text-color","class"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),Pt=xe(Vt,[["__scopeId","data-v-2efbb7ff"]]),me=X({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(e,{slots:a,emit:p}){const f=G(),o=F(null);let t=0;const n=[];function r(d){const x=typeof d=="boolean"?d:e.noErrorFocus!==!0,u=++t,s=(_,i)=>{p(`validation${_===!0?"Success":"Error"}`,i)},y=_=>{const i=_.validate();return typeof i.then=="function"?i.then(m=>({valid:m,comp:_}),m=>({valid:!1,comp:_,err:m})):Promise.resolve({valid:i,comp:_})};return(e.greedy===!0?Promise.all(n.map(y)).then(_=>_.filter(i=>i.valid!==!0)):n.reduce((_,i)=>_.then(()=>y(i).then(m=>{if(m.valid===!1)return Promise.reject(m)})),Promise.resolve()).catch(_=>[_])).then(_=>{if(_===void 0||_.length===0)return u===t&&s(!0),!0;if(u===t){const{comp:i,err:m}=_[0];if(m!==void 0&&console.error(m),s(!1,i),x===!0){const S=_.find(({comp:E})=>typeof E.focus=="function"&&Re(E.$)===!1);S!==void 0&&S.comp.focus()}}return!1})}function l(){t++,n.forEach(d=>{typeof d.resetValidation=="function"&&d.resetValidation()})}function v(d){d!==void 0&&W(d);const x=t+1;r().then(u=>{x===t&&u===!0&&(e.onSubmit!==void 0?p("submit",d):d!==void 0&&d.target!==void 0&&typeof d.target.submit=="function"&&d.target.submit())})}function g(d){d!==void 0&&W(d),p("reset"),Oe(()=>{l(),e.autofocus===!0&&e.noResetFocus!==!0&&c()})}function c(){Ue(()=>{if(o.value===null)return;const d=o.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||o.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||o.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(o.value.querySelectorAll("[tabindex]"),x=>x.tabIndex!==-1);d?.focus({preventScroll:!0})})}Ce(Ee,{bindComponent(d){n.push(d)},unbindComponent(d){const x=n.indexOf(d);x!==-1&&n.splice(x,1)}});let h=!1;return Be(()=>{h=!0}),Qe(()=>{h===!0&&e.autofocus===!0&&c()}),Se(()=>{e.autofocus===!0&&c()}),Object.assign(f.proxy,{validate:r,resetValidation:l,submit:v,reset:g,focus:c,getValidationComponents:()=>n}),()=>P("form",{class:"q-form",ref:o,onSubmit:v,onReset:g},z(a.default))}}),_t=X({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:a,emit:p}){let f=!1,o,t,n=null,r=null,l,v;function g(){o&&o(),o=null,f=!1,n!==null&&(clearTimeout(n),n=null),r!==null&&(clearTimeout(r),r=null),t!==void 0&&t.removeEventListener("transitionend",l),l=null}function c(u,s,y){s!==void 0&&(u.style.height=`${s}px`),u.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,f=!0,o=y}function h(u,s){u.style.overflowY=null,u.style.height=null,u.style.transition=null,g(),s!==v&&p(s)}function d(u,s){let y=0;t=u,f===!0?(g(),y=u.offsetHeight===u.scrollHeight?0:void 0):(v="hide",u.style.overflowY="hidden"),c(u,y,s),n=setTimeout(()=>{n=null,u.style.height=`${u.scrollHeight}px`,l=D=>{r=null,(Object(D)!==D||D.target===u)&&h(u,"show")},u.addEventListener("transitionend",l),r=setTimeout(l,e.duration*1.1)},100)}function x(u,s){let y;t=u,f===!0?g():(v="show",u.style.overflowY="hidden",y=u.scrollHeight),c(u,y,s),n=setTimeout(()=>{n=null,u.style.height=0,l=D=>{r=null,(Object(D)!==D||D.target===u)&&h(u,"hide")},u.addEventListener("transitionend",l),r=setTimeout(l,e.duration*1.1)},100)}return je(()=>{f===!0&&g()}),()=>P(qe,{css:!1,appear:e.appear,onEnter:d,onLeave:x},a.default)}}),_e=X({name:"StepHeader",props:{stepper:{},step:{},goToPanel:Function},setup(e,{attrs:a}){const{proxy:{$q:p}}=G(),f=F(null),o=k(()=>e.stepper.modelValue===e.step.name),t=k(()=>{const s=e.step.disable;return s===!0||s===""}),n=k(()=>{const s=e.step.error;return s===!0||s===""}),r=k(()=>{const s=e.step.done;return t.value===!1&&(s===!0||s==="")}),l=k(()=>{const s=e.step.headerNav,y=s===!0||s===""||s===void 0;return t.value===!1&&e.stepper.headerNav&&y}),v=k(()=>e.step.prefix&&(o.value===!1||e.stepper.activeIcon==="none")&&(n.value===!1||e.stepper.errorIcon==="none")&&(r.value===!1||e.stepper.doneIcon==="none")),g=k(()=>{const s=e.step.icon||e.stepper.inactiveIcon;if(o.value===!0){const y=e.step.activeIcon||e.stepper.activeIcon;return y==="none"?s:y||p.iconSet.stepper.active}if(n.value===!0){const y=e.step.errorIcon||e.stepper.errorIcon;return y==="none"?s:y||p.iconSet.stepper.error}if(t.value===!1&&r.value===!0){const y=e.step.doneIcon||e.stepper.doneIcon;return y==="none"?s:y||p.iconSet.stepper.done}return s}),c=k(()=>{const s=n.value===!0?e.step.errorColor||e.stepper.errorColor:void 0;if(o.value===!0){const y=e.step.activeColor||e.stepper.activeColor||e.step.color;return y!==void 0?y:s}return s!==void 0?s:t.value===!1&&r.value===!0?e.step.doneColor||e.stepper.doneColor||e.step.color||e.stepper.inactiveColor:e.step.color||e.stepper.inactiveColor}),h=k(()=>"q-stepper__tab col-grow flex items-center no-wrap relative-position"+(c.value!==void 0?` text-${c.value}`:"")+(n.value===!0?" q-stepper__tab--error q-stepper__tab--error-with-"+(v.value===!0?"prefix":"icon"):"")+(o.value===!0?" q-stepper__tab--active":"")+(r.value===!0?" q-stepper__tab--done":"")+(l.value===!0?" q-stepper__tab--navigation q-focusable q-hoverable":"")+(t.value===!0?" q-stepper__tab--disabled":"")),d=k(()=>e.stepper.headerNav!==!0?!1:l.value);function x(){f.value!==null&&f.value.focus(),o.value===!1&&e.goToPanel(e.step.name)}function u(s){s.keyCode===13&&o.value===!1&&e.goToPanel(e.step.name)}return()=>{const s={class:h.value};l.value===!0&&(s.onClick=x,s.onKeyup=u,Object.assign(s,t.value===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:a.tabindex||0}));const y=[P("div",{class:"q-focus-helper",tabindex:-1,ref:f}),P("div",{class:"q-stepper__dot row flex-center q-stepper__line relative-position"},[P("span",{class:"row flex-center"},[v.value===!0?e.step.prefix:P(Ke,{name:g.value})])])];if(e.step.title!==void 0&&e.step.title!==null){const D=[P("div",{class:"q-stepper__title"},e.step.title)];e.step.caption!==void 0&&e.step.caption!==null&&D.push(P("div",{class:"q-stepper__caption"},e.step.caption)),y.push(P("div",{class:"q-stepper__label q-stepper__line relative-position"},D))}return Le(P("div",s,y),[[ze,d.value]])}}});function Dt(e){const a=[.06,6,50];return typeof e=="string"&&e.length&&e.split(":").forEach((p,f)=>{const o=parseFloat(p);o&&(a[f]=o)}),a}const It=Me({name:"touch-swipe",beforeMount(e,{value:a,arg:p,modifiers:f}){if(f.mouse!==!0&&M.has.touch!==!0)return;const o=f.mouseCapture===!0?"Capture":"",t={handler:a,sensitivity:Dt(p),direction:ie(f),noop:Ye,mouseStart(n){ue(n,t)&&He(n)&&(Z(t,"temp",[[document,"mousemove","move",`notPassive${o}`],[document,"mouseup","end","notPassiveCapture"]]),t.start(n,!0))},touchStart(n){if(ue(n,t)){const r=n.target;Z(t,"temp",[[r,"touchmove","move","notPassiveCapture"],[r,"touchcancel","end","notPassiveCapture"],[r,"touchend","end","notPassiveCapture"]]),t.start(n)}},start(n,r){M.is.firefox===!0&&ne(e,!0);const l=de(n);t.event={x:l.left,y:l.top,time:Date.now(),mouse:r===!0,dir:!1}},move(n){if(t.event===void 0)return;if(t.event.dir!==!1){W(n);return}const r=Date.now()-t.event.time;if(r===0)return;const l=de(n),v=l.left-t.event.x,g=Math.abs(v),c=l.top-t.event.y,h=Math.abs(c);if(t.event.mouse!==!0){if(g<t.sensitivity[1]&&h<t.sensitivity[1]){t.end(n);return}}else if(window.getSelection().toString()!==""){t.end(n);return}else if(g<t.sensitivity[2]&&h<t.sensitivity[2])return;const d=g/r,x=h/r;t.direction.vertical===!0&&g<h&&g<100&&x>t.sensitivity[0]&&(t.event.dir=c<0?"up":"down"),t.direction.horizontal===!0&&g>h&&h<100&&d>t.sensitivity[0]&&(t.event.dir=v<0?"left":"right"),t.direction.up===!0&&g<h&&c<0&&g<100&&x>t.sensitivity[0]&&(t.event.dir="up"),t.direction.down===!0&&g<h&&c>0&&g<100&&x>t.sensitivity[0]&&(t.event.dir="down"),t.direction.left===!0&&g>h&&v<0&&h<100&&d>t.sensitivity[0]&&(t.event.dir="left"),t.direction.right===!0&&g>h&&v>0&&h<100&&d>t.sensitivity[0]&&(t.event.dir="right"),t.event.dir!==!1?(W(n),t.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),We(),t.styleCleanup=u=>{t.styleCleanup=void 0,document.body.classList.remove("non-selectable");const s=()=>{document.body.classList.remove("no-pointer-events--children")};u===!0?setTimeout(s,50):s()}),t.handler({evt:n,touch:t.event.mouse!==!0,mouse:t.event.mouse,direction:t.event.dir,duration:r,distance:{x:g,y:h}})):t.end(n)},end(n){t.event!==void 0&&(ae(t,"temp"),M.is.firefox===!0&&ne(e,!1),t.styleCleanup!==void 0&&t.styleCleanup(!0),n!==void 0&&t.event.dir!==!1&&W(n),t.event=void 0)}};if(e.__qtouchswipe=t,f.mouse===!0){const n=f.mouseCapture===!0||f.mousecapture===!0?"Capture":"";Z(t,"main",[[e,"mousedown","mouseStart",`passive${n}`]])}M.has.touch===!0&&Z(t,"main",[[e,"touchstart","touchStart",`passive${f.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,a){const p=e.__qtouchswipe;p!==void 0&&(a.oldValue!==a.value&&(typeof a.value!="function"&&p.end(),p.handler=a.value),p.direction=ie(a.modifiers))},beforeUnmount(e){const a=e.__qtouchswipe;a!==void 0&&(ae(a,"main"),ae(a,"temp"),M.is.firefox===!0&&ne(e,!1),a.styleCleanup!==void 0&&a.styleCleanup(),delete e.__qtouchswipe)}});function De(){let e=Object.create(null);return{getCache:(a,p)=>e[a]===void 0?e[a]=typeof p=="function"?p():p:e[a],setCache(a,p){e[a]=p},hasCache(a){return Object.hasOwnProperty.call(e,a)},clearCache(a){a!==void 0?delete e[a]:e=Object.create(null)}}}const Nt={name:{required:!0},disable:Boolean},ve={setup(e,{slots:a}){return()=>P("div",{class:"q-panel scroll",role:"tabpanel"},z(a.default))}},Tt={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},At=["update:modelValue","beforeTransition","transition"];function Ft(){const{props:e,emit:a,proxy:p}=G(),{getCache:f}=De(),{registerTimeout:o}=Xe();let t,n;const r=F(null),l={value:null};function v(w){const I=e.vertical===!0?"up":"left";$((p.$q.lang.rtl===!0?-1:1)*(w.direction===I?1:-1))}const g=k(()=>[[It,v,void 0,{horizontal:e.vertical!==!0,vertical:e.vertical,mouse:!0}]]),c=k(()=>e.transitionPrev||`slide-${e.vertical===!0?"down":"right"}`),h=k(()=>e.transitionNext||`slide-${e.vertical===!0?"up":"left"}`),d=k(()=>`--q-transition-duration: ${e.transitionDuration}ms`),x=k(()=>typeof e.modelValue=="string"||typeof e.modelValue=="number"?e.modelValue:String(e.modelValue)),u=k(()=>({include:e.keepAliveInclude,exclude:e.keepAliveExclude,max:e.keepAliveMax})),s=k(()=>e.keepAliveInclude!==void 0||e.keepAliveExclude!==void 0);ke(()=>e.modelValue,(w,I)=>{const B=i(w)===!0?m(w):-1;n!==!0&&E(B===-1?0:B<m(I)?-1:1),l.value!==B&&(l.value=B,a("beforeTransition",w,I),o(()=>{a("transition",w,I)},e.transitionDuration))});function y(){$(1)}function D(){$(-1)}function _(w){a("update:modelValue",w)}function i(w){return w!=null&&w!==""}function m(w){return t.findIndex(I=>I.props.name===w&&I.props.disable!==""&&I.props.disable!==!0)}function S(){return t.filter(w=>w.props.disable!==""&&w.props.disable!==!0)}function E(w){const I=w!==0&&e.animated===!0&&l.value!==-1?"q-transition--"+(w===-1?c.value:h.value):null;r.value!==I&&(r.value=I)}function $(w,I=l.value){let B=I+w;for(;B!==-1&&B<t.length;){const J=t[B];if(J!==void 0&&J.props.disable!==""&&J.props.disable!==!0){E(w),n=!0,a("update:modelValue",J.props.name),setTimeout(()=>{n=!1});return}B+=w}e.infinite===!0&&t.length!==0&&I!==-1&&I!==t.length&&$(w,w===-1?t.length:-1)}function N(){const w=m(e.modelValue);return l.value!==w&&(l.value=w),!0}function T(){const w=i(e.modelValue)===!0&&N()&&t[l.value];return e.keepAlive===!0?[P($e,u.value,[P(s.value===!0?f(x.value,()=>({...ve,name:x.value})):ve,{key:x.value,style:d.value},()=>w)])]:[P("div",{class:"q-panel scroll",style:d.value,key:x.value,role:"tabpanel"},[w])]}function Ne(){if(t.length!==0)return e.animated===!0?[P(qe,{name:r.value},T)]:T()}function Te(w){return t=Ge(z(w.default,[])).filter(I=>I.props!==null&&I.props.slot===void 0&&i(I.props.name)===!0),t.length}function Ae(){return t}return Object.assign(p,{next:y,previous:D,goTo:_}),{panelIndex:l,panelDirectives:g,updatePanelsList:Te,updatePanelIndex:N,getPanelContent:Ne,getEnabledPanels:S,getPanels:Ae,isValidPanelName:i,keepAliveProps:u,needsUniqueKeepAliveWrapper:s,goToPanelByOffset:$,goToPanel:_,nextPanel:y,previousPanel:D}}function Ie(e){return P("div",{class:"q-stepper__step-content"},[P("div",{class:"q-stepper__step-inner"},z(e.default))])}const he={setup(e,{slots:a}){return()=>Ie(a)}},ye=X({name:"QStep",props:{...Nt,icon:String,color:String,title:{type:String,required:!0},caption:String,prefix:[String,Number],doneIcon:String,doneColor:String,activeIcon:String,activeColor:String,errorIcon:String,errorColor:String,headerNav:{type:Boolean,default:!0},done:Boolean,error:Boolean,onScroll:[Function,Array]},setup(e,{slots:a,emit:p}){const{proxy:{$q:f}}=G(),o=Ve(Pe,le);if(o===le)return console.error("QStep needs to be a child of QStepper"),le;const{getCache:t}=De(),n=F(null),r=k(()=>o.value.modelValue===e.name),l=k(()=>f.platform.is.ios!==!0&&f.platform.is.chrome===!0||r.value!==!0||o.value.vertical!==!0?{}:{onScroll(c){const{target:h}=c;h.scrollTop>0&&(h.scrollTop=0),e.onScroll!==void 0&&p("scroll",c)}}),v=k(()=>typeof e.name=="string"||typeof e.name=="number"?e.name:String(e.name));function g(){const c=o.value.vertical;return c===!0&&o.value.keepAlive===!0?P($e,o.value.keepAliveProps.value,r.value===!0?[P(o.value.needsUniqueKeepAliveWrapper.value===!0?t(v.value,()=>({...he,name:v.value})):he,{key:v.value},a.default)]:void 0):c!==!0||r.value===!0?Ie(a):void 0}return()=>P("div",{ref:n,class:"q-stepper__step",role:"tabpanel",...l.value},o.value.vertical===!0?[P(_e,{stepper:o.value,step:e,goToPanel:o.value.goToPanel}),o.value.animated===!0?P(_t,g):g()]:[g()])}}),Et=/(-\w)/g;function Bt(e){const a={};for(const p in e){const f=p.replace(Et,o=>o[1].toUpperCase());a[f]=e[p]}return a}const Qt=X({name:"QStepper",props:{...Je,...Tt,flat:Boolean,bordered:Boolean,alternativeLabels:Boolean,headerNav:Boolean,contracted:Boolean,headerClass:String,inactiveColor:String,inactiveIcon:String,doneIcon:String,doneColor:String,activeIcon:String,activeColor:String,errorIcon:String,errorColor:String},emits:At,setup(e,{slots:a}){const p=G(),f=Ze(e,p.proxy.$q),{updatePanelsList:o,isValidPanelName:t,updatePanelIndex:n,getPanelContent:r,getPanels:l,panelDirectives:v,goToPanel:g,keepAliveProps:c,needsUniqueKeepAliveWrapper:h}=Ft();Ce(Pe,k(()=>({goToPanel:g,keepAliveProps:c,needsUniqueKeepAliveWrapper:h,...e})));const d=k(()=>`q-stepper q-stepper--${e.vertical===!0?"vertical":"horizontal"}`+(e.flat===!0?" q-stepper--flat":"")+(e.bordered===!0?" q-stepper--bordered":"")+(f.value===!0?" q-stepper--dark q-dark":"")),x=k(()=>`q-stepper__header row items-stretch justify-between q-stepper__header--${e.alternativeLabels===!0?"alternative":"standard"}-labels`+(e.flat===!1||e.bordered===!0?" q-stepper__header--border":"")+(e.contracted===!0?" q-stepper__header--contracted":"")+(e.headerClass!==void 0?` ${e.headerClass}`:""));function u(){const s=z(a.message,[]);if(e.vertical===!0){t(e.modelValue)&&n();const y=P("div",{class:"q-stepper__content"},z(a.default));return s===void 0?[y]:s.concat(y)}return[P("div",{class:x.value},l().map(y=>{const D=Bt(y.props);return P(_e,{key:D.name,stepper:e,step:D,goToPanel:g})})),s,tt("div",{class:"q-stepper__content q-panel-parent"},r(),"cont",e.swipeable,()=>v.value)]}return()=>(o(a),P("div",{class:d.value},et(a.navigation,u())))}}),Rt={class:"col-12 col-sm-6"},Ot={class:"col-12 col-sm-6"},Ut={class:"col-12"},jt={class:"col-12"},Kt={key:0,class:"text-positive text-xs"},Lt={class:"col-12"},zt={class:"col-6"},Mt={class:"col-6"},Yt={key:2},Ht={key:0,class:"q-mt-lg"},Wt=se({__name:"OrderForm",props:{step:{type:Number,required:!0},text:{type:String,required:!0},orderForm:{type:Object,required:!0},isIpsEnabled:{type:Boolean,default:!1},qrCodeDataUrl:{type:String,default:""}},emits:["update:step","update:orderForm","shipping-valid","payment-valid"],setup(e,{emit:a}){const p=e,f=a,{t:o}=nt(),t=F(!1),n=F(!1),r=k({get:()=>p.step,set:i=>{f("update:step",i)}}),l=k({get:()=>p.orderForm,set:i=>{f("update:orderForm",i)}}),v=F(null),g=F(null),c=i=>{t.value=i,f("shipping-valid",i)},h=i=>{n.value=i,f("payment-valid",i)},d=()=>{v.value?v.value.validate().then(i=>{c(i)}).catch(()=>{c(!1)}):c(!1)},x=()=>{g.value?g.value.validate().then(i=>{h(i)}).catch(()=>{h(!1)}):h(!1)},u=i=>!!i||o("errors.validation.required"),s=i=>/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(i)||o("errors.validation.invalidEmail"),y=i=>/^\d{16}$/.test(i.replace(/\s+/g,""))||o("errors.validation.invalidCardNumber"),D=i=>{const[m,S]=i.split("/").map(Number);if(!m||!S)return o("errors.validation.invalidExpiryDate");const E=new Date,$=E.getMonth()+1,N=E.getFullYear()%100;return m>=1&&m<=12&&S>=N&&(S>N||m>=$)||o("errors.validation.invalidExpiryDate")},_=i=>/^\d{3}$/.test(i)||o("errors.validation.invalidCVV");return(i,m)=>(A(),R(Qt,{modelValue:r.value,"onUpdate:modelValue":m[9]||(m[9]=S=>r.value=S),vertical:"",class:"checkout-stepper !tw-bg-transparent full-width",color:"none","text-color":e.text,"header-nav":""},{default:q(()=>[b(ye,{name:1,title:i.$t("checkout.shipping"),icon:"local_shipping",done:e.step>1,class:"checkout-step","header-nav":!0},{default:q(()=>[b(re,{flat:"",bordered:"",class:"!tw-p-0"},{default:q(()=>[b(oe,null,{default:q(()=>[b(me,{ref_key:"shippingFormRef",ref:v,greedy:"",class:"row q-col-gutter-md shipping-form"},{default:q(()=>[C("div",Rt,[b(O,{modelValue:l.value.shipping.firstName,"onUpdate:modelValue":m[0]||(m[0]=S=>l.value.shipping.firstName=S),label:i.$t("checkout.firstName"),"lazy-rules":"",rules:[u],onKeydown:d},null,8,["modelValue","label","rules"])]),C("div",Ot,[b(O,{modelValue:l.value.shipping.lastName,"onUpdate:modelValue":m[1]||(m[1]=S=>l.value.shipping.lastName=S),label:i.$t("checkout.lastName"),"lazy-rules":"",rules:[u],onKeydown:d},null,8,["modelValue","label","rules"])]),C("div",Ut,[b(O,{modelValue:l.value.shipping.email,"onUpdate:modelValue":m[2]||(m[2]=S=>l.value.shipping.email=S),label:i.$t("checkout.email"),type:"email","lazy-rules":"",rules:[u,s],onKeydown:d},null,8,["modelValue","label","rules"])]),C("div",jt,[b(O,{modelValue:l.value.shipping.address,"onUpdate:modelValue":m[3]||(m[3]=S=>l.value.shipping.address=S),label:i.$t("checkout.address"),"lazy-rules":"",rules:[u],onKeydown:d},null,8,["modelValue","label","rules"])])]),_:1},512)]),_:1})]),_:1})]),_:1},8,["title","done"]),b(ye,{name:2,title:i.$t("checkout.payment"),icon:"payment",done:e.step>2,"header-nav":!0,disable:!t.value},{default:q(()=>[e.orderForm.payment?(A(),R(ee,{key:0,class:"!tw-p-0"},{default:q(()=>[b(K,{class:"tw-text-sm"},{default:q(()=>[b(ce,{modelValue:l.value.payment.method,"onUpdate:modelValue":m[4]||(m[4]=S=>l.value.payment.method=S),val:"card",label:i.$t("checkout.cardPayment")},null,8,["modelValue","label"]),b(ce,{modelValue:l.value.payment.method,"onUpdate:modelValue":m[5]||(m[5]=S=>l.value.payment.method=S),val:"ips",disable:!e.isIpsEnabled},{default:q(()=>[C("span",null,[j(V(i.$t("checkout.ipsScanQrCode"))+" ",1),e.isIpsEnabled?U("",!0):(A(),L("span",Kt," - "+V(i.$t("checkout.ipsInfo")),1))])]),_:1},8,["modelValue","disable"])]),_:1})]),_:1})):U("",!0),e.orderForm.payment?.method==="card"?(A(),R(re,{key:1,flat:"",bordered:""},{default:q(()=>[e.orderForm.payment.cardDetails?(A(),R(oe,{key:0},{default:q(()=>[j(V(n.value)+" ",1),b(me,{ref_key:"paymentFormRef",ref:g,greedy:"",class:"row q-col-gutter-md payment-form"},{default:q(()=>[C("div",Lt,[b(O,{modelValue:l.value.payment.cardDetails.cardNumber,"onUpdate:modelValue":m[6]||(m[6]=S=>l.value.payment.cardDetails.cardNumber=S),label:i.$t("checkout.cardNumber"),mask:"#### #### #### ####","lazy-rules":"",rules:[u,y],onKeydown:x},null,8,["modelValue","label","rules"])]),C("div",zt,[b(O,{modelValue:l.value.payment.cardDetails.expiry,"onUpdate:modelValue":m[7]||(m[7]=S=>l.value.payment.cardDetails.expiry=S),label:"MM/YY",mask:"##/##","lazy-rules":"",rules:[u,D],onKeydown:x},null,8,["modelValue","rules"])]),C("div",Mt,[b(O,{modelValue:l.value.payment.cardDetails.cvv,"onUpdate:modelValue":m[8]||(m[8]=S=>l.value.payment.cardDetails.cvv=S),label:"CVV",mask:"###","lazy-rules":"",rules:[u,_],onKeydown:x},null,8,["modelValue","rules"])])]),_:1},512)]),_:1})):U("",!0)]),_:1})):U("",!0),e.isIpsEnabled&&l.value.payment?.method==="ips"?(A(),L("div",Yt,[e.qrCodeDataUrl?(A(),L("div",Ht,[b(ft,{src:e.qrCodeDataUrl,alt:"QR Code for Payment",fit:"contain",class:"tw-w-48 tw-h-48"},null,8,["src"])])):U("",!0)])):U("",!0)]),_:1},8,["title","done","disable"])]),_:1},8,["modelValue","text-color"]))}}),Xt={class:"tw-container tw-max-w-screen-xl tw-mx-auto"},Gt={class:"row q-col-gutter-md"},Jt={class:"col-12 col-md-8"},Zt={class:"col-12 col-md-4"},en={class:"tw-text-xl tw-mb-4"},tn={class:"tw-w-full tw-flex tw-flex-row tw-gap-2"},nn=se({__name:"CheckoutPage",setup(e){at($=>({"0db34090":h.value,"10fcda60":d.value}));const a=Ve("scrollToTop"),p=lt(),f=ot(),o=pt(),t=rt(),n=F(1),r=F(!1),l=F(!1),v=F(!1),g=pe({id:Math.floor(Math.random()*1e3),items:f.items,total:f.totalPrice}),c=pe({shipping:{firstName:"",lastName:"",email:"",address:""},payment:{method:"card",cardDetails:{cardNumber:"",expiry:"",cvv:""}}}),h=k(()=>p.dark.isActive?"white":"black"),d=k(()=>p.dark.isActive?"black":"white"),x=p.dark.isActive,u=k(()=>f.items.reduce(($,N)=>$+N.price*N.quantity,0)),s=()=>{console.log("orderOverview:",c)},y=()=>{r.value=!1},D=()=>{n.value--,a()},_=()=>{n.value===1&&l.value?(o.setShippingForm(c.shipping),n.value++,a()):n.value===2&&v.value?(o.setPaymentForm(c.payment),t.push(ut)):(a(),p.notify({type:"negative",position:"top",message:"Please fix errors in the form.",timeout:1e3}))},i=()=>{t.push(dt)},m=$=>{console.log("Shipping valid:",$),l.value=$},S=$=>{console.log("payment valid:",$),v.value=$},E=()=>{l.value=!!c.shipping.firstName&&!!c.shipping.lastName&&!!c.shipping.email&&!!c.shipping.address,v.value=!!c.payment?.method&&!!c.payment.cardDetails?.cardNumber&&!!c.payment.cardDetails.expiry&&!!c.payment.cardDetails.cvv};return ke(()=>o.orderForm,$=>{c.shipping=$.shipping,c.payment=$.payment??{method:"card",cardDetails:{cardNumber:"",expiry:"",cvv:""}},E()},{deep:!0,immediate:!0}),Se(()=>{o.loadOrder(),E(),a()}),($,N)=>(A(),R(ct,{padding:"",class:"!tw-pb-16"},{default:q(()=>[C("div",Xt,[C("div",Gt,[C("div",Jt,[b(Wt,{step:n.value,"onUpdate:step":N[0]||(N[0]=T=>n.value=T),text:d.value,color:h.value,"order-form":c,onShippingValid:m,onPaymentValid:S},null,8,["step","text","color","order-form"])]),C("div",Zt,[b(ee,{class:H(["tw-flex tw-justify-between tw-flex-col tw-gap-4 sm:!tw-pt-4 sm:!tw-pb-3 tw-rounded-md",Q(x)?"tw-bg-transparent text-light":"bg-light text-dark"])},{default:q(()=>[b(K,{class:"tw-w-full"},{default:q(()=>[C("div",en,V($.$t("checkout.orderSummary")),1),b(st,{dense:"",class:"tw-w-full tw-flex tw-flex-col tw-justify-between"},{default:q(()=>[(A(!0),L(be,null,ge(Q(f).items,T=>(A(),R(ee,{key:T.id,class:"tw-justify-between"},{default:q(()=>[b(K,null,{default:q(()=>[b(fe,null,{default:q(()=>[j(V(T.name||T.title),1)]),_:2},1024),b(fe,{caption:""},{default:q(()=>[j(V($.$t("checkout.qty"))+": "+V(T.quantity),1)]),_:2},1024)]),_:2},1024),b(K,{side:"",class:H(Q(x)?"text-light":"text-dark")},{default:q(()=>[j(V(Q(te)(T.price*T.quantity)),1)]),_:2},1032,["class"])]),_:2},1024))),128)),b(it,{class:"q-my-md"}),b(ee,null,{default:q(()=>[b(K,{class:"text-subtitle1 text-weight-bold"},{default:q(()=>[j(V($.$t("checkout.total")),1)]),_:1}),b(K,{side:"",class:H(["text-subtitle1 text-weight-bold",Q(x)?"text-light":"text-dark"])},{default:q(()=>[j(V(Q(te)(u.value)),1)]),_:1},8,["class"])]),_:1})]),_:1})]),_:1}),b(we,{align:"center"},{default:q(()=>[b(Y,{color:h.value,"text-color":d.value,label:n.value===2?$.$t("checkout.orderOverview"):$.$t("checkout.continue"),disable:n.value===1&&!l.value||n.value===2&&!v.value,type:"submit",class:"full-width tw-mb-2 !tw-py-4",onClick:N[1]||(N[1]=T=>_())},null,8,["color","text-color","label","disable"]),C("div",tn,[b(Y,{color:d.value,"text-color":h.value,label:n.value===2?$.$t("checkout.toShipping"):$.$t("checkout.toCart"),class:"full-width !tw-py-4",onClick:N[2]||(N[2]=T=>n.value===2?D():i())},null,8,["color","text-color","label"]),n.value===2?(A(),R(Y,{key:0,color:d.value,"text-color":h.value,label:$.$t("checkout.toCart"),class:"full-width !tw-py-4",onClick:N[3]||(N[3]=T=>i())},null,8,["color","text-color","label"])):U("",!0)])]),_:1})]),_:1},8,["class"])])])]),b(Pt,{modelValue:r.value,"onUpdate:modelValue":N[4]||(N[4]=T=>r.value=T),form:c,details:g,color:h.value,text:d.value,onConfirm:s,onCancel:y},null,8,["modelValue","form","details","color","text"])]),_:1}))}}),cn=xe(nn,[["__scopeId","data-v-6fb14585"]]);export{cn as default};
